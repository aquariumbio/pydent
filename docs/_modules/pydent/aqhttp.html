<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pydent.aqhttp &#8212; pydent 1.0.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/style.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>
    


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          Trident</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Trident <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../aqsession.html">Session (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.aqsession</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../aqsession.html#user-objects">User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.AqSession.html">pydent.aqsession.AqSession</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.Browser.html">pydent.aqsession.Browser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../aqsession.html#non-user-objects">Non-User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.SessionABC.html">pydent.aqsession.SessionABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.AqHTTP.html">pydent.aqsession.AqHTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aqsession.html#interfaces">Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">Models (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.models</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#model-classes">Model Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#operations">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#plans">Plans</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#inventory">Inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#data-and-io">Data and IO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#user">User</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#model-mixins">Model Mixins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.CreateMixin.html">pydent.models.crud_mixin.CreateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.DeleteMixin.html">pydent.models.crud_mixin.DeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.JSONDeleteMixin.html">pydent.models.crud_mixin.JSONDeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.JSONSaveMixin.html">pydent.models.crud_mixin.JSONSaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.SaveMixin.html">pydent.models.crud_mixin.SaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.UpdateMixin.html">pydent.models.crud_mixin.UpdateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.data_associations.DataAssociatorMixin.html">pydent.models.data_associations.DataAssociatorMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.field_value_mixins.FieldMixin.html">pydent.models.field_value_mixins.FieldMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.field_value_mixins.FieldTypeInterface.html">pydent.models.field_value_mixins.FieldTypeInterface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.field_value_mixins.FieldValueInterface.html">pydent.models.field_value_mixins.FieldValueInterface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#field-relationships">Field Relationships</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.BaseRelationship.html">pydent.relationships.BaseRelationship</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.BaseRelationshipAccessor.html">pydent.relationships.BaseRelationshipAccessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.Function.html">pydent.relationships.Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasMany.html">pydent.relationships.HasMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasManyGeneric.html">pydent.relationships.HasManyGeneric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasManyThrough.html">pydent.relationships.HasManyThrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasOne.html">pydent.relationships.HasOne</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasOneFromMany.html">pydent.relationships.HasOneFromMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.JSON.html">pydent.relationships.JSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.Many.html">pydent.relationships.Many</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.One.html">pydent.relationships.One</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.Raw.html">pydent.relationships.Raw</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.add_schema.html">pydent.marshaller.add_schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../planner.html">Planner (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.planner</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../planner.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.planner.Planner.html">pydent.planner.Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.planner.PlannerLayout.html">pydent.planner.PlannerLayout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../planner.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.planner.PlannerException.html">pydent.planner.PlannerException</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../exceptions.html">Exceptions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.exceptions</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../marshaller.html">Serialization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.marshaller</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.SchemaModel.html">pydent.marshaller.SchemaModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.ModelRegistry.html">pydent.marshaller.ModelRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.SchemaRegistry.html">pydent.marshaller.SchemaRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.descriptors.html">pydent.marshaller.descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.exceptions.html">pydent.marshaller.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.utils.html">pydent.marshaller.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../marshaller.html#fields">Fields</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Alias.html">pydent.marshaller.fields.Alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Callback.html">pydent.marshaller.fields.Callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Field.html">pydent.marshaller.fields.Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.FieldABC.html">pydent.marshaller.fields.FieldABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Nested.html">pydent.marshaller.fields.Nested</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Relationship.html">pydent.marshaller.fields.Relationship</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../basics/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#logging-into-a-session">Logging into a session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#making-queries">Making queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#relationship-queries">Relationship Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#creating-inventory">Creating inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/installation.html">Installing Trident</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/installation.html#installation-for-developers">Installation for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/inventory.html">Inventory Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/inventory.html#creating-new-samples">Creating new samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/inventory.html#updating-sample-properties">Updating sample properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/inventory.html#creating-new-items">Creating new items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/inventory.html#creating-new-collections">Creating new collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/inventory.html#saving-inventory">Saving inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/planning.html">Experiment Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/querying.html">Making Queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#basic-browsing">Basic Browsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#browser-scope">Browser Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#relationship-browsing">Relationship Browsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../basics/querying.html#avoid-using-too-many-queries-n-1-problem">Avoid using too many queries (N+1 problem)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basics/querying.html#the-browser-cache">The Browser Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#logging-requests">Logging Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#asynchrounous-requests">Asynchrounous Requests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../aqsession.html">Session (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.aqsession</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../aqsession.html#user-objects">User Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aqsession.html#non-user-objects">Non-User Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../models.html">Models (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.models</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#model-classes">Model Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#model-mixins">Model Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#field-relationships">Field Relationships</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../planner.html">Planner (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.planner</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../planner.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../planner.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../exceptions.html">Exceptions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.exceptions</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../marshaller.html">Serialization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.marshaller</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.SchemaModel.html">pydent.marshaller.SchemaModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.ModelRegistry.html">pydent.marshaller.ModelRegistry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.SchemaRegistry.html">pydent.marshaller.SchemaRegistry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.descriptors.html">pydent.marshaller.descriptors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.exceptions.html">pydent.marshaller.exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.utils.html">pydent.marshaller.utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../marshaller.html#fields">Fields</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/topics.html">Advanced topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/caching.html">Structured queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/caching.html#speeding-up-queries">Speeding up queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../advanced/caching.html#temporary-sessions">Temporary Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced/caching.html#optimized-queries">Optimized queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/planner_tutorial.html">Planner tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aql/schemas.html">Aquarium Query Language Schema</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../aql/schemas.html#aquarium-query-language-aql-schema">Aquarium Query Language (AQL) Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aql/schemas.html#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/contributing.html#running-tests">Running Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#server-vs-local-tests">Server vs local tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/contributing.html#installing-dependencies">Installing dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#manual-release">Manual release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/versions.html">pydent change log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#id1">1.0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#section-1">1.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#section-2">1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#section-3">1.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a23">0.1.5a23</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a21">0.1.5a21</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a20">0.1.5a20</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a19">0.1.5a19</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a18">0.1.5a18</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a17">0.1.5a17</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a16">0.1.5a16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a15">0.1.5a15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a14">0.1.5a14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#section-4">0.1.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a13">0.1.5a13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a12">0.1.5a12</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a11">0.1.5a11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a10">0.1.5a10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a9">0.1.5a9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a8">0.1.5a8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a6">0.1.5a6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a5">0.1.5a5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a4">0.1.5a4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a3">0.1.5a3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a2">0.1.5a2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a1">0.1.5a1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a">0.1.5a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a-1">0.1.4a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a-2">0.1.3a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a-3">0.1.2a</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/versions.html#minor-changes">Minor changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <h1>Source code for pydent.aqhttp</h1><div class="highlight"><pre>
<span></span>&quot;&quot;&quot;
AqHTTP (:mod:`pydent.aqhttp`)
=============================

.. currentmodule:: pydent.aqhttp

Request class for making raw http requests to Aquarium

This module contains the AqHTTP class, which can make arbitrary post/put/get
requests to Aquarium and returns JSON data.

Generally, Trident users should be unable to make arbitrary requests using this
class.
Users should only access these methods indirectly through a ``Session`` or
``SessionInterface`` instance.
&quot;&quot;&quot;
import json
from typing import Dict

import requests
from retry import retry

from pydent.exceptions import ForbiddenRequestError
from pydent.exceptions import TridentJSONDataIncomplete
from pydent.exceptions import TridentLoginError
from pydent.exceptions import TridentRequestError
from pydent.exceptions import TridentTimeoutError
from pydent.utils import logger
from pydent.utils import pprint_data
from pydent.utils import url_build


LOGIN_RETRY_DELAY = 1
LOGIN_RETRY_BACKOFF = 1
LOGIN_RETRY_MAX_DELAY = 2


<div class="viewcode-block" id="AqHTTP"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP">[docs]</a>class AqHTTP:
    &quot;&quot;&quot;Defines a Python to Aquarium server connection. Makes HTTP requests to
    Aquarium and returns JSON.

    This class should be obscured from Trident users so that they cannot
    make arbitrary requests to an Aquarium server and get sensitive
    information (e.g. User json that is returned contains api_key,
    password_digest, etc.) or make damaging posts. These requests should be made
    by a SessionInterface object instead.
    &quot;&quot;&quot;

    TIMEOUT = 10

<div class="viewcode-block" id="AqHTTP.__init__"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP.__init__">[docs]</a>    def __init__(self, login: str, password: str, aquarium_url: str):
        &quot;&quot;&quot;Initializes an aquarium session with login, password, and server.

        :param login: Aquarium login
        :type login: str
        :param aquarium_url: aquarium url to the server
        :type aquarium_url: str
        &quot;&quot;&quot;
        self.login = login  #: the user login name
        self.aquarium_url = aquarium_url  #: the aquarium url
        self._requests_session = None  #: the requests session
        self.timeout = self.__class__.TIMEOUT  #: the timeout (s) for requests
        self._login(login, password)
        self.log = logger(name=&quot;AqHTTP@{}&quot;.format(aquarium_url))  #: the logger
        self._using_requests = True  #: if False, any HTTP requests will throw and error
        self.num_requests = 0  #: number of requests counter</div>

<div class="viewcode-block" id="AqHTTP.on"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP.on">[docs]</a>    def on(self):
        &quot;&quot;&quot;Turn on requests. When requests are off, this causes.

        :class:`ForbiddenRequestError &lt;pydent.exceptions.ForbiddenRequestError&gt;`
        to be raised if a request is made.

        :return: None
        &quot;&quot;&quot;
        self._using_requests = True</div>

<div class="viewcode-block" id="AqHTTP.off"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP.off">[docs]</a>    def off(self):
        &quot;&quot;&quot;Turn off requests. Will cause.

        :class:`ForbiddenRequestError &lt;pydent.exceptions.ForbiddenRequestError&gt;`
        to be raised if a request is made.

        :return: None
        &quot;&quot;&quot;
        self._using_requests = False</div>

    @staticmethod
    def _format_response_info(
        response: requests.Response,
        include_text: bool = False,
        include_body: bool = False,
    ) -&gt; str:
        if response is not None:
            if response.status_code &gt;= 400:
                include_text = True
            info = dict(response.request.__dict__)
            info.update({&quot;seconds&quot;: response.elapsed.total_seconds()})
            msg = &quot;REQUEST: (t={seconds}s)  {method} {url}&quot;.format(**info)
            if include_body:
                body = info[&quot;body&quot;]
                try:
                    my_json = body.decode(&quot;utf8&quot;).replace(&quot;&#39;&quot;, &#39;&quot;&#39;)
                    body = json.loads(my_json)
                    body = pprint_data(body, max_list_len=10)
                except Exception:
                    pass
                msg = msg + &quot;\n&quot; + &quot;BODY: {body}&quot;.format(body=body)
            if include_text:
                text = getattr(response, &quot;text&quot;, &quot;&quot;)
                try:
                    text = json.dumps(json.loads(text), indent=2)
                except Exception:
                    pass
                msg = msg + &quot;\n&quot; + &quot;TEXT: {text}&quot;.format(text=text)
            return msg
        return &quot;RESPONSE: NO RESPONSE&quot;

    @staticmethod
    def _format_request_status(response: requests.Response) -&gt; str:
        if response is not None:
            return &quot;STATUS:  {} {}&quot;.format(response.status_code, response.reason)
        return &quot;STATUS: NO RESPONSE&quot;

    @property
    def url(self) -&gt; str:
        &quot;&quot;&quot;An alias of aquarium_url.&quot;&quot;&quot;
        return self.aquarium_url

    @staticmethod
    def create_session_json(login: str, password: str) -&gt; Dict:
        return {&quot;session&quot;: {&quot;login&quot;: login, &quot;password&quot;: password}}

<div class="viewcode-block" id="AqHTTP._login"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP._login">[docs]</a>    @retry(
        TridentLoginError,
        delay=LOGIN_RETRY_DELAY,
        backoff=LOGIN_RETRY_BACKOFF,
        max_delay=LOGIN_RETRY_MAX_DELAY,
        tries=3,
    )
    def _login(self, login: str, password: str):
        &quot;&quot;&quot;Login to aquarium and saves header as a requests.Session()

        :param login: Aquarium login
        :param password: Aquarium password
        :return: None
        :raises:
            TridentLoginError: If Aquarium authentication fails or server could not
            be contacted
            TridentTimeoutError: If response time exceeds specified timeout
        &quot;&quot;&quot;
        session_data = self.create_session_json(login, password)
        try:
            res = requests.post(
                url_build(self.aquarium_url, &quot;sessions.json&quot;),
                json=session_data,
                timeout=self.timeout,
            )
            if res is None:
                raise requests.exceptions.ConnectionError
            cookies = dict(res.cookies)

            # Check for remember token
            if not any([&quot;remember_token&quot; in k for k in dict(res.cookies)]):
                raise TridentLoginError(
                    &quot;Authentication error - Cannot connect to Aquarium at {}. &quot;
                    &quot;Please check that your login, password, and url are correct.&quot;
                )

            # fix remember token (for some outdated versions of Aquarium)
            for c in dict(cookies):
                if &quot;remember_token&quot; in c:
                    cookies[&quot;remember_token&quot;] = cookies[c]
            # TODO: do we remove the session cookie to handle asynchronous requests?
            self.cookies = dict(cookies)
        except requests.exceptions.MissingSchema as error:
            raise TridentLoginError(
                &quot;Aquarium URL {} incorrectly formatted. {}&quot;.format(
                    self.aquarium_url, error.args[0]
                )
            )
        except requests.exceptions.ConnectTimeout:
            raise TridentTimeoutError(
                &quot;Either Aquarium took too long to respond during login or your internet&quot;
                &quot; connection is slow. Make sure the url {} is correct.&quot;
                &quot; Alternatively, use Session.set_timeout&quot;
                &quot; to increase the request timeout.&quot;.format(self.aquarium_url)
            )
        except requests.exceptions.ConnectionError:
            raise TridentLoginError(
                &quot;Could not contact &#39;{}&#39;. Login request returned no response&quot;.format(
                    self.aquarium_url
                )
            )</div>

    @staticmethod
    def _serialize_request(url: str, method: str, body: dict) -&gt; str:
        return json.dumps({&quot;url&quot;: url, &quot;method&quot;: method, &quot;body&quot;: body}, sort_keys=True)

    @classmethod
    def _dispatch_response(cls, response):
        if response.status_code == 422:
            pass
        elif response.status_code &gt;= 400:
            response_info = cls._format_response_info(response)
            request_status = cls._format_request_status(response)
            msg = &quot;\n&quot;.join(
                [
                    &quot;The Aquarium server returned an error.&quot;,
                    request_status,
                    response_info,
                ]
            )
            raise TridentRequestError(msg, response)

<div class="viewcode-block" id="AqHTTP.request"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP.request">[docs]</a>    def request(
        self,
        method: str,
        path: str,
        timeout: int = None,
        allow_none: bool = True,
        **kwargs,
    ) -&gt; dict:
        &quot;&quot;&quot;Performs a http request.

        :param method: request method (e.g. &#39;put&#39;, &#39;post&#39;, &#39;get&#39;, etc.)
        :type method: str
        :param path: url to perform the request
        :type path: str
        :param timeout: time in seconds to process request before raising
                exception
        :type timeout: int
        :param allow_none: if False will raise error when json_data
                contains a None or null value (default: True)
        :type allow_none: boolean
        :param kwargs: additional arguments to post to request
        :type kwargs: dict
        :return: json
        :rtype: dict
        &quot;&quot;&quot;

        url = url_build(self.aquarium_url, path)
        if not self._using_requests:
            raise ForbiddenRequestError(
                &quot;Attempted a request ({} {}) when requests have been turned OFF.&quot;
                &quot;\nDATA: {}&quot;.format(method.upper(), url, kwargs[&quot;json&quot;])
            )

        if timeout is None:
            timeout = self.timeout
        if not allow_none and &quot;json&quot; in kwargs:
            self._disallow_null_in_json(kwargs[&quot;json&quot;])

        self.num_requests += 1
        response = requests.request(
            method, url, timeout=timeout, cookies=self.cookies, **kwargs
        )

        self.log.info(self._format_response_info(response))
        self._dispatch_response(response)
        return self._response_to_json(response)</div>

<div class="viewcode-block" id="AqHTTP._response_to_json"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP._response_to_json">[docs]</a>    def _response_to_json(self, response: requests.Response) -&gt; dict:
        &quot;&quot;&quot;Turns :class:`requests.Request` instance into a json.

        Raises TridentRequestError if an error occurs.
        &quot;&quot;&quot;

        if response.url == url_build(self.aquarium_url, &quot;signin&quot;):
            msg = (
                &quot;There was an error with authenticating the request. Aquarium &quot;
                + &quot;re-routed to the sign-in page.&quot;
            )
            raise TridentRequestError(msg, response)

        try:
            response_json = response.json()
        except json.JSONDecodeError:
            msg = &quot;Response is not JSON formatted&quot;
            msg += &quot;\nMessage:\n&quot; + response.text
            self.log.error(self._format_response_info(response))
            raise TridentRequestError(msg, response)
        if response_json:
            if &quot;errors&quot; in response_json:
                errors = response_json[&quot;errors&quot;]
                if isinstance(errors, list):
                    errors = &quot;\n&quot;.join(errors)
                msg = &quot;Error response:\n{}&quot;.format(errors)
                raise TridentRequestError(msg, response)
        return response_json</div>

<div class="viewcode-block" id="AqHTTP._disallow_null_in_json"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP._disallow_null_in_json">[docs]</a>    @staticmethod
    def _disallow_null_in_json(json_data: dict):
        &quot;&quot;&quot;Raises :class:pydent.exceptions.TridentJSONDataIncomplete exception
        if json data being sent contains a null value.

        :raises:
            TridentJSONDataIncomplete: if json data containers a null or None value.
        &quot;&quot;&quot;
        if None in json_data.values():
            raise TridentJSONDataIncomplete(
                &quot;JSON data {} contains a null value.&quot;.format(json_data)
            )</div>

<div class="viewcode-block" id="AqHTTP.post"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP.post">[docs]</a>    def post(
        self,
        path: str,
        json_data: dict = None,
        timeout: int = None,
        allow_none: bool = True,
        **kwargs,
    ) -&gt; dict:
        &quot;&quot;&quot;Make a post request to the session.

        :param path: url
        :type path: str
        :param json_data: json_data to post
        :type json_data: dict
        :param timeout: time in seconds to process request before raising
                exception
        :type timeout: int
        :param allow_none: if False throw error if json_data contains a null
                or None value (default True)
        :type allow_none: boolean
        :param kwargs: additional arguments to post to request
        :type kwargs: dict
        :return: json
        :rtype: dict
        &quot;&quot;&quot;
        return self.request(
            &quot;post&quot;,
            path,
            json=json_data,
            timeout=timeout,
            allow_none=allow_none,
            **kwargs,
        )</div>

<div class="viewcode-block" id="AqHTTP.put"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP.put">[docs]</a>    def put(
        self,
        path: str,
        json_data: dict = None,
        timeout: int = None,
        allow_none: bool = True,
        **kwargs,
    ) -&gt; dict:
        &quot;&quot;&quot;Make a put request to the session.

        :param path: url
        :type path: str
        :param json_data: json_data to post
        :type json_data: dict
        :param timeout: time in seconds to process request before raising
                exception
        :type timeout: int
        :param allow_none: if False throw error when json_data contains a null
                or None value (default True)
        :type allow_none: boolean
        :param kwargs: additional arguments to post to request
        :type kwargs: dict
        :return: json
        :rtype: dict
        &quot;&quot;&quot;
        return self.request(
            &quot;put&quot;,
            path,
            json=json_data,
            timeout=timeout,
            allow_none=allow_none,
            **kwargs,
        )</div>

<div class="viewcode-block" id="AqHTTP.get"><a class="viewcode-back" href="../../generated/pydent.aqsession.AqHTTP.html#pydent.aqsession.AqHTTP.get">[docs]</a>    def get(
        self, path: str, timeout: int = None, allow_none: bool = True, **kwargs
    ) -&gt; dict:
        &quot;&quot;&quot;Make a get request to the session.

        :param path: url
        :type path: str
        :param timeout: time in seconds to process request before raising
                exception
        :type timeout: int
        :param allow_none: if False throw error when json_data contains a null
                or None value (default: True)
        :type allow_none: boolean
        :param kwargs: additional arguments to post to request
        :type kwargs: dict
        :return: json
        :rtype: dict
        &quot;&quot;&quot;
        return self.request(
            &quot;get&quot;, path, timeout=timeout, allow_none=allow_none, **kwargs
        )</div>

    def delete(self, path: str, timeout: int = None, **kwargs) -&gt; dict:
        return self.request(&quot;delete&quot;, path, timeout=timeout, **kwargs)

    def __repr__(self):
        return &quot;&lt;{}(user=&#39;{}&#39;, url=&#39;{}&#39;)&gt;&quot;.format(
            self.__class__.__name__, self.login, self.aquarium_url
        )

    def __str__(self):
        return self.__repr__()</div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2020, University of Washington.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>