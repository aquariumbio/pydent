
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pydent.interfaces &#8212; Trident 0.0.33a documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Trident 0.0.33a documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="sidebar-subtitle">
    <a href="../../index.html">
        <h1>Trident</h1>
        <h2>0.0.33a</h2>
    </a>
</p>

<p>
    Trident is a python scripting API wrapper for Aquarium. With Trident,
    you can create python scripts and apps that mine data, create samples,
    submit laboratory protocols, and more. You are looking at documentation
    for version <b>0.0.33a</b>.
</p>
<div>
    <a href="https://circleci.com/gh/klavinslab/trident/tree/master"><img src="https://circleci.com/gh/klavinslab/trident.svg?style=svg" alt="build status"></a>
    <a href="https://badge.fury.io/py/pydent"><img src="https://badge.fury.io/py/pydent.svg" alt="PyPI version" height="18"></a>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for pydent.interfaces</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Session interfaces for interacting with Aquarium.</span>

<span class="sd">Session interfaces are created by an AqSession instance and use an AqHTTP</span>
<span class="sd">instance to make http requests to Aquarium.</span>

<span class="sd">Generally, Trident users should be unable to directly access AqHTTP method to</span>
<span class="sd">prevent potentially damaging requests or revealing sensitive information.</span>
<span class="sd">Session interfaces define a particular way an AqHTTP is used.</span>

<span class="sd">Interfaces are roughly grouped into:</span>

<span class="sd">(1) ModelInterface - for finding and retrieving Aquarium models and information</span>
<span class="sd">(2) CreateInterface - for creating new objects (e.g. new Samples) in Aquarium</span>
<span class="sd">(3) UpdateInterface - for updating objects in Aquarium</span>

<span class="sd">Example:</span>
<span class="sd">    session1 = AqSession(login, password, aquarium_url)</span>
<span class="sd">    session1.User</span>
<span class="sd">    # =&gt; a ModelInterface instance</span>

<span class="sd">    session1.User.find(1)</span>
<span class="sd">    # use model interface with User to find User(id=1)</span>

<span class="sd">    session1.aqhttp.post(...)</span>
<span class="sd">    # not allowed</span>

<span class="sd">    session1.create</span>
<span class="sd">    # =&gt; a CreateInterface</span>

<span class="sd">    session1.create.samples(list_of_samples)</span>
<span class="sd">    # creates samples from a list by calling method CreateInterface.samples</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">inflection</span> <span class="k">import</span> <span class="n">pluralize</span><span class="p">,</span> <span class="n">underscore</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="k">import</span> <span class="n">ModelRegistry</span>
<span class="kn">from</span> <span class="nn">.exceptions</span> <span class="k">import</span> <span class="n">TridentRequestError</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="k">import</span> <span class="n">url_build</span>


<div class="viewcode-block" id="SessionInterface"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.SessionInterface">[docs]</a><span class="k">class</span> <span class="nc">SessionInterface</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generic session interface.</span>

<span class="sd">    Trident users should only be able to make requests through a</span>
<span class="sd">    SessionInterface to avoid making arbitrary and potentially damaging</span>
<span class="sd">    http requests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aqhttp</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializer for SessionInterface</span>

<span class="sd">        :param aqhttp: aqhttp instance for this interface</span>
<span class="sd">        :type aqhttp: AqHTTP</span>
<span class="sd">        :param session: session instance for this interface</span>
<span class="sd">        :type session: AqSession</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span> <span class="o">=</span> <span class="n">aqhttp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span></div>


<div class="viewcode-block" id="UtilityInterface"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface">[docs]</a><span class="k">class</span> <span class="nc">UtilityInterface</span><span class="p">(</span><span class="n">SessionInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Miscellaneous requests for creating, updating, etc.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: have ability to save new properties</span>
    <span class="k">def</span> <span class="nf">create_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">samples</span><span class="p">):</span>
        <span class="n">json</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;field_values&quot;</span><span class="p">})</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;browser/create_samples&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;samples&quot;</span><span class="p">:</span> <span class="n">json</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">create_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;items/make/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">i</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">object_type</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>

<div class="viewcode-block" id="UtilityInterface.create_sample_type"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.create_sample_type">[docs]</a>    <span class="k">def</span> <span class="nf">create_sample_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new sample type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">st_data</span> <span class="o">=</span> <span class="n">sample_type</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">relations</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;field_types&#39;</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;sample_types.json&#39;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">st_data</span><span class="p">)</span>
        <span class="n">sample_type</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sample_type</span></div>

<div class="viewcode-block" id="UtilityInterface.create_object_type"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.create_object_type">[docs]</a>    <span class="k">def</span> <span class="nf">create_object_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new object type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ot_data</span> <span class="o">=</span> <span class="n">object_type</span><span class="o">.</span><span class="n">dump</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;object_types.json&#39;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">ot_data</span><span class="p">)</span>
        <span class="n">object_type</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">object_type</span></div>

<div class="viewcode-block" id="UtilityInterface.create_operation_type"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.create_operation_type">[docs]</a>    <span class="k">def</span> <span class="nf">create_operation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new operation type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">op_data</span> <span class="o">=</span> <span class="n">operation_type</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;field_types&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;allowable_field_types&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;cost_model&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;documentation&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;precondition&#39;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">})</span>

        <span class="c1"># Format &#39;sample_type&#39; and &#39;object_type&#39; keys for afts</span>
        <span class="k">for</span> <span class="n">ft_d</span><span class="p">,</span> <span class="n">ft</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                <span class="n">op_data</span><span class="p">[</span><span class="s1">&#39;field_types&#39;</span><span class="p">],</span> <span class="n">operation_type</span><span class="o">.</span><span class="n">field_types</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">aft_d</span><span class="p">,</span> <span class="n">aft</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                    <span class="n">ft_d</span><span class="p">[</span><span class="s1">&#39;allowable_field_types&#39;</span><span class="p">],</span> <span class="n">ft</span><span class="o">.</span><span class="n">allowable_field_types</span><span class="p">):</span>
                <span class="n">aft_d</span><span class="p">[</span><span class="s1">&#39;sample_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">aft</span><span class="o">.</span><span class="n">sample_type</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
                <span class="n">aft_d</span><span class="p">[</span><span class="s1">&#39;object_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">aft</span><span class="o">.</span><span class="n">object_type</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;operation_types.json&#39;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">op_data</span><span class="p">)</span>
        <span class="n">operation_type</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">operation_type</span></div>

<div class="viewcode-block" id="UtilityInterface.estimate_plan_cost"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.estimate_plan_cost">[docs]</a>    <span class="k">def</span> <span class="nf">estimate_plan_cost</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the plan cost</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;launcher/estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">plan</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="n">plan</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;costs&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">cost</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">operation</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                    <span class="n">operation</span><span class="o">.</span><span class="n">cost</span> <span class="o">=</span> <span class="n">cost</span>
                    <span class="n">total</span> <span class="o">+=</span> <span class="p">(</span><span class="n">cost</span><span class="p">[</span><span class="s1">&#39;labor&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">cost</span><span class="p">[</span><span class="s1">&#39;labor_rate&#39;</span><span class="p">]</span> <span class="o">+</span>
                              <span class="n">cost</span><span class="p">[</span><span class="s1">&#39;materials&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">cost</span><span class="p">[</span><span class="s1">&#39;markup_rate&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">total</span></div>

<div class="viewcode-block" id="UtilityInterface.create_plan"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.create_plan">[docs]</a>    <span class="k">def</span> <span class="nf">create_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves a plan</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pre_ops</span> <span class="o">=</span> <span class="n">plan</span><span class="o">.</span><span class="n">operations</span>
        <span class="k">if</span> <span class="n">pre_ops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pre_ops</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">plan_data</span> <span class="o">=</span> <span class="n">plan</span><span class="o">.</span><span class="n">to_save_json</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="s2">&quot;plans.json?user_id=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">current_user</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">json_data</span><span class="o">=</span><span class="n">plan_data</span><span class="p">)</span>
        <span class="n">plan</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">post_ops</span> <span class="o">=</span> <span class="n">plan</span><span class="o">.</span><span class="n">operations</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pre_ops</span><span class="p">)):</span>
            <span class="n">pre_ops</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">post_ops</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">plan</span></div>

    <span class="k">def</span> <span class="nf">save_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">):</span>
        <span class="n">plan_data</span> <span class="o">=</span> <span class="n">plan</span><span class="o">.</span><span class="n">to_save_json</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="s2">&quot;plans/</span><span class="si">{}</span><span class="s2">.json?user_id=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">current_user</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">json_data</span><span class="o">=</span><span class="n">plan_data</span>
        <span class="p">)</span>
        <span class="n">plan</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">plan</span>

    <span class="k">def</span> <span class="nf">delete_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;plans/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">delete_wire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wire</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;wires/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wire</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>

<div class="viewcode-block" id="UtilityInterface.replan"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.replan">[docs]</a>    <span class="k">def</span> <span class="nf">replan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Copies a plan</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s1">&#39;plans/replan/</span><span class="si">{plan_id}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plan_id</span><span class="o">=</span><span class="n">plan_id</span><span class="p">))</span>
        <span class="n">plan_copy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Plan</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">plan_copy</span></div>

    <span class="k">def</span> <span class="nf">start_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s1">&#39;krill/start?job=</span><span class="si">{job_id}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>

<div class="viewcode-block" id="UtilityInterface.batch_operations"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.batch_operations">[docs]</a>    <span class="k">def</span> <span class="nf">batch_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_ids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Batches operations from a list of operation_ids</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;operations/batch&#39;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">operation_ids</span><span class="p">)</span></div>

<div class="viewcode-block" id="UtilityInterface.unbatch_operations"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.unbatch_operations">[docs]</a>    <span class="k">def</span> <span class="nf">unbatch_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_ids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unbatches operations from a list of operation_ids</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;operations/batch&#39;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">operation_ids</span><span class="p">)</span></div>

<div class="viewcode-block" id="UtilityInterface.set_operation_status"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.set_operation_status">[docs]</a>    <span class="k">def</span> <span class="nf">set_operation_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_id</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets an operation&#39;s status</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;operations/</span><span class="si">{oid}</span><span class="s1">/status/</span><span class="si">{status}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">oid</span><span class="o">=</span><span class="n">operation_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="UtilityInterface.job_debug"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.job_debug">[docs]</a>    <span class="k">def</span> <span class="nf">job_debug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs debug on a job with id=job_id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;krill/debug/</span><span class="si">{jid}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jid</span><span class="o">=</span><span class="n">job_id</span><span class="p">))</span></div>

<div class="viewcode-block" id="UtilityInterface.submit_plan"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.submit_plan">[docs]</a>    <span class="k">def</span> <span class="nf">submit_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">budget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Submits a plan</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_query</span> <span class="o">=</span> <span class="s2">&quot;&amp;user_id=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">budget_query</span> <span class="o">=</span> <span class="s2">&quot;?budget_id=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">budget</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;plans/start/&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span>
                                 <span class="n">budget_query</span> <span class="o">+</span> <span class="n">user_query</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="UtilityInterface.update_code"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.update_code">[docs]</a>    <span class="k">def</span> <span class="nf">update_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates code for a operation_type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">controller</span> <span class="o">=</span> <span class="n">underscore</span><span class="p">(</span>
            <span class="n">pluralize</span><span class="p">(</span><span class="n">code</span><span class="o">.</span><span class="n">parent_class</span><span class="p">))</span>

        <span class="n">code_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">code</span><span class="o">.</span><span class="n">parent_id</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">code</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">code</span><span class="o">.</span><span class="n">content</span>
        <span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url_build</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">),</span> <span class="n">code_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">code</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="n">code</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;parent_id&quot;</span><span class="p">]</span>
            <span class="n">code</span><span class="o">.</span><span class="n">updated_at</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;updated_at&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TridentRequestError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to update code object </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code_data</span><span class="p">),</span> <span class="n">result</span><span class="p">)</span></div>

<div class="viewcode-block" id="UtilityInterface.compatible_items"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.UtilityInterface.compatible_items">[docs]</a>    <span class="k">def</span> <span class="nf">compatible_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample_id</span><span class="p">,</span> <span class="n">object_type_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find items compatible with the field value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;json/items&quot;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s2">&quot;sid&quot;</span><span class="p">:</span> <span class="n">sample_id</span><span class="p">,</span>
            <span class="s2">&quot;oid&quot;</span><span class="p">:</span> <span class="n">object_type_id</span>
        <span class="p">})</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">items</span></div>

    <span class="c1"># TODO: fix delete association</span>
    <span class="k">def</span> <span class="nf">delete_data_association</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">association</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;DataAssociation&quot;</span><span class="p">,</span>
                <span class="s2">&quot;record_methods&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s2">&quot;record_getters&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">association</span><span class="o">.</span><span class="n">dump</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;json/delete&quot;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">create_data_association</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_inst</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">upload</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">upload_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">upload</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">upload_id</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">id</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;DataAssociation&quot;</span><span class="p">,</span>
                <span class="s2">&quot;record_methods&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s2">&quot;record_getters&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="n">model_inst</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">),</span>
            <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">):</span> <span class="n">value</span><span class="p">}),</span>
            <span class="s2">&quot;parent_class&quot;</span><span class="p">:</span> <span class="n">model_inst</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="s2">&quot;upload_id&quot;</span><span class="p">:</span> <span class="n">upload_id</span>
        <span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;json/save&quot;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="n">data_association</span> <span class="o">=</span> <span class="n">model_inst</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">DataAssociation</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="n">model_inst</span><span class="o">.</span><span class="n">data_associations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_association</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data_association</span>

    <span class="k">def</span> <span class="nf">create_upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">upload</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">upload</span><span class="o">.</span><span class="n">file</span>
        <span class="p">}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="s2">&quot;krill/upload?job=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">upload</span><span class="o">.</span><span class="n">job_id</span><span class="p">),</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
        <span class="n">upload</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">upload</span></div>


<div class="viewcode-block" id="ModelInterface"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface">[docs]</a><span class="k">class</span> <span class="nc">ModelInterface</span><span class="p">(</span><span class="n">SessionInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes requests using AqHTTP that are model specific.</span>
<span class="sd">    Establishes a connection between a session object and an Aquarium model.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">aqhttp</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">aqhttp</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">ModelRegistry</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">model_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Alias for self.model.__name__</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span>

<div class="viewcode-block" id="ModelInterface._post_json"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface._post_json">[docs]</a>    <span class="k">def</span> <span class="nf">_post_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Posts a json request to session for this interface.</span>
<span class="sd">        Attaches raw json and this session instance to the models it retrieves.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">}</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merge_methods</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
        <span class="n">data_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">post_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
                <span class="s1">&#39;json&#39;</span><span class="p">,</span>
                <span class="n">json_data</span><span class="o">=</span><span class="n">data_dict</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">TridentRequestError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">strerror</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">422</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">raise</span> <span class="n">err</span>

        <span class="k">if</span> <span class="n">post_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">post_response</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModelInterface.load"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">post_response</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads model instance(s) from data.</span>
<span class="sd">        Model instances will be of class defined by self.model.</span>
<span class="sd">        If data is a list, will return a list of model instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">many</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">post_response</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">models</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">post_response</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="n">many</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">many</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">post_response</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">models</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
                <span class="n">model</span><span class="o">.</span><span class="n">connect_to_session</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">models</span><span class="o">.</span><span class="n">connect_to_session</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">models</span></div>

<div class="viewcode-block" id="ModelInterface.get"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a generic get request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqhttp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">TridentRequestError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">strerror</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">raise</span> <span class="n">err</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_merge_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s1">&#39;methods&#39;</span><span class="p">):</span>
            <span class="n">new_query</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
            <span class="n">new_query</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;methods&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">methods</span><span class="p">})</span>
            <span class="k">return</span> <span class="n">new_query</span>
        <span class="k">return</span> <span class="n">query</span>

<div class="viewcode-block" id="ModelInterface.find"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds model by id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_json</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">model_id</span><span class="p">},</span> <span class="p">)</span></div>

<div class="viewcode-block" id="ModelInterface.find_by_name"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.find_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">find_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds model by name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_json</span><span class="p">({</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;find_by_name&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">name</span><span class="p">]})</span></div>

<div class="viewcode-block" id="ModelInterface.array_query"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.array_query">[docs]</a>    <span class="k">def</span> <span class="nf">array_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">rest</span><span class="p">,</span> <span class="n">opts</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds models based on a query</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">opts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;reverse&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
        <span class="n">options</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">opts</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                 <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                 <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="n">args</span><span class="p">,</span>
                 <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">options</span><span class="p">}</span>
        <span class="n">query</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rest</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_json</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="ModelInterface.all"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.all">[docs]</a>    <span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rest</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opts</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds all models</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rest</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rest</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">opts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;reverse&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
        <span class="n">options</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">opts</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_query</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="n">rest</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModelInterface.where"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.where">[docs]</a>    <span class="k">def</span> <span class="nf">where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">criteria</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opts</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds models based on criteria</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rest</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">methods</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rest</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;methods&quot;</span><span class="p">:</span> <span class="n">methods</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">opts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;reverse&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
        <span class="n">options</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">opts</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_query</span><span class="p">(</span><span class="s2">&quot;where&quot;</span><span class="p">,</span> <span class="n">criteria</span><span class="p">,</span> <span class="n">rest</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span></div>

    <span class="c1"># TODO: implement &#39;patch&#39; or &#39;update&#39;? Would this be too dangerous?</span>
    <span class="c1"># def patch(self, model_id, json_data):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Makes a patch or update from json_data</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     models_name = pluralize(underscore(self.model_name))</span>
    <span class="c1">#     result = self.aqhttp.put(&#39;{models}/{model_id}&#39;.format(</span>
    <span class="c1">#         model_id=model_id, models=models_name), json_data=json_data)</span>
    <span class="c1">#     return result</span>

<div class="viewcode-block" id="ModelInterface.new"><a class="viewcode-back" href="../../developer/_autosummary/pydent.interfaces.html#pydent.interfaces.ModelInterface.new">[docs]</a>    <span class="k">def</span> <span class="nf">new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new model instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">connect_to_session</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instance</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Trident 0.0.33a documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, University of Washington.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.0.
    </div>
  </body>
</html>