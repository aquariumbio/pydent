<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pydent.aqhttp &#8212; Trident 0.0.8 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Trident 0.0.8 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="sidebar-subtitle">
    <a href="../../index.html">
        <h1>Trident (V0.0.8)</h1>
    </a>
</p>

<p>
    Trident is a python scripting API wrapper for Aquarium. With Trident,
    you can create python scripts and apps that mine data, create samples,
    submit laboratory protocols, and more. You are looking at documentation
    for version 0.0.8.
</p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for pydent.aqhttp</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Request class for making raw http requests to Aquarium</span>

<span class="sd">This module contains the AqHTTP class, which can make arbitrary post/put/get</span>
<span class="sd">requests to Aquarium and returns JSON data.</span>

<span class="sd">Generally, Trident users should be unable to make arbitrary requests using this</span>
<span class="sd">class.</span>
<span class="sd">Users should only access these methods indirectly through a ``Session`` or</span>
<span class="sd">``SessionInterface`` instance.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">from</span> <span class="nn">pydent.exceptions</span> <span class="k">import</span> <span class="n">TridentRequestError</span><span class="p">,</span> <span class="n">TridentLoginError</span><span class="p">,</span> <span class="n">TridentTimeoutError</span><span class="p">,</span> <span class="n">TridentJSONDataIncomplete</span>
<span class="kn">from</span> <span class="nn">pydent.utils</span> <span class="k">import</span> <span class="n">url_build</span>


<span class="c1"># TODO: Replace request history with save_attr in models?</span>
<div class="viewcode-block" id="AqHTTP"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP">[docs]</a><span class="k">class</span> <span class="nc">AqHTTP</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines a session/connection to Aquarium.</span>
<span class="sd">    Makes HTTP requests to Aquarium and returns JSON.</span>

<span class="sd">    This class should be obscured from Trident user so that users cannot make</span>
<span class="sd">    arbitrary requests to an Aquarium server and get sensitive information</span>
<span class="sd">    (e.g. User json that is returned contains api_key, password_digest, etc.)</span>
<span class="sd">    or make damaging posts.</span>
<span class="sd">    Instead, a SessionInterface should be the object that makes these requests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">TIMEOUT</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">aquarium_url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes an aquarium session with login, password, server combination</span>

<span class="sd">        :param login: Aquarium login</span>
<span class="sd">        :type login: str</span>
<span class="sd">        :param aquarium_url: aquarium url to the server</span>
<span class="sd">        :type aquarium_url: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">login</span> <span class="o">=</span> <span class="n">login</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span> <span class="o">=</span> <span class="n">aquarium_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">TIMEOUT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_login</span><span class="p">(</span><span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_history</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="AqHTTP.create_session_json"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP.create_session_json">[docs]</a>    <span class="k">def</span> <span class="nf">create_session_json</span><span class="p">(</span><span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Formats login information for aquarium&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;session&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;login&quot;</span><span class="p">:</span> <span class="n">login</span><span class="p">,</span>
                <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span>
            <span class="p">}</span>
        <span class="p">}</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An alias of aquarium_url&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span>

<div class="viewcode-block" id="AqHTTP._login"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP._login">[docs]</a>    <span class="k">def</span> <span class="nf">_login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Login to aquarium and saves header as a requests.Session()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">session_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">create_session_json</span><span class="p">(</span><span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url_build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span><span class="p">,</span> <span class="s2">&quot;sessions.json&quot;</span><span class="p">),</span>
                                <span class="n">json</span><span class="o">=</span><span class="n">session_data</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">MissingSchema</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TridentLoginError</span><span class="p">(</span><span class="s2">&quot;Aquairum URL </span><span class="si">{0}</span><span class="s2"> incorrectly formatted. </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">ConnectTimeout</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TridentTimeoutError</span><span class="p">(</span><span class="s2">&quot;Aquarium took too long to respond during login. Make sure &quot;</span>
                                      <span class="s2">&quot;the url </span><span class="si">{}</span><span class="s2"> is correct. Alternatively, use Session.set_timeout&quot;</span>
                                      <span class="s2">&quot; to increase the request timeout.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span><span class="p">))</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">headers</span>
        <span class="k">if</span> <span class="s1">&#39;set-cookie&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TridentLoginError</span><span class="p">(</span>
                <span class="s2">&quot;Could not find proper login header for Aquarium.&quot;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cookie&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">fix_remember_token</span><span class="p">(</span>
            <span class="n">res</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;set-cookie&quot;</span><span class="p">])}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="AqHTTP.fix_remember_token"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP.fix_remember_token">[docs]</a>    <span class="k">def</span> <span class="nf">fix_remember_token</span><span class="p">(</span><span class="n">header</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Fixes the Aquarium specific remember token &quot;&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
        <span class="n">rtok</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
            <span class="n">cparts</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;remember_token&#39;</span><span class="p">,</span> <span class="n">cparts</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">rtok</span> <span class="o">=</span> <span class="n">cparts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="s2">&quot;remember_token=&quot;</span> <span class="o">+</span> <span class="n">rtok</span> <span class="o">+</span> <span class="s2">&quot;; &quot;</span> <span class="o">+</span> <span class="n">header</span></div>

<div class="viewcode-block" id="AqHTTP.clear_history"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP.clear_history">[docs]</a>    <span class="k">def</span> <span class="nf">clear_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clears the request history.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_history</span> <span class="o">=</span> <span class="p">{}</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_serialize_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
            <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="n">body</span>
        <span class="p">},</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="AqHTTP.request"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP.request">[docs]</a>    <span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get_from_history_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a http request.</span>

<span class="sd">        :param method: request method (e.g. &#39;put&#39;, &#39;post&#39;, &#39;get&#39;, etc.)</span>
<span class="sd">        :type method: str</span>
<span class="sd">        :param path: url to perform the request</span>
<span class="sd">        :type path: str</span>
<span class="sd">        :param timeout: time in seconds to process request before raising</span>
<span class="sd">                exception</span>
<span class="sd">        :type timeout: int</span>
<span class="sd">        :param get_from_history_ok: whether its ok to return previously found</span>
<span class="sd">                request from history (default=False)</span>
<span class="sd">        :type get_from_history_ok: boolean</span>
<span class="sd">        :param allow_none: if False (default), will raise error if json_data</span>
<span class="sd">                contains a None or null value</span>
<span class="sd">        :type allow_none: boolean</span>
<span class="sd">        :param kwargs: additional arguments to post to request</span>
<span class="sd">        :type kwargs: dict</span>
<span class="sd">        :return: json</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">allow_none</span> <span class="ow">and</span> <span class="s1">&#39;json&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_disallow_null_in_json</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">])</span>

        <span class="c1"># serialize request</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">url_build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s1">&#39;json&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">]</span>

        <span class="c1"># get result from history (if ok) otherwise, make a http request; save result to history</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serialize_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">get_from_history_ok</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_history</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requests_session</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span>
                                                    <span class="n">url_build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span>
                                                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                                                    <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request_history</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request_to_json</span><span class="p">(</span><span class="n">result</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="AqHTTP._request_to_json"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP._request_to_json">[docs]</a>    <span class="k">def</span> <span class="nf">_request_to_json</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Turns :class:`requests.Request` instance into a json.</span>
<span class="sd">        Raises custom exception if not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result_json</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TridentRequestError</span><span class="p">(</span>
                <span class="s2">&quot;&lt;StatusCode: </span><span class="si">{code}</span><span class="s2"> (</span><span class="si">{reason}</span><span class="s2">)&gt; &quot;</span>
                <span class="s2">&quot;Response is not JSON formatted. &quot;</span>
                <span class="s2">&quot;Trident may not be properly connected to the server. &quot;</span>
                <span class="s2">&quot;Verify login credentials.</span><span class="se">\n</span><span class="s2">Content:</span><span class="se">\n</span><span class="si">{content}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span>
                                                                        <span class="n">content</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
        <span class="k">if</span> <span class="s2">&quot;errors&quot;</span> <span class="ow">in</span> <span class="n">result_json</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">errors</span><span class="p">,</span> <span class="s1">&#39;__len__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TridentRequestError</span><span class="p">(</span>
                    <span class="s2">&quot;Request: </span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">result_json</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">])</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">result_json</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="AqHTTP._disallow_null_in_json"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP._disallow_null_in_json">[docs]</a>    <span class="k">def</span> <span class="nf">_disallow_null_in_json</span><span class="p">(</span><span class="n">json_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Raises :class:pydent.exceptions.TridentJSONDataIncomplete exception if</span>
<span class="sd">        json data being sent contains a null value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">json_data</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">TridentJSONDataIncomplete</span><span class="p">(</span>
                <span class="s2">&quot;JSON data </span><span class="si">{}</span><span class="s2"> contains a null value.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">json_data</span><span class="p">))</span></div>

<div class="viewcode-block" id="AqHTTP.post"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get_from_history_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make a post request to the session</span>

<span class="sd">        :param path: url</span>
<span class="sd">        :type path: str</span>
<span class="sd">        :param json_data: json_data to post</span>
<span class="sd">        :type json_data: dict</span>
<span class="sd">        :param timeout: time in seconds to process request before raising</span>
<span class="sd">                exception</span>
<span class="sd">        :type timeout: int</span>
<span class="sd">        :param get_from_history_ok: whether its ok to return previously found</span>
<span class="sd">                request from history (default=False)</span>
<span class="sd">        :type get_from_history_ok: boolean</span>
<span class="sd">        :param allow_none: if False, throw error if json_data contains a null</span>
<span class="sd">                or None value</span>
<span class="sd">        :type allow_none: boolean</span>
<span class="sd">        :param kwargs: additional arguments to post to request</span>
<span class="sd">        :type kwargs: dict</span>
<span class="sd">        :return: json</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">json_data</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                            <span class="n">get_from_history_ok</span><span class="o">=</span><span class="n">get_from_history_ok</span><span class="p">,</span>
                            <span class="n">allow_none</span><span class="o">=</span><span class="n">allow_none</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="AqHTTP.put"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP.put">[docs]</a>    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get_from_history_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make a put request to the session</span>

<span class="sd">        :param path: url</span>
<span class="sd">        :type path: str</span>
<span class="sd">        :param json_data: json_data to post</span>
<span class="sd">        :type json_data: dict</span>
<span class="sd">        :param timeout: time in seconds to process request before raising</span>
<span class="sd">                exception</span>
<span class="sd">        :type timeout: int</span>
<span class="sd">        :param get_from_history_ok: whether its ok to return previously found</span>
<span class="sd">                request from history (default=False)</span>
<span class="sd">        :type get_from_history_ok: boolean</span>
<span class="sd">        :param allow_none: if False, throw error if json_data contains a null or</span>
<span class="sd">                None value</span>
<span class="sd">        :type allow_none: boolean</span>
<span class="sd">        :param kwargs: additional arguments to post to request</span>
<span class="sd">        :type kwargs: dict</span>
<span class="sd">        :return: json</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;put&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">json_data</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                            <span class="n">get_from_history_ok</span><span class="o">=</span><span class="n">get_from_history_ok</span><span class="p">,</span>
                            <span class="n">allow_none</span><span class="o">=</span><span class="n">allow_none</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="AqHTTP.get"><a class="viewcode-back" href="../../developer/_autosummary/pydent.aqhttp.html#pydent.aqhttp.AqHTTP.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get_from_history_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make a get request to the session</span>

<span class="sd">        :param path: url</span>
<span class="sd">        :type path: str</span>
<span class="sd">        :param timeout: time in seconds to process request before raising</span>
<span class="sd">                exception</span>
<span class="sd">        :type timeout: int</span>
<span class="sd">        :param get_from_history_ok: whether its ok to return previously found</span>
<span class="sd">                request from history (default=False)</span>
<span class="sd">        :type get_from_history_ok: boolean</span>
<span class="sd">        :param allow_none: if False, throw error if json_data contains a null or</span>
<span class="sd">                None value</span>
<span class="sd">        :type allow_none: boolean</span>
<span class="sd">        :param kwargs: additional arguments to post to request</span>
<span class="sd">        :type kwargs: dict</span>
<span class="sd">        :return: json</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                            <span class="n">get_from_history_ok</span><span class="o">=</span><span class="n">get_from_history_ok</span><span class="p">,</span>
                            <span class="n">allow_none</span><span class="o">=</span><span class="n">allow_none</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aquarium_url</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Trident 0.0.8 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, University of Washington.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>