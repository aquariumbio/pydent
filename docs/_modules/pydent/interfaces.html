<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pydent.interfaces &#8212; pydent 0.1.5a10 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/style.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>
    


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          Trident</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1.5a10</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Trident <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../aqsession.html">Session (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.aqsession</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../aqsession.html#user-objects">User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.AqSession.html">pydent.aqsession.AqSession</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.Browser.html">pydent.aqsession.Browser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../aqsession.html#non-user-objects">Non-User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.SessionABC.html">pydent.aqsession.SessionABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.aqsession.AqHTTP.html">pydent.aqsession.AqHTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../aqsession.html#interfaces">Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">Models (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.models</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#model-classes">Model Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#operations">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#plans">Plans</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#inventory">Inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#data-and-io">Data and IO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#user">User</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#model-mixins">Model Mixins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.CreateMixin.html">pydent.models.crud_mixin.CreateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.DeleteMixin.html">pydent.models.crud_mixin.DeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.JSONDeleteMixin.html">pydent.models.crud_mixin.JSONDeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.JSONSaveMixin.html">pydent.models.crud_mixin.JSONSaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.SaveMixin.html">pydent.models.crud_mixin.SaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.crud_mixin.UpdateMixin.html">pydent.models.crud_mixin.UpdateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.data_associations.DataAssociatorMixin.html">pydent.models.data_associations.DataAssociatorMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.field_value_mixins.FieldMixin.html">pydent.models.field_value_mixins.FieldMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.field_value_mixins.FieldTypeInterface.html">pydent.models.field_value_mixins.FieldTypeInterface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.models.field_value_mixins.FieldValueInterface.html">pydent.models.field_value_mixins.FieldValueInterface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#field-relationships">Field Relationships</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.BaseRelationship.html">pydent.relationships.BaseRelationship</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.BaseRelationshipAccessor.html">pydent.relationships.BaseRelationshipAccessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.Function.html">pydent.relationships.Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasMany.html">pydent.relationships.HasMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasManyGeneric.html">pydent.relationships.HasManyGeneric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasManyThrough.html">pydent.relationships.HasManyThrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasOne.html">pydent.relationships.HasOne</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.HasOneFromMany.html">pydent.relationships.HasOneFromMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.JSON.html">pydent.relationships.JSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.Many.html">pydent.relationships.Many</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.One.html">pydent.relationships.One</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.relationships.Raw.html">pydent.relationships.Raw</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../models.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../models.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.add_schema.html">pydent.marshaller.add_schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../planner.html">Planner (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.planner</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../planner.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.planner.Planner.html">pydent.planner.Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.planner.PlannerLayout.html">pydent.planner.PlannerLayout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../planner.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.planner.PlannerException.html">pydent.planner.PlannerException</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../exceptions.html">Exceptions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.exceptions</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../marshaller.html">Serialization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.marshaller</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.SchemaModel.html">pydent.marshaller.SchemaModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.ModelRegistry.html">pydent.marshaller.ModelRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.SchemaRegistry.html">pydent.marshaller.SchemaRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.descriptors.html">pydent.marshaller.descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.exceptions.html">pydent.marshaller.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/pydent.marshaller.utils.html">pydent.marshaller.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../marshaller.html#fields">Fields</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Alias.html">pydent.marshaller.fields.Alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Callback.html">pydent.marshaller.fields.Callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Field.html">pydent.marshaller.fields.Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.FieldABC.html">pydent.marshaller.fields.FieldABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Nested.html">pydent.marshaller.fields.Nested</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/pydent.marshaller.fields.Relationship.html">pydent.marshaller.fields.Relationship</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../basics/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#logging-into-a-session">Logging into a session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#making-queries">Making queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#relationship-queries">Relationship Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#creating-inventory">Creating inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/installation.html">Installing Trident</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/installation.html#installation-for-developers">Installation for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/planning.html">Experiment Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/querying.html">Making Queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#basic-browsing">Basic Browsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#browser-scope">Browser Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#relationship-browsing">Relationship Browsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../basics/querying.html#avoid-using-too-many-queries-n-1-problem">Avoid using too many queries (N+1 problem)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basics/querying.html#the-browser-cache">The Browser Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#logging-requests">Logging Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#asynchrounous-requests">Asynchrounous Requests</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/topics.html">Advanced topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/caching.html">Structured queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/caching.html#speeding-up-queries">Speeding up queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../advanced/caching.html#temporary-sessions">Temporary Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced/caching.html#optimized-queries">Optimized queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/planner_tutorial.html">Planner tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/contributing.html#running-tests">Running Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#server-vs-local-tests">Server vs local tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/contributing.html#installing-dependencies">Installing dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#manual-release">Manual release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/versions.html">pydent change log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a10">0.1.5a10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a9">0.1.5a9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a8">0.1.5a8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a6">0.1.5a6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a5">0.1.5a5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a4">0.1.5a4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a3">0.1.5a3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a2">0.1.5a2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a1">0.1.5a1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a">0.1.5a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#id1">0.1.4a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#id2">0.1.3a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#id3">0.1.2a</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/versions.html#major-changes">Major changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/versions.html#minor-changes">Minor changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../basics/installation.html">Installing Trident</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/installation.html#installation-for-developers">Installation for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#logging-into-a-session">Logging into a session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#making-queries">Making queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#relationship-queries">Relationship Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/getting_started.html#creating-inventory">Creating inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/querying.html">Making Queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#basic-browsing">Basic Browsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#browser-scope">Browser Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#relationship-browsing">Relationship Browsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../basics/querying.html#avoid-using-too-many-queries-n-1-problem">Avoid using too many queries (N+1 problem)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basics/querying.html#the-browser-cache">The Browser Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#logging-requests">Logging Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/querying.html#asynchrounous-requests">Asynchrounous Requests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/planning.html">Experiment Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/contributing.html#running-tests">Running Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#server-vs-local-tests">Server vs local tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/contributing.html#installing-dependencies">Installing dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/contributing.html#manual-release">Manual release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/topics.html">Advanced topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/caching.html">Structured queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/caching.html#speeding-up-queries">Speeding up queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../advanced/caching.html#temporary-sessions">Temporary Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced/caching.html#optimized-queries">Optimized queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/planner_tutorial.html">Planner tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/versions.html">pydent change log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a10">0.1.5a10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a9">0.1.5a9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a8">0.1.5a8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a6">0.1.5a6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a5">0.1.5a5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a4">0.1.5a4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a3">0.1.5a3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a2">0.1.5a2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a1">0.1.5a1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#a">0.1.5a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#id1">0.1.4a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#id2">0.1.3a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/versions.html#id3">0.1.2a</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/versions.html#major-changes">Major changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/versions.html#minor-changes">Minor changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <h1>Source code for pydent.interfaces</h1><div class="highlight"><pre>
<span></span>&quot;&quot;&quot;Session interfaces for interacting with Aquarium.

Session interfaces are created by an AqSession instance and use an AqHTTP
instance to make http requests to Aquarium.

Generally, Trident users should be unable to directly access AqHTTP method to
prevent potentially damaging requests or revealing sensitive information.
Session interfaces define a particular way an AqHTTP is used.

Interfaces are roughly grouped into:

(1) ModelInterface - for finding and retrieving Aquarium models and information
(2) CreateInterface - for creating new objects (e.g. new Samples) in Aquarium
(3) UpdateInterface - for updating objects in Aquarium

Example:
    session1 = AqSession(login, password, aquarium_url)
    session1.User
    # =&gt; a ModelInterface instance

    session1.User.find(1)
    # use model interface with User to find User(id=1)

    session1.aqhttp.post(...)
    # not allowed

    session1.create
    # =&gt; a CreateInterface

    session1.create.samples(list_of_samples)
    # creates samples from a list by calling method CreateInterface.samples
&quot;&quot;&quot;
import json
from abc import ABC
from abc import abstractmethod
from typing import List
from typing import Union

from inflection import pluralize
from inflection import underscore

from .exceptions import TridentRequestError
from .utils import url_build
from pydent.marshaller.registry import ModelRegistry


<div class="viewcode-block" id="SessionInterface"><a class="viewcode-back" href="../../generated/pydent.interfaces.SessionInterface.html#pydent.browser.SessionInterface">[docs]</a>class SessionInterface:
    &quot;&quot;&quot;Generic session interface.

    Trident users should only be able to make requests through a
    SessionInterface to avoid making arbitrary and potentially damaging
    http requests.
    &quot;&quot;&quot;

    __slots__ = [&quot;aqhttp&quot;, &quot;session&quot;]

<div class="viewcode-block" id="SessionInterface.__init__"><a class="viewcode-back" href="../../generated/pydent.interfaces.SessionInterface.html#pydent.browser.SessionInterface.__init__">[docs]</a>    def __init__(self, aqhttp, session):
        &quot;&quot;&quot;Initializer for SessionInterface.

        :param aqhttp: aqhttp instance for this interface
        :type aqhttp: AqHTTP
        :param session: session instance for this interface
        :type session: AqSession
        &quot;&quot;&quot;
        self.aqhttp = aqhttp
        self.session = session</div></div>


<div class="viewcode-block" id="CRUDInterface"><a class="viewcode-back" href="../../generated/pydent.interfaces.CRUDInterface.html#pydent.browser.CRUDInterface">[docs]</a>class CRUDInterface(SessionInterface):
    &quot;&quot;&quot;Create, Update, Delete interface.

    Methods for communicating with Aquarium&#39;s JSON controller.
    &quot;&quot;&quot;

    __slots__ = [&quot;aqhttp&quot;, &quot;session&quot;]

    # def _validate_model_id(self, model):
    #     if not hasattr(model, &#39;id&#39;) or model.id is None:
    #         raise TridentRequestError(&quot;Model {} has no id.&quot;.format(model))

<div class="viewcode-block" id="CRUDInterface._model_controller"><a class="viewcode-back" href="../../generated/pydent.interfaces.CRUDInterface.html#pydent.browser.CRUDInterface._model_controller">[docs]</a>    def _model_controller(
        self,
        method: str,
        table: str,
        model_id: Union[str, int, None],
        data: Union[None, dict],
        params=None,
    ) -&gt; dict:
        &quot;&quot;&quot;Method for create, updating, and deleting models.

        :param method: Request method name (one of &#39;put&#39;, &#39;post&#39;, &#39;delete&#39;
        :param table: Table name of model (e.g. &#39;samples&#39; or &#39;data_associations&#39;)
        :param model_id: Optional model_id (not required for &#39;post&#39;)
        :param data: data
        :param params
        :return: json formatted server response
        :rtype: dict
        &quot;&quot;&quot;
        if model_id:
            url = &quot;{}/{}.json&quot;.format(table, model_id)
        else:
            url = &quot;{}.json&quot;.format(table)

        result = self.aqhttp.request(method, url, json=data, params=params)
        return result</div>

    def model_create(self, table, data, params=None):
        return self._model_controller(&quot;post&quot;, table, None, data, params)

    def model_update(self, table, model_id, data, params=None):
        return self._model_controller(&quot;put&quot;, table, model_id, data, params)

    def model_delete(self, table, model_id, params=None):
        if model_id is None:
            return
        return self._model_controller(&quot;delete&quot;, table, model_id, None, params)

<div class="viewcode-block" id="CRUDInterface._json_controller"><a class="viewcode-back" href="../../generated/pydent.interfaces.CRUDInterface.html#pydent.browser.CRUDInterface._json_controller">[docs]</a>    def _json_controller(
        self,
        method,
        model_name,
        model_data,
        record_methods: List[str] = None,
        record_getters: List[str] = None,
    ):
        &quot;&quot;&quot;Method for create, updating, and deleting models using Aquariums
        JSON controller.

        :param method: Method name (e.g. &quot;save&quot;, &quot;delete&quot;)
        :type method: basestring
        :param model_name: Model name
        :type model_name: basestring
        :param model_data: Additional model and method data
        :type model_data: dict
        :param record_methods: Optional &#39;record_methods&#39; key
        :type record_methods: dict
        :param record_getters: Optional &#39;record_getters&#39; key
        :type record_getters: dict
        :return: json formatter response
        :rtype: basestring
        &quot;&quot;&quot;

        if record_methods is None:
            record_methods = {}
        if record_getters is None:
            record_getters = {}

        data = {
            &quot;model&quot;: {
                &quot;model&quot;: model_name,
                &quot;record_methods&quot;: record_methods,
                &quot;record_getters&quot;: record_getters,
            }
        }

        if model_data:
            data.update(model_data)

        if method:
            url = &quot;json/&quot; + method
        else:
            url = &quot;json&quot;

        try:
            post_response = self.aqhttp.post(url, json_data=data)
            return post_response
        except TridentRequestError as err:
            raise err</div>

        # TODO: is this code necessary?
        # result = self.aqhttp.post(&quot;json&quot; + method, json_data=data)
        # return result

    def json_delete(
        self,
        model_name,
        model_data,
        record_methods: List[str] = None,
        record_getters: List[str] = None,
    ):
        return self._json_controller(
            &quot;delete&quot;, model_name, model_data, record_methods, record_getters
        )

    def json_save(
        self,
        model_name,
        model_data,
        record_methods: List[str] = None,
        record_getters: List[str] = None,
    ) -&gt; dict:
        return self._json_controller(
            &quot;save&quot;, model_name, model_data, record_methods, record_getters
        )

    def json_post(
        self,
        model_name,
        model_data,
        record_methods: List[str] = None,
        record_getters: List[str] = None,
    ):
        return self._json_controller(
            None, model_name, model_data, record_methods, record_getters
        )</div>


<div class="viewcode-block" id="UtilityInterface"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface">[docs]</a>class UtilityInterface(CRUDInterface):
    &quot;&quot;&quot;Miscellaneous and specialized requests for creating, updating, etc.&quot;&quot;&quot;

    __slots__ = [&quot;aqhttp&quot;, &quot;session&quot;]

    ##############################
    # Create
    ##############################

    # TODO: have ability to save new properties
    def create_samples(self, samples):
        json_data = [s.dump(include=(&quot;field_values&quot;,)) for s in samples]

        updated_sample_data = self.aqhttp.post(
            &quot;browser/create_samples&quot;, {&quot;samples&quot;: json_data}
        )
        updated_samples = updated_sample_data[&quot;samples&quot;]
        assert len(samples) == len(updated_samples)
        for s, data in zip(samples, updated_samples):
            s.reload(data)
        return samples

    def create_items(self, items):
        return [
            self.aqhttp.get(&quot;items/make/{}/{}&quot;.format(i.sample.id, i.object_type.id))
            for i in items
        ]

    def create_upload(self, upload):
        files = {&quot;file&quot;: upload.file}
        result = self.aqhttp.post(
            &quot;krill/upload?job={}&quot;.format(upload.job_id), files=files
        )
        upload.reload(result)
        return upload

    def create_data_association(self, model_inst, key, value, upload=None):
        upload_id = None
        if not model_inst.id:
            raise ValueError(
                &quot;Cannot create DataAssociation because model has no id (&quot;
                &quot;it probably is not saved on the server)&quot;
            )
        if upload is not None:
            upload_id = upload.id
        data = {
            &quot;parent_id&quot;: model_inst.id,
            &quot;key&quot;: str(key),
            &quot;object&quot;: json.dumps({str(key): value}),
            &quot;parent_class&quot;: model_inst.__class__.__name__,
            &quot;upload_id&quot;: upload_id,
        }
        result = self.json_save(&quot;DataAssociation&quot;, data)

        data_association = model_inst.session.DataAssociation.find(result[&quot;id&quot;])
        if data_association.id not in [da.id for da in model_inst.data_associations]:
            model_inst.data_associations.append(data_association)
            return data_association
        else:
            for da in model_inst.data_associations:
                if da.id == data_association.id:
                    return da

    ##############################
    # Save/Update
    ##############################

<div class="viewcode-block" id="UtilityInterface.update_code"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.update_code">[docs]</a>    def update_code(self, code):
        &quot;&quot;&quot;Updates code for a operation_type.&quot;&quot;&quot;
        controller = underscore(pluralize(code.parent_class))

        code_data = {&quot;id&quot;: code.parent_id, &quot;name&quot;: code.name, &quot;content&quot;: code.content}
        result = self.aqhttp.post(url_build(controller, &quot;code&quot;), code_data)
        if &quot;id&quot; in result:
            code.id = result[&quot;id&quot;]
            code.parent_id = result[&quot;parent_id&quot;]
            code.updated_at = result[&quot;updated_at&quot;]
        else:
            raise TridentRequestError(
                &quot;Unable to update code object {}&quot;.format(code_data), result
            )</div>

    ##############################
    # Misc
    ##############################

<div class="viewcode-block" id="UtilityInterface.estimate_plan_cost"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.estimate_plan_cost">[docs]</a>    def estimate_plan_cost(self, plan):
        &quot;&quot;&quot;Estimates the plan cost.&quot;&quot;&quot;
        result = self.aqhttp.post(&quot;launcher/estimate&quot;, {&quot;id&quot;: plan.id})
        total = 0
        for operation in plan.operations:
            for cost in result[&quot;costs&quot;]:
                if cost[&quot;id&quot;] == operation.id:
                    operation.cost = cost
                    total += (
                        cost[&quot;labor&quot;] * cost[&quot;labor_rate&quot;] + cost[&quot;materials&quot;]
                    ) * cost[&quot;markup_rate&quot;]
        return total</div>

    def step_plan(self, plan_id):
        self.aqhttp.get(&quot;operations/step?plan_id={}&quot;.format(plan_id))
        return None

<div class="viewcode-block" id="UtilityInterface.replan"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.replan">[docs]</a>    def replan(self, plan_id):
        &quot;&quot;&quot;Copies a plan.&quot;&quot;&quot;
        result = self.aqhttp.get(&quot;plans/replan/{plan_id}&quot;.format(plan_id=plan_id))
        plan_copy = self.session.Plan.load(result)
        return plan_copy</div>

    def start_job(self, job_id):
        result = self.aqhttp.get(&quot;krill/start?job={job_id}&quot;.format(job_id=job_id))
        return result

<div class="viewcode-block" id="UtilityInterface.batch_operations"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.batch_operations">[docs]</a>    def batch_operations(self, operation_ids):
        &quot;&quot;&quot;Batches operations from a list of operation_ids.&quot;&quot;&quot;
        self.aqhttp.post(&quot;operations/batch&quot;, json_data=operation_ids)</div>

<div class="viewcode-block" id="UtilityInterface.unbatch_operations"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.unbatch_operations">[docs]</a>    def unbatch_operations(self, operation_ids):
        &quot;&quot;&quot;Unbatches operations from a list of operation_ids.&quot;&quot;&quot;
        self.aqhttp.post(&quot;operations/batch&quot;, json_data=operation_ids)</div>

<div class="viewcode-block" id="UtilityInterface.set_operation_status"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.set_operation_status">[docs]</a>    def set_operation_status(self, operation_id, status):
        &quot;&quot;&quot;Sets an operation&#39;s status.&quot;&quot;&quot;
        msg = &quot;operations/{oid}/status/{status}&quot;.format(oid=operation_id, status=status)
        self.aqhttp.get(msg)</div>

<div class="viewcode-block" id="UtilityInterface.job_debug"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.job_debug">[docs]</a>    def job_debug(self, job_id):
        &quot;&quot;&quot;Runs debug on a job with id=job_id.&quot;&quot;&quot;
        self.aqhttp.get(&quot;krill/debug/{jid}&quot;.format(jid=job_id))</div>

<div class="viewcode-block" id="UtilityInterface.submit_plan"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.submit_plan">[docs]</a>    def submit_plan(self, plan, user, budget):
        &quot;&quot;&quot;Submits a plan.&quot;&quot;&quot;
        user_query = &quot;&amp;user_id=&quot; + str(user.id)
        budget_query = &quot;?budget_id=&quot; + str(budget.id)
        result = self.aqhttp.get(
            &quot;plans/start/&quot; + str(plan.id) + budget_query + user_query
        )
        return result</div>

<div class="viewcode-block" id="UtilityInterface.compatible_items"><a class="viewcode-back" href="../../generated/pydent.interfaces.UtilityInterface.html#pydent.browser.UtilityInterface.compatible_items">[docs]</a>    def compatible_items(self, sample_id, object_type_id):
        &quot;&quot;&quot;Find items compatible with the field value.&quot;&quot;&quot;
        result = self.aqhttp.post(
            &quot;json/items&quot;, {&quot;sid&quot;: sample_id, &quot;oid&quot;: object_type_id}
        )
        items = []
        for element in result:
            print(element)
        return items</div></div>


<div class="viewcode-block" id="QueryInterfaceABC"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterfaceABC.html#pydent.browser.QueryInterfaceABC">[docs]</a>class QueryInterfaceABC(ABC):
    &quot;&quot;&quot;Interface that is used by models to find other models.&quot;&quot;&quot;

    @abstractmethod
    def find(self, mid):
        pass

    @abstractmethod
    def find_by_name(self, name):
        pass

    @abstractmethod
    def all(self):
        pass

    @abstractmethod
    def where(self, query, **kwargs):
        pass

    @abstractmethod
    def first(self):
        pass

    @abstractmethod
    def last(self):
        pass

    @abstractmethod
    def one(self):
        pass

<div class="viewcode-block" id="QueryInterfaceABC.model_name"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterfaceABC.html#pydent.browser.QueryInterfaceABC.model_name">[docs]</a>    @abstractmethod
    def model_name(self):
        &quot;&quot;&quot;Alias for self.model.__name__&quot;&quot;&quot;
        pass</div></div>


<div class="viewcode-block" id="QueryInterface"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface">[docs]</a>class QueryInterface(SessionInterface, QueryInterfaceABC):
    &quot;&quot;&quot;Makes requests using AqHTTP that are model specific.

    Establishes a connection between a session object and an Aquarium
    model.
    &quot;&quot;&quot;

    __slots__ = [&quot;aqhttp&quot;, &quot;session&quot;, &quot;model&quot;, &quot;__dict__&quot;]
    MERGE = &quot;query_hook&quot;
    DEFAULT_OFFSET = -1
    DEFAULT_REVERSE = False
    DEFAULT_LIMIT = -1

<div class="viewcode-block" id="QueryInterface.__init__"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.__init__">[docs]</a>    def __init__(self, model_name, aqhttp, session):
        &quot;&quot;&quot;Instantiates a new model interface. Uses aqhttp to make requests,
        and deserializes response to models.

        :param model_name: Model name (e.g. &#39;Sample&#39; or &#39;FieldValue&#39;)
        :type model_name: basestring
        :param aqhttp: the AqHTTP instance
        :type aqhttp: AqHTTP
        :param session:
        :type session:
        &quot;&quot;&quot;
        super().__init__(aqhttp, session)
        self.crud = CRUDInterface(aqhttp, session)
        self.model = ModelRegistry.get_model(model_name)
        self._do_load = True</div>

    @property
    def model_name(self):
        return self.model.__name__

<div class="viewcode-block" id="QueryInterface._prepost_query_hook"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface._prepost_query_hook">[docs]</a>    def _prepost_query_hook(self, query):
        &quot;&quot;&quot;Method for modifying the query before posting.&quot;&quot;&quot;

        additional_query = {}
        if hasattr(self.model, self.MERGE):
            additional_query = getattr(self.model, self.MERGE)

        # update and merge
        for k, v in additional_query.items():
            if k not in query:
                query[k] = v
            elif isinstance(query[k], list):
                if isinstance(v, list):
                    query[k] += v
                else:
                    query[k].append(v)
            elif isinstance(query[k], dict):
                if isinstance(v, dict):
                    query[k].update(v)
                else:
                    raise ValueError(
                        &quot;Cannot update query {} with {}:{}&quot;.format(query, k, v)
                    )
        return query</div>

<div class="viewcode-block" id="QueryInterface._post_json"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface._post_json">[docs]</a>    def _post_json(self, data):
        &quot;&quot;&quot;Posts a json request to session for this interface.

        Attaches raw json and this session instance to the models it
        retrieves.
        &quot;&quot;&quot;
        data_dict = {&quot;model&quot;: self.model_name}
        data_dict = self._prepost_query_hook(data_dict)
        data_dict.update({k: v for k, v in data.items() if v})

        try:
            post_response = self.crud.json_post(self.model_name, data_dict)
        except TridentRequestError as err:
            if err.response.status_code == 422:
                return None
            else:
                raise err

        if post_response is not None and self._do_load:
            return self.load(post_response)
        return post_response</div>

<div class="viewcode-block" id="QueryInterface.load"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.load">[docs]</a>    def load(self, post_response):
        &quot;&quot;&quot;Loads model instance(s) from data.

        Model instances will be of class defined by self.model. If data
        is a list, will return a list of model instances.
        &quot;&quot;&quot;
        models = self.model.load_from(post_response, self.session)
        return models</div>

<div class="viewcode-block" id="QueryInterface.get"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.get">[docs]</a>    def get(self, path):
        &quot;&quot;&quot;Makes a generic get request.&quot;&quot;&quot;
        try:
            response = self.aqhttp.get(path)
        except TridentRequestError as err:
            if err.response.status_code == 404:
                return None
            raise err
        return self.load(response)</div>

<div class="viewcode-block" id="QueryInterface.find"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.find">[docs]</a>    def find(self, model_id, include=None, opts: dict = None):
        &quot;&quot;&quot;Finds model by id.&quot;&quot;&quot;
        if model_id is None:
            raise ValueError(&quot;model_id in &#39;find&#39; cannot be None&quot;)
        if model_id == 0:
            return None
        return self._post_json({&quot;id&quot;: model_id, &quot;include&quot;: include, &quot;options&quot;: opts})</div>

<div class="viewcode-block" id="QueryInterface.find_by_name"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.find_by_name">[docs]</a>    def find_by_name(self, name, include=None, opts: dict = None):
        &quot;&quot;&quot;Finds model by name.&quot;&quot;&quot;
        if name is None:
            raise ValueError(&quot;name in &#39;find_by_name&#39; cannot be None&quot;)
        if name.strip() == &quot;&quot;:
            return None
        return self._post_json(
            {
                &quot;method&quot;: &quot;find_by_name&quot;,
                &quot;arguments&quot;: [name],
                &quot;include&quot;: include,
                &quot;options&quot;: opts,
            }
        )</div>

<div class="viewcode-block" id="QueryInterface.array_query"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.array_query">[docs]</a>    def array_query(self, method, args, rest=None, include=None, opts: dict = None):
        &quot;&quot;&quot;Finds models based on a query.&quot;&quot;&quot;
        if opts is None:
            opts = {}
        options = {
            &quot;offset&quot;: self.DEFAULT_OFFSET,
            &quot;limit&quot;: self.DEFAULT_LIMIT,
            &quot;reverse&quot;: self.DEFAULT_REVERSE,
        }
        options.update(opts)
        if options.get(&quot;limit&quot;, None) == 0:
            return []
        if args is None:
            args = []
        query = {
            &quot;model&quot;: self.model.__name__,
            &quot;method&quot;: method,
            &quot;arguments&quot;: args,
            &quot;include&quot;: include,
            &quot;options&quot;: options,
        }
        if rest:
            query.update(rest)
        res = self._post_json(query)
        if res is None:
            return []
        return res</div>

<div class="viewcode-block" id="QueryInterface.all"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.all">[docs]</a>    def all(self, methods: List[str] = None, include=None, opts: dict = None):
        &quot;&quot;&quot;Finds all models.

        :param methods:
        :param include:
        :type include:
        :param opts: additional options (&quot;offset&quot;, &quot;limit&quot;, &quot;reverse&quot;, etc.)
        :type opts: dict
        :return:
        :rtype:
        &quot;&quot;&quot;

        if opts is None:
            opts = {}
        addopts = opts.pop(&quot;opts&quot;, dict())
        opts.update(addopts)
        options = {&quot;offset&quot;: self.DEFAULT_OFFSET, &quot;reverse&quot;: self.DEFAULT_REVERSE}
        options.update(opts)
        return self.array_query(
            method=&quot;all&quot;, args=None, rest=None, include=include, opts=options
        )</div>

<div class="viewcode-block" id="QueryInterface.where"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.where">[docs]</a>    def where(
        self,
        criteria: dict,
        methods: List[str] = None,
        include: List[str] = None,
        opts: dict = None,
    ):
        &quot;&quot;&quot;Performs a query for models.

        :param criteria: query to find models
        :type criteria: dict
        :param methods: server side methods to implement
        :type methods: list
        :param opts: additional options (&quot;offset&quot;, &quot;limit&quot;, &quot;reverse&quot;, etc.)
        :type opts: dict
        :param include:
        :return: list of models
        :rtype: list
        &quot;&quot;&quot;
        if opts is None:
            opts = dict()
        rest = {}
        if methods is not None:
            rest = {&quot;methods&quot;: methods}
        return self.array_query(
            method=&quot;where&quot;, args=criteria, rest=rest, include=include, opts=opts
        )</div>

    # TODO: Refactor &#39;last&#39; so query is an argument, not part of kwargs
<div class="viewcode-block" id="QueryInterface.last"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.last">[docs]</a>    def last(
        self, num: int = None, query: dict = None, include=None, opts: dict = None
    ):
        &quot;&quot;&quot;Find the last added models.

        :param num: number of models to return. If not provided, assumes 1
        :type num: int
        :param query: additional query to find models
        :type query: dict
        :param opts: additional options (&quot;offset&quot;, &quot;limit&quot;, &quot;reverse&quot;, etc.)
        :type opts: dict
        :return: list of models
        :rtype: list
        &quot;&quot;&quot;
        if query is None:
            query = dict()
        if num is None:
            num = 1
        if opts is None:
            opts = dict()
        opts.update(dict(limit=num, reverse=True))
        return self.where(query, include=include, opts=opts)</div>

    # TODO: Refactor &#39;first&#39; so query is an argument, not part of kwargs
<div class="viewcode-block" id="QueryInterface.first"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.first">[docs]</a>    def first(
        self, num: int = None, query: dict = None, include=None, opts: dict = None
    ):
        &quot;&quot;&quot;Find the first added models.

        :param num: number of models to return. If not provided, assumes 1
        :type num: int
        :param query: additional query to find models
        :type query: dict
        :param include:
        :param opts: additional options (&quot;offset&quot;, &quot;limit&quot;, &quot;reverse&quot;, etc.)
        :type opts: dict
        :return: list of models
        :rtype: list
        &quot;&quot;&quot;
        if query is None:
            query = dict()
        if num is None:
            num = 1
        if opts is None:
            opts = dict()
        opts.update(dict(limit=num, reverse=False))
        return self.where(query, include=include, opts=opts)</div>

    # TODO: Refactor &#39;one&#39; so query is an argument, not part of kwargs
<div class="viewcode-block" id="QueryInterface.one"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.one">[docs]</a>    def one(
        self, query: dict = None, first: bool = False, include=None, opts: dict = None
    ):
        &quot;&quot;&quot;Return one model. Returns the last model by default. Returns None if
        no model is found.

        :param first: whether to return the first model (default: False
        :type first: bool
        :return: model
        :rtype: ModelBase
        &quot;&quot;&quot;
        if not first:
            res = self.last(1, query=query, include=include, opts=opts)
        else:
            res = self.first(1, query=query, include=include, opts=opts)
        if not res:
            return None
        else:
            return res[0]</div>

    # TODO: implement &#39;patch&#39; or &#39;update&#39;? Would this be too dangerous?
    # def patch(self, model_id, json_data):
    #     &quot;&quot;&quot;
    #     Makes a patch or update from json_data
    #     &quot;&quot;&quot;
    #     models_name = pluralize(underscore(self.model_name))
    #     result = self.aqhttp.put(&#39;{models}/{model_id}&#39;.format(
    #         model_id=model_id, models=models_name), json_data=json_data)
    #     return result

<div class="viewcode-block" id="QueryInterface.new"><a class="viewcode-back" href="../../generated/pydent.interfaces.QueryInterface.html#pydent.browser.QueryInterface.new">[docs]</a>    def new(self, *args, **kwargs):
        &quot;&quot;&quot;Creates a new model instance.

        Attach a session by calling __new__ with session kwargs.
        &quot;&quot;&quot;
        instance = self.model.__new__(self.model, *args, session=self.session, **kwargs)
        self.model.__init__(instance, *args, **kwargs)
        return instance</div>

    def __call__(self, *args, **kwargs):
        return self.new(*args, **kwargs)</div>


<div class="viewcode-block" id="BrowserInterface"><a class="viewcode-back" href="../../generated/pydent.interfaces.BrowserInterface.html#pydent.browser.BrowserInterface">[docs]</a>class BrowserInterface(SessionInterface, QueryInterfaceABC):
    __slots__ = [&quot;aqhttp&quot;, &quot;session&quot;, &quot;model&quot;, &quot;__dict__&quot;]
    MERGE = [&quot;methods&quot;]
    DEFAULT_OFFSET = -1
    DEFAULT_REVERSE = False
    DEFAULT_LIMIT = -1

    # TODO: browser should use standard session
<div class="viewcode-block" id="BrowserInterface.__init__"><a class="viewcode-back" href="../../generated/pydent.interfaces.BrowserInterface.html#pydent.browser.BrowserInterface.__init__">[docs]</a>    def __init__(self, model_name, aqhttp, session):
        super().__init__(aqhttp, session)
        self.crud = CRUDInterface(aqhttp, session)
        self.model = ModelRegistry.get_model(model_name)
        self._do_load = True
        self._preload_field_values = None</div>

    @property
    def model_name(self):
        return self.model.__name__

    @property
    def browser(self):
        return self.session.browser

    def find(self, model_id):
        return self.browser.find(model_id, model_class=self.model_name)

    def find_by_name(self, name):
        return self.browser.find_by_name(name, model_class=self.model_name)

    def where(self, criteria, methods: List[str] = None, opts: bool = None):
        return self.browser.where(
            criteria, model_class=self.model_name, methods=methods, opts=opts
        )

    def one(self, query: dict = None, first: bool = False, opts: bool = None):
        return self.browser.one(model_class=self.model_name, query=query, opts=opts)

    def first(self, num: int = 1, query: dict = None, opts: bool = None):
        return self.browser.first(num, model_class=self.model_name, query=query)

    def last(self, num: int = 1, query: dict = None, opts: bool = None):
        return self.browser.last(num, model_class=self.model_name, query=query)

    def new(self, *args, **kwargs):
        instance = self.model.__new__(self.model, *args, session=self.session, **kwargs)
        self.model.__init__(instance, *args, **kwargs)
        self.browser.update_cache([instance])
        return instance

    def all(self, opts: bool = None):
        return self.browser.all(model_class=self.model_name, opts=opts)

    # TODO: load_from using new session
<div class="viewcode-block" id="BrowserInterface.load"><a class="viewcode-back" href="../../generated/pydent.interfaces.BrowserInterface.html#pydent.browser.BrowserInterface.load">[docs]</a>    def load(self, post_response: dict) -&gt; List[&quot;ModelBase&quot;]:
        &quot;&quot;&quot;Loads model instance(s) from data.

        Model instances will be of class defined by self.model. If data
        is a list, will return a list of model instances.
        &quot;&quot;&quot;
        models = self.model.load_from(post_response, self.session)
        return models</div></div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2019, University of Washington.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>