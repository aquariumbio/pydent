
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pydent.models &#8212; Trident 0.0.24 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Trident 0.0.24 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="sidebar-subtitle">
    <a href="../../index.html">
        <h1>Trident (V0.0.24)</h1>
    </a>
</p>

<p>
    Trident is a python scripting API wrapper for Aquarium. With Trident,
    you can create python scripts and apps that mine data, create samples,
    submit laboratory protocols, and more. You are looking at documentation
    for version 0.0.24.
</p>
<div>
    <a href="https://circleci.com/gh/klavinslab/trident/tree/master"><img src="https://circleci.com/gh/klavinslab/trident.svg?style=svg" alt="build status"></a>
    <a href="https://badge.fury.io/py/pydent"><img src="https://badge.fury.io/py/pydent.svg" alt="PyPI version" height="18"></a>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for pydent.models</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Aquarium models</span>

<span class="sd">This module contains a set of classes for various various Aquarium objects.</span>
<span class="sd">Trident models inherit the ModelBase class and have a model schema</span>
<span class="sd">(generated by ``@add_schema``) that handles the JSON loading and dumping.</span>

<span class="sd">By default, Trident models capture ALL JSON attribute/values and sets</span>
<span class="sd">the attributes of the resultant object.</span>

<span class="sd">.. code-block:: python</span>

<span class="sd">    u = User.load({&quot;id&quot;: 1, &quot;login&quot;: &quot;John&quot;})</span>
<span class="sd">    u.login    # =&gt; &quot;John&quot;</span>
<span class="sd">    u.id       # =&gt; 1</span>

<span class="sd">Fields and field options are added as class variables in the model class</span>
<span class="sd">definition.</span>
<span class="sd">The various field options and their default values are listed below.</span>

<span class="sd">.. code-block:: python</span>

<span class="sd">        load_all = True     # load all data attributes defined for a model</span>
<span class="sd">        strict = True       # throw error during marshalling</span>
<span class="sd">        include = {}        # fields to include for serialization</span>
<span class="sd">        additional = ()     # explicit fields for serialization</span>
<span class="sd">        ignore = ()         # fields to filter during deserialization.</span>
<span class="sd">        load_only = ()      # fields to include during serialization</span>
<span class="sd">        dump_only = ()      # fields to include during deserialization</span>

<span class="sd">Trident models can also have nested relationships (for example, a Sample may</span>
<span class="sd">possess a single SampleType while a SampleType may possess several Samples).</span>
<span class="sd">These relationships can be specified in the class definition along with the</span>
<span class="sd">field options above, as in:</span>

<span class="sd">.. code-block:: python</span>

<span class="sd">    @add_schema</span>
<span class="sd">    class SampleType(Base):</span>
<span class="sd">        samples = fields.Nested(&quot;Sample&quot;, many=True)</span>

<span class="sd">In many cases, the model contains only a reference to the nested relationship,</span>
<span class="sd">in this case, special fields One and Many may be used to define this</span>
<span class="sd">relationship.</span>
<span class="sd">When called as an attribute, Trident will automatically use the session</span>
<span class="sd">connection with Aquarium to retrieve the given model.</span>

<span class="sd">For example, the following will define that SampleType has many Samples.</span>
<span class="sd">When .samples is called on a SampleType instance, Trident will use the database</span>
<span class="sd">to retrieve all samples that have a sample_type_id equal to the id of the</span>
<span class="sd">SampleType:</span>

<span class="sd">.. code-block:: python</span>

<span class="sd">    @add_schema</span>
<span class="sd">    class SampleType(Base):</span>
<span class="sd">        samples = Many(&quot;Sample&quot;,</span>
<span class="sd">            params={&quot;sample_type_id&quot;: lambda self: self.id})</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pydent.base</span> <span class="k">import</span> <span class="n">ModelBase</span>
<span class="kn">from</span> <span class="nn">pydent.exceptions</span> <span class="k">import</span> <span class="n">AquariumModelError</span>
<span class="kn">from</span> <span class="nn">pydent.marshaller</span> <span class="k">import</span> <span class="n">add_schema</span><span class="p">,</span> <span class="n">fields</span>
<span class="kn">from</span> <span class="nn">pydent.relationships</span> <span class="k">import</span> <span class="p">(</span><span class="n">One</span><span class="p">,</span> <span class="n">Many</span><span class="p">,</span> <span class="n">HasOne</span><span class="p">,</span> <span class="n">HasMany</span><span class="p">,</span>
                                  <span class="n">HasManyThrough</span><span class="p">,</span> <span class="n">HasManyGeneric</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pydent.utils</span> <span class="k">import</span> <span class="n">magiclist</span><span class="p">,</span> <span class="n">filter_list</span>
<span class="kn">from</span> <span class="nn">pydent.utils.plan_validator</span> <span class="k">import</span> <span class="n">PlanValidator</span>
<span class="kn">from</span> <span class="nn">pydent.utils.async_requests</span> <span class="k">import</span> <span class="n">make_async</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Account&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AllowableFieldType&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Budget&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Code&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Collection&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DataAssociation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;FieldType&quot;</span><span class="p">,</span>
    <span class="s2">&quot;FieldValue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Group&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Invoice&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Item&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Job&quot;</span><span class="p">,</span>
    <span class="s2">&quot;JobAssociation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Library&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Membership&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ObjectType&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Operation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;OperationType&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Plan&quot;</span><span class="p">,</span>
    <span class="s2">&quot;PlanAssociation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Sample&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SampleType&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Upload&quot;</span><span class="p">,</span>
    <span class="s2">&quot;User&quot;</span><span class="p">,</span>
    <span class="s2">&quot;UserBudgetAssociation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Wire&quot;</span>
<span class="p">]</span>


<span class="c1"># Mix-ins</span>

<span class="k">class</span> <span class="nc">HasCodeMixin</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Access to latest code for OperationType, Library, etc.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the code from an OperationType or Library</span>

<span class="sd">        :param name: accessor name for the code.</span>
<span class="sd">            &quot;source&quot; for Library or &quot;protocol&quot;, &quot;precondition&quot;, &quot;cost_model&quot;,</span>
<span class="sd">            or &quot;documentation&quot; for OperationType</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: the code model</span>
<span class="sd">        :rtype: Code</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">codes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">codes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">]</span>
        <span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">codes</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span>
            <span class="n">c</span><span class="p">,</span> <span class="s2">&quot;child_id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">c</span><span class="o">.</span><span class="n">child_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">codes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_code_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callback for returning code members for OperationType or Library</span>

<span class="sd">        :param model_name: the model_name, expected &quot;Code&quot;</span>
<span class="sd">        :type model_name: str</span>
<span class="sd">        :param name: accessor name for the code.</span>
<span class="sd">            &quot;source&quot; for Library or &quot;protocol&quot;, &quot;precondition&quot;, &quot;cost_model&quot;,</span>
<span class="sd">            or &quot;documentation&quot; for OperationType</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: the code model</span>
<span class="sd">        :rtype: Code</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s2">&quot;Code&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span>
                <span class="s2">&quot;Model name must be </span><span class="si">{}</span><span class="s2">, not </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">,</span> <span class="n">model_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">FieldMixin</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mixin for finding FieldType and FieldValue relationships</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">find_field_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callback for finding operation_type or sample_type.</span>
<span class="sd">        If parent_class does not match the expected nested model name</span>
<span class="sd">        (OperationType or SampleType), callback will return None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_class</span><span class="p">:</span>
            <span class="c1"># weird, but helps with refactoring this mixin</span>
            <span class="n">fxn_name</span> <span class="o">=</span> <span class="n">ModelBase</span><span class="o">.</span><span class="n">find_callback</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">fxn</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fxn_name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">fxn</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">model_id</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DataAssociatorMixin</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mixin for handling data associations</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">associate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a data association with the key and value to this object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span>
        <span class="n">aqhttp</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">_AqSession__aqhttp</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">DataAssociation</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s2">&quot;record_methods&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s2">&quot;record_getters&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">),</span>
            <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">):</span> <span class="n">value</span><span class="p">}),</span>
            <span class="s2">&quot;parent_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">aqhttp</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;json/save&quot;</span><span class="p">,</span> <span class="n">json_data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">DataAssociation</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>


<span class="c1"># Models #####</span>

<div class="viewcode-block" id="Account"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Account">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Account</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Account model&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="AllowableFieldType"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.AllowableFieldType">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">AllowableFieldType</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A AllowableFieldType model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">field_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;FieldType&quot;</span><span class="p">),</span>
        <span class="n">object_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;ObjectType&quot;</span><span class="p">),</span>
        <span class="n">sample_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;SampleType&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">object_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_type_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_type_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_type_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_model_attribute</span><span class="p">(</span><span class="n">field_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_model_attribute</span><span class="p">(</span><span class="n">object_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_model_attribute</span><span class="p">(</span><span class="n">sample_type</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>


<div class="viewcode-block" id="Budget"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Budget">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Budget</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Budget model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">user_budget_associations</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;UserBudgetAssociation&quot;</span><span class="p">,</span> <span class="s2">&quot;Budget&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="Code"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Code">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Code</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Code model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">user</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">),</span>
        <span class="n">operation_type</span><span class="o">=</span><span class="n">One</span><span class="p">(</span>
            <span class="s2">&quot;OperationType&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_parent&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
        <span class="n">library</span><span class="o">=</span><span class="n">One</span><span class="p">(</span><span class="s2">&quot;Library&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_parent&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_class</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">parent_class</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_class</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">model_interface</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_class</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># since they may not always be tied to specific parent</span>
        <span class="c1"># controllers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">update_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Collection"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Collection">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Collection</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">DataAssociatorMixin</span><span class="p">):</span>  <span class="c1"># pylint: disable=too-few-public-methods</span>
    <span class="sd">&quot;&quot;&quot;A Collection model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">object_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;ObjectType&quot;</span><span class="p">),</span>
        <span class="n">data_associations</span><span class="o">=</span><span class="n">HasManyGeneric</span><span class="p">(</span><span class="s2">&quot;DataAssociation&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="DataAssociation"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.DataAssociation">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">DataAssociation</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A DataAssociation model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="nb">object</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">JSON</span><span class="p">(),</span>
        <span class="n">upload</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Upload&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="FieldType"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.FieldType">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">FieldType</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">FieldMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A FieldType model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">allowable_field_types</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;AllowableFieldType&quot;</span><span class="p">,</span> <span class="s2">&quot;FieldType&quot;</span><span class="p">),</span>
        <span class="n">operation_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span>
            <span class="s2">&quot;OperationType&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;find_field_parent&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;parent_id&quot;</span><span class="p">),</span>
        <span class="n">sample_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span>
            <span class="s2">&quot;SampleType&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;find_field_parent&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;parent_id&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ftype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">array</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">operation_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">preferred_field_type_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">preferred_operation_type_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">routing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">role</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_class</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">sample_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">aft_stype_and_objtype</span><span class="o">=</span><span class="p">(),</span>
                 <span class="n">allowable_field_types</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">operation_type</span> <span class="ow">and</span> <span class="n">sample_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">operation_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parent_id</span> <span class="o">=</span> <span class="n">operation_type</span><span class="o">.</span><span class="n">id</span>
            <span class="n">parent_class</span> <span class="o">=</span> <span class="s2">&quot;OperationType&quot;</span>
        <span class="k">if</span> <span class="n">sample_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parent_id</span> <span class="o">=</span> <span class="n">sample_type</span><span class="o">.</span><span class="n">id</span>
            <span class="n">parent_class</span> <span class="o">=</span> <span class="s2">&quot;SampleType&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ftype</span> <span class="o">=</span> <span class="n">ftype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">parent_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_class</span> <span class="o">=</span> <span class="n">parent_class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferred_operation_type_id</span> <span class="o">=</span> <span class="n">preferred_operation_type_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferred_field_type_id</span> <span class="o">=</span> <span class="n">preferred_field_type_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="n">required</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">routing</span> <span class="o">=</span> <span class="n">routing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="n">array</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="n">choices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">role</span> <span class="o">=</span> <span class="n">role</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span> <span class="o">=</span> <span class="n">allowable_field_types</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">aft_stype_and_objtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">smple_type</span><span class="p">,</span> <span class="n">obj_type</span> <span class="ow">in</span> <span class="n">aft_stype_and_objtype</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">create_allowable_field_type</span><span class="p">(</span><span class="n">smple_type</span><span class="p">,</span> <span class="n">obj_type</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ftype</span> <span class="o">!=</span> <span class="s2">&quot;sample&quot;</span>

    <span class="k">def</span> <span class="nf">get_allowable_field_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">afts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span>
        <span class="k">if</span> <span class="n">afts</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">afts</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">afts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span>
        <span class="k">return</span> <span class="n">afts</span>

    <span class="k">def</span> <span class="nf">create_allowable_field_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">object_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">afts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span><span class="p">:</span>
            <span class="n">afts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span>
        <span class="n">field_type</span> <span class="o">=</span> <span class="n">AllowableFieldType</span><span class="p">(</span>
            <span class="n">field_type</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample_type</span><span class="o">=</span><span class="n">sample_type</span><span class="p">,</span> <span class="n">object_type</span><span class="o">=</span><span class="n">object_type</span><span class="p">)</span>
        <span class="n">afts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span> <span class="o">=</span> <span class="n">afts</span>
        <span class="k">return</span> <span class="n">field_type</span>

<div class="viewcode-block" id="FieldType.initialize_field_value"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.FieldType.initialize_field_value">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_field_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates or initializes a new :class:`FieldValue` from this FieldType</span>

<span class="sd">        :param field_value: optional FieldValue to update with this FieldType</span>
<span class="sd">        :type field_value: FieldValue</span>
<span class="sd">        :return: updated FieldValue</span>
<span class="sd">        :rtype: FieldValue</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_value</span><span class="p">:</span>
            <span class="n">field_value</span> <span class="o">=</span> <span class="n">FieldValue</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span><span class="p">:</span>
            <span class="n">field_value</span><span class="o">.</span><span class="n">allowable_field_type_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
            <span class="n">field_value</span><span class="o">.</span><span class="n">allowable_field_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">field_value</span></div></div>


<div class="viewcode-block" id="FieldValue"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.FieldValue">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">FieldValue</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">FieldMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A FieldValue model. One of the more complex models.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="c1"># FieldValue relationships</span>
        <span class="n">field_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;FieldType&quot;</span><span class="p">),</span>
        <span class="n">allowable_field_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;AllowableFieldType&quot;</span><span class="p">),</span>
        <span class="n">array</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">Function</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fv</span><span class="p">:</span> <span class="n">fv</span><span class="o">.</span><span class="n">array</span><span class="p">),</span>
        <span class="n">item</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Item&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;child_item_id&quot;</span><span class="p">),</span>
        <span class="n">sample</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Sample&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;child_sample_id&quot;</span><span class="p">),</span>
        <span class="n">operation</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span>
            <span class="s2">&quot;Operation&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;find_field_parent&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;parent_id&quot;</span><span class="p">),</span>
        <span class="n">parent_sample</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span>
            <span class="s2">&quot;Sample&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;find_field_parent&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;parent_id&quot;</span><span class="p">),</span>
        <span class="n">wires_as_source</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Wire&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;from_id&quot;</span><span class="p">),</span>
        <span class="n">wires_as_dest</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Wire&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;to_id&quot;</span><span class="p">),</span>
        <span class="n">successors</span><span class="o">=</span><span class="n">HasManyThrough</span><span class="p">(</span><span class="s2">&quot;Operation&quot;</span><span class="p">,</span> <span class="s2">&quot;Wire&quot;</span><span class="p">),</span>
        <span class="n">sid</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">Function</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fv</span><span class="p">:</span> <span class="n">fv</span><span class="o">.</span><span class="n">sid</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">ignore</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;object_type&#39;</span><span class="p">,)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_class</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">field_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :param value:</span>
<span class="sd">        :type value:</span>
<span class="sd">        :param sample:</span>
<span class="sd">        :type sample:</span>
<span class="sd">        :param container:</span>
<span class="sd">        :type container:</span>
<span class="sd">        :param item:</span>
<span class="sd">        :type item:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">row</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">role</span> <span class="o">=</span> <span class="n">role</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent_class</span> <span class="o">=</span> <span class="n">parent_class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">parent_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># only if parent_class == &quot;Operation&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_sample</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># only if parent_class == &quot;Sample&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sample</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child_sample_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child_item_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_type_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_type_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># object_type is not included in the deserialization/serialization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_type</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">field_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_field_type</span><span class="p">(</span><span class="n">field_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">value</span><span class="p">,</span> <span class="n">sample</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">container</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_helper</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
                             <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="o">.</span><span class="n">array</span>
        <span class="k">if</span> <span class="n">arr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">arr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">identifier</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">outgoing_wires</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Alias of &#39;wires_as_source&#39;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires_as_source</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">incoming_wires</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Alias of &#39;wires_as_dest&#39;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires_as_dest</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">successors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires_as_source</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">destination</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires_as_source</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">predecessors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires_as_dest</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">source</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires_as_dest</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_item_id</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot; item: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">child_item_id</span><span class="p">)</span> <span class="o">+</span> \
                       <span class="s2">&quot; in </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">object_type</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_set_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">and</span> <span class="n">container</span> <span class="ow">and</span> <span class="n">item</span><span class="o">.</span><span class="n">object_type_id</span> <span class="o">!=</span> <span class="n">container</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span>
                <span class="s2">&quot;Item </span><span class="si">{}</span><span class="s2"> is not in container </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">container</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">item</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">child_item_id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object_type</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">object_type</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sample</span><span class="p">:</span>
                <span class="n">sample</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">sample</span>
        <span class="k">if</span> <span class="n">sample</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sample</span> <span class="o">=</span> <span class="n">sample</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">child_sample_id</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">id</span>
        <span class="k">if</span> <span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object_type</span> <span class="o">=</span> <span class="n">container</span>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_helper</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
                         <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;Sets the value of a &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">sample</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="n">item</span><span class="p">]):</span>
            <span class="n">afts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="o">.</span><span class="n">allowable_field_types</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">afts</span> <span class="o">=</span> <span class="n">filter_list</span><span class="p">(</span>
                    <span class="n">afts</span><span class="p">,</span> <span class="n">sample_type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">sample_type_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">afts</span> <span class="o">=</span> <span class="n">filter_list</span><span class="p">(</span><span class="n">afts</span><span class="p">,</span> <span class="n">object_type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">object_type</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">afts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">available_afts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="o">.</span><span class="n">allowable_field_types</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No allowable field types found for </span><span class="si">{}</span><span class="s2"> &#39;</span><span class="si">{}</span><span class="s2">&#39;.&quot;</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot; Available afts: </span><span class="si">{}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">available_afts</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">afts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;More than one AllowableFieldType found that matches </span><span class="si">{}</span><span class="s2">&quot;</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">only</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">),</span> <span class="n">partial</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">afts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_allowable_field_type</span><span class="p">(</span><span class="n">afts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No allowable field type found for </span><span class="si">{}</span><span class="s2"> &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span>
                <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span>
                    <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">set_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_class</span> <span class="o">=</span> <span class="s2">&quot;Operation&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="n">operation</span>

<div class="viewcode-block" id="FieldValue.set_field_type"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.FieldValue.set_field_type">[docs]</a>    <span class="k">def</span> <span class="nf">set_field_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets properties from a field_type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">=</span> <span class="n">field_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_type_id</span> <span class="o">=</span> <span class="n">field_type</span><span class="o">.</span><span class="n">id</span></div>

    <span class="k">def</span> <span class="nf">set_allowable_field_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowable_field_type</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_type</span> <span class="o">=</span> <span class="n">allowable_field_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_type_id</span> <span class="o">=</span> <span class="n">allowable_field_type</span><span class="o">.</span><span class="n">id</span>

<div class="viewcode-block" id="FieldValue.choose_item"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.FieldValue.choose_item">[docs]</a>    <span class="k">def</span> <span class="nf">choose_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the item associated with the field value&quot;&quot;&quot;</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">first</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compatible_items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">item</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="FieldValue.compatible_items"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.FieldValue.compatible_items">[docs]</a>    <span class="k">def</span> <span class="nf">compatible_items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find items compatible with the field value&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">compatible_items</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">allowable_field_type</span><span class="o">.</span><span class="n">object_type_id</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Group"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Group">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Group model&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="Invoice"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Invoice">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Invoice</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Invoice model&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="Item"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Item">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">DataAssociatorMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Item model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">sample</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Sample&quot;</span><span class="p">),</span>
        <span class="n">object_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;ObjectType&quot;</span><span class="p">),</span>
        <span class="n">data_associations</span><span class="o">=</span><span class="n">HasManyGeneric</span><span class="p">(</span><span class="s2">&quot;DataAssociation&quot;</span><span class="p">),</span>
        <span class="n">data</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">object_type_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_id</span> <span class="o">=</span> <span class="n">sample_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_type_id</span> <span class="o">=</span> <span class="n">object_type_id</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

<div class="viewcode-block" id="Item.make"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Item.make">[docs]</a>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the Item on the Aquarium server. Requires</span>
<span class="sd">        this Item to be connected to a session.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_items</span><span class="p">([</span><span class="bp">self</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;item&quot;</span><span class="p">])</span></div>

<div class="viewcode-block" id="Item.save"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Item.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A synonym for `make`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Job"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Job">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Job</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Job model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">job_associations</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;JobAssociation&quot;</span><span class="p">,</span> <span class="s2">&quot;Job&quot;</span><span class="p">),</span>
        <span class="n">operations</span><span class="o">=</span><span class="n">HasManyThrough</span><span class="p">(</span><span class="s2">&quot;Operation&quot;</span><span class="p">,</span> <span class="s2">&quot;JobAssociation&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uploads</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">http</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_AqSession__aqhttp</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;krill/uploads?job=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))[</span><span class="s1">&#39;uploads&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="JobAssociation"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.JobAssociation">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">JobAssociation</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A JobAssociation model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">job</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Job&quot;</span><span class="p">),</span>
        <span class="n">operation</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Operation&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="Library"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Library">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Library</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">HasCodeMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Library model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">codes</span><span class="o">=</span><span class="n">HasManyGeneric</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">),</span>
        <span class="n">source</span><span class="o">=</span><span class="n">One</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_code_callback&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="Membership"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Membership">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Membership</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">user</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">),</span>
        <span class="n">group</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Group&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="ObjectType"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.ObjectType">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">ObjectType</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A ObjectType model&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ObjectType.save"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.ObjectType.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the Object Type to the Aquarium server. Requires</span>
<span class="sd">        this Object Type to be connected to a session.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_object_type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="Operation"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Operation</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">DataAssociatorMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Operation model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">field_values</span><span class="o">=</span><span class="n">HasManyGeneric</span><span class="p">(</span><span class="s2">&quot;FieldValue&quot;</span><span class="p">),</span>
        <span class="n">data_associations</span><span class="o">=</span><span class="n">HasManyGeneric</span><span class="p">(</span><span class="s2">&quot;DataAssociation&quot;</span><span class="p">),</span>
        <span class="n">operation_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;OperationType&quot;</span><span class="p">),</span>
        <span class="n">job_associations</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;JobAssociation&quot;</span><span class="p">,</span> <span class="s2">&quot;Operation&quot;</span><span class="p">),</span>
        <span class="n">jobs</span><span class="o">=</span><span class="n">HasManyThrough</span><span class="p">(</span><span class="s2">&quot;Job&quot;</span><span class="p">,</span> <span class="s2">&quot;JobAssociation&quot;</span><span class="p">),</span>
        <span class="n">routing</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">Function</span><span class="p">(</span><span class="k">lambda</span> <span class="n">op</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">routing</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">plan_associations</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;PlanAssociation&quot;</span><span class="p">,</span> <span class="s2">&quot;Operation&quot;</span><span class="p">),</span>
        <span class="n">plans</span><span class="o">=</span><span class="n">HasManyThrough</span><span class="p">(</span><span class="s2">&quot;Plan&quot;</span><span class="p">,</span> <span class="s2">&quot;PlanAssociation&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_type_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operation_type_id</span> <span class="o">=</span> <span class="n">operation_type_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;planning&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">routing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">routing_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">fvs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span>
        <span class="n">ot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span>
        <span class="k">if</span> <span class="n">ot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">routing_dict</span>
        <span class="k">for</span> <span class="n">ft</span> <span class="ow">in</span> <span class="n">ot</span><span class="o">.</span><span class="n">field_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ft</span><span class="o">.</span><span class="n">routing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">routing_dict</span><span class="p">[</span><span class="n">ft</span><span class="o">.</span><span class="n">routing</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">fvs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">fv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="p">:</span>
                <span class="n">ft</span> <span class="o">=</span> <span class="n">fv</span><span class="o">.</span><span class="n">field_type</span>
                <span class="k">if</span> <span class="n">ft</span><span class="o">.</span><span class="n">routing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">routing_dict</span><span class="p">[</span><span class="n">ft</span><span class="o">.</span><span class="n">routing</span><span class="p">]</span> <span class="o">=</span> <span class="n">fv</span><span class="o">.</span><span class="n">sid</span>
        <span class="k">return</span> <span class="n">routing_dict</span>

<div class="viewcode-block" id="Operation.init_field_values"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.init_field_values">[docs]</a>    <span class="k">def</span> <span class="nf">init_field_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the :class:`FieldValue` from the :class:`FieldType` of the</span>
<span class="sd">        parent :class:`Operation` type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">field_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">field_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_type</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_to_field_value_array</span><span class="p">(</span><span class="n">field_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">field_type</span><span class="o">.</span><span class="n">role</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_field_value</span><span class="p">(</span><span class="n">field_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">field_type</span><span class="o">.</span><span class="n">role</span><span class="p">)</span></div>
            <span class="c1"># self.show()</span>

<div class="viewcode-block" id="Operation.field_value_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.field_value_array">[docs]</a>    <span class="k">def</span> <span class="nf">field_value_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns :class:`FieldValue` array with name and role.&quot;&quot;&quot;</span>
        <span class="n">ft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">field_type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ft</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;FieldValue is not an array for the field value of operation&quot;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">{}</span><span class="s2">(id=</span><span class="si">{}</span><span class="s2">).</span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">filter_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.field_value"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.field_value">[docs]</a>    <span class="k">def</span> <span class="nf">field_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns :class:`FieldValue` with name and role.</span>
<span class="sd">        Return None if not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="p">:</span>
            <span class="n">fvs</span> <span class="o">=</span> <span class="n">filter_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fvs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fvs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">fvs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;More than one FieldValue found for the field value&quot;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot; of operation </span><span class="si">{}</span><span class="s2">(id=</span><span class="si">{}</span><span class="s2">).</span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="Operation.set_field_value_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.set_field_value_array">[docs]</a>    <span class="k">def</span> <span class="nf">set_field_value_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets :class:`FieldValue` array using values. Values should be a list of</span>
<span class="sd">        dictionaries containing sample, item, container, or values keys.</span>
<span class="sd">        When setting values to items/samples/containers, the</span>
<span class="sd">        item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldType/FieldValues being modified</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param role: role of the FieldType/FieldValue being modified</span>
<span class="sd">                (&quot;input&quot; or &quot;output&quot;)</span>
<span class="sd">        :type role: string</span>
<span class="sd">        :param values: list of dictionary of values to set</span>
<span class="sd">                (e.g. [{&quot;sample&quot;: mysample}, {&quot;item&quot;: myitem}])</span>
<span class="sd">        :type values: list</span>
<span class="sd">        :return: the list of modified FieldValues</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">field_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_value_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>

        <span class="c1"># get the field type</span>
        <span class="n">field_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">field_type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No FieldType found for OperationType </span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_values</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Cannot set_field_value_array.&quot;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot; Length of values must equal length of field_values&quot;</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span>
                <span class="n">msg</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">fv</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">field_values</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
            <span class="n">fv</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="o">**</span><span class="n">val</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">field_values</span></div>

<div class="viewcode-block" id="Operation.add_to_field_value_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.add_to_field_value_array">[docs]</a>    <span class="k">def</span> <span class="nf">add_to_field_value_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates and adds a new :class:`FieldValue`. When setting values to</span>
<span class="sd">        items/samples/containers, the item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldType/FieldValue</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param role: role of the FieldValue (&quot;input&quot; or &quot;output&quot;)</span>
<span class="sd">        :type role: string</span>
<span class="sd">        :param sample: an existing Sample</span>
<span class="sd">        :type sample: Sample</span>
<span class="sd">        :param item: an existing Item</span>
<span class="sd">        :type item: Item</span>
<span class="sd">        :param value: a string or number value</span>
<span class="sd">        :type value: string|integer</span>
<span class="sd">        :param container: an existing ObjectType</span>
<span class="sd">        :type container: ObjectType</span>
<span class="sd">        :return: the newly created FieldValue</span>
<span class="sd">        :rtype: FieldValue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">field_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">field_type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
        <span class="n">fv</span> <span class="o">=</span> <span class="n">field_type</span><span class="o">.</span><span class="n">initialize_field_value</span><span class="p">()</span>
        <span class="n">fv</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
                     <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">)</span>
        <span class="n">fv</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fv</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fv</span></div>

<div class="viewcode-block" id="Operation.set_field_value"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.set_field_value">[docs]</a>    <span class="k">def</span> <span class="nf">set_field_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the a :class:`FieldValue` to a value. When setting values to</span>
<span class="sd">        items/samples/containers, the item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldValue/FieldType</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param role: role of the FieldValue (&quot;input&quot; or &quot;output&quot;)</span>
<span class="sd">        :type role: string</span>
<span class="sd">        :param sample: an existing Sample</span>
<span class="sd">        :type sample: Sample</span>
<span class="sd">        :param item: an existing Item</span>
<span class="sd">        :type item: Item</span>
<span class="sd">        :param value: a string or number value</span>
<span class="sd">        :type value: string|integer</span>
<span class="sd">        :param container: an existing ObjectType</span>
<span class="sd">        :type container: ObjectType</span>
<span class="sd">        :return: the existing FieldValue modified</span>
<span class="sd">        :rtype: FieldValue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the field value</span>
        <span class="n">field_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_value</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>

        <span class="c1"># get the field type</span>
        <span class="n">field_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">field_type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No FieldType found for OperationType </span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">.</span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">field_type</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;FieldValue </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> is an array. Use &#39;set_field_value_array&#39;&quot;</span>
            <span class="k">raise</span> <span class="n">AquariumModelError</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">role</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>

        <span class="c1"># initialize the field value from the field type</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_value</span><span class="p">:</span>
            <span class="n">field_value</span> <span class="o">=</span> <span class="n">field_type</span><span class="o">.</span><span class="n">initialize_field_value</span><span class="p">(</span><span class="n">field_value</span><span class="p">)</span>
            <span class="n">field_value</span><span class="o">.</span><span class="n">set_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_value</span><span class="p">)</span>

        <span class="c1"># set the value, finds allowable_field_types, etc.</span>
        <span class="n">field_value</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
                              <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">plan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plans</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="Operation.input"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.input">[docs]</a>    <span class="k">def</span> <span class="nf">input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the input :class:`FieldValue` by name&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_value</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.output"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.output">[docs]</a>    <span class="k">def</span> <span class="nf">output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the output :class:`FieldValue` by name&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_value</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;output&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.add_to_input_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.add_to_input_array">[docs]</a>    <span class="k">def</span> <span class="nf">add_to_input_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates and adds a new input :class:`FieldValue`.</span>
<span class="sd">        When setting values to items/samples/containers, the</span>
<span class="sd">        item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldType/FieldValue</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param sample: an existing Sample</span>
<span class="sd">        :type sample: Sample</span>
<span class="sd">        :param item: an existing Item</span>
<span class="sd">        :type item: Item</span>
<span class="sd">        :param value: a string or number value</span>
<span class="sd">        :type value: string|integer</span>
<span class="sd">        :param container: an existing ObjectType</span>
<span class="sd">        :type container: ObjectType</span>
<span class="sd">        :return: the newly created FieldValue</span>
<span class="sd">        :rtype: FieldValue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_to_field_value_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">,</span>
                                             <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
                                             <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
                                             <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                                             <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.add_to_output_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.add_to_output_array">[docs]</a>    <span class="k">def</span> <span class="nf">add_to_output_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates and adds a new output :class:`FieldValue`.</span>
<span class="sd">        When setting values to items/samples/containers, the</span>
<span class="sd">        item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldType/FieldValue</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param sample: an existing Sample</span>
<span class="sd">        :type sample: Sample</span>
<span class="sd">        :param item: an existing Item</span>
<span class="sd">        :type item: Item</span>
<span class="sd">        :param value: a string or number value</span>
<span class="sd">        :type value: string|integer</span>
<span class="sd">        :param container: an existing ObjectType</span>
<span class="sd">        :type container: ObjectType</span>
<span class="sd">        :return: the newly created FieldValue</span>
<span class="sd">        :rtype: FieldValue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_to_field_value_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span><span class="p">,</span>
                                             <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
                                             <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
                                             <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                                             <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.input_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.input_array">[docs]</a>    <span class="k">def</span> <span class="nf">input_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all input :class:`FieldValues`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_value_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.output_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.output_array">[docs]</a>    <span class="k">def</span> <span class="nf">output_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all output :class:`FieldValues`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_value_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.set_input"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.set_input">[docs]</a>    <span class="k">def</span> <span class="nf">set_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets a input :class:`FieldValue` to a value. When setting values to</span>
<span class="sd">        items/samples/containers, the item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldValue/FieldType</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param sample: an existing Sample</span>
<span class="sd">        :type sample: Sample</span>
<span class="sd">        :param item: an existing Item</span>
<span class="sd">        :type item: Item</span>
<span class="sd">        :param value: a string or number value</span>
<span class="sd">        :type value: string|integer</span>
<span class="sd">        :param container: an existing ObjectType</span>
<span class="sd">        :type container: ObjectType</span>
<span class="sd">        :return: the existing FieldValue modified</span>
<span class="sd">        :rtype: FieldValue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_field_value</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
                                    <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.set_output"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.set_output">[docs]</a>    <span class="k">def</span> <span class="nf">set_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets a output :class:`FieldValue` to a value. When setting values to</span>
<span class="sd">        items/samples/containers, the item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldValue/FieldType</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param sample: an existing Sample</span>
<span class="sd">        :type sample: Sample</span>
<span class="sd">        :param item: an existing Item</span>
<span class="sd">        :type item: Item</span>
<span class="sd">        :param value: a string or number value</span>
<span class="sd">        :type value: string|integer</span>
<span class="sd">        :param container: an existing ObjectType</span>
<span class="sd">        :type container: ObjectType</span>
<span class="sd">        :return: the existing FieldValue modified</span>
<span class="sd">        :rtype: FieldValue</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_field_value</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
                                    <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="n">container</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.set_input_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.set_input_array">[docs]</a>    <span class="k">def</span> <span class="nf">set_input_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets input :class:`FieldValue` array using values.</span>
<span class="sd">        Values should be a list of dictionaries containing sample, item,</span>
<span class="sd">        container, or values keys.</span>
<span class="sd">        When setting values to items/samples/containers, the</span>
<span class="sd">        item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldType/FieldValues being modified</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param values: list of dictionary of values to set</span>
<span class="sd">                (e.g. [{&quot;sample&quot;: mysample}, {&quot;item&quot;: myitem}])</span>
<span class="sd">        :type values: list</span>
<span class="sd">        :return: the list of modified FieldValues</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_field_value_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.set_output_array"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.set_output_array">[docs]</a>    <span class="k">def</span> <span class="nf">set_output_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets output :class:`FieldValue` array using values.</span>
<span class="sd">        Values should be a list of dictionaries containing sample, item,</span>
<span class="sd">        container, or values keys.</span>
<span class="sd">        When setting values to items/samples/containers, the</span>
<span class="sd">        item/sample/container must be saved.</span>

<span class="sd">        :param name: name of the FieldType/FieldValues being modified</span>
<span class="sd">        :type name: string</span>
<span class="sd">        :param values: list of dictionary of values to set</span>
<span class="sd">                (e.g. [{&quot;sample&quot;: mysample}, {&quot;item&quot;: myitem}])</span>
<span class="sd">        :type values: list</span>
<span class="sd">        :return: the list of modified FieldValues</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_field_value_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="Operation.show"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Operation.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print the operation nicely</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">pre</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cost</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">field_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="p">:</span>
            <span class="n">field_value</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="n">pre</span> <span class="o">+</span> <span class="s2">&quot;  &quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="nd">@magiclist</span>
    <span class="k">def</span> <span class="nf">inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">fv</span> <span class="k">for</span> <span class="n">fv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span> <span class="k">if</span> <span class="n">fv</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s1">&#39;input&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="nd">@magiclist</span>
    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">fv</span> <span class="k">for</span> <span class="n">fv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span> <span class="k">if</span> <span class="n">fv</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s1">&#39;output&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="OperationType"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.OperationType">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">OperationType</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">HasCodeMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A OperationType model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">operations</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Operation&quot;</span><span class="p">,</span> <span class="s2">&quot;OperationType&quot;</span><span class="p">),</span>
        <span class="n">field_types</span><span class="o">=</span><span class="n">Many</span><span class="p">(</span><span class="s2">&quot;FieldType&quot;</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="p">{</span>
                             <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                             <span class="s2">&quot;parent_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">}),</span>
        <span class="n">codes</span><span class="o">=</span><span class="n">HasManyGeneric</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">),</span>
        <span class="n">protocol</span><span class="o">=</span><span class="n">One</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_code_callback&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="s2">&quot;protocol&quot;</span><span class="p">),</span>
        <span class="n">cost_model</span><span class="o">=</span><span class="n">One</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_code_callback&quot;</span><span class="p">,</span>
                       <span class="n">params</span><span class="o">=</span><span class="s2">&quot;cost_model&quot;</span><span class="p">),</span>
        <span class="n">documentation</span><span class="o">=</span><span class="n">One</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_code_callback&quot;</span><span class="p">,</span>
                          <span class="n">params</span><span class="o">=</span><span class="s2">&quot;documentation&quot;</span><span class="p">),</span>
        <span class="n">precondition</span><span class="o">=</span><span class="n">One</span><span class="p">(</span><span class="s2">&quot;Code&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_code_callback&quot;</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="s2">&quot;precondition&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_field_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">parent_class</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xpos</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ypos</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">operation</span> <span class="o">=</span> <span class="n">Operation</span><span class="p">(</span><span class="n">operation_type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                              <span class="n">status</span><span class="o">=</span><span class="s1">&#39;planning&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">xpos</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">ypos</span><span class="p">)</span>
        <span class="n">operation</span><span class="o">.</span><span class="n">connect_to_session</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
        <span class="n">operation</span><span class="o">.</span><span class="n">operation_type</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">operation</span><span class="o">.</span><span class="n">init_field_values</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">operation</span>

    <span class="k">def</span> <span class="nf">field_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_types</span><span class="p">:</span>
            <span class="n">fts</span> <span class="o">=</span> <span class="n">filter_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_types</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">fts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="OperationType.save"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.OperationType.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the Operation Type to the Aquarium server. Requires</span>
<span class="sd">        this Operation Type to be connected to a session.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_operation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="Plan"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Plan</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">,</span> <span class="n">PlanValidator</span><span class="p">,</span> <span class="n">DataAssociatorMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Plan model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">data_associations</span><span class="o">=</span><span class="n">HasManyGeneric</span><span class="p">(</span><span class="s2">&quot;DataAssociation&quot;</span><span class="p">),</span>
        <span class="n">plan_associations</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;PlanAssociation&quot;</span><span class="p">,</span> <span class="s2">&quot;Plan&quot;</span><span class="p">),</span>
        <span class="n">operations</span><span class="o">=</span><span class="n">HasManyThrough</span><span class="p">(</span><span class="s2">&quot;Operation&quot;</span><span class="p">,</span> <span class="s2">&quot;PlanAssociation&quot;</span><span class="p">),</span>
        <span class="n">wires</span><span class="o">=</span><span class="n">Many</span><span class="p">(</span><span class="s2">&quot;Wire&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s2">&quot;get_wires&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;MyPlan&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;planning&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;No documentation ofr this module&quot;</span><span class="p">,</span>
            <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
            <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;no_name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mi">160</span><span class="p">,</span>
            <span class="s2">&quot;wires&quot;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
        <span class="c1"># self.operations = []</span>
        <span class="c1"># self.wires = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_associations</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plan_associations</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destination</span> <span class="o">=</span> <span class="n">destination</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

<div class="viewcode-block" id="Plan.add_operation"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.add_operation">[docs]</a>    <span class="k">def</span> <span class="nf">add_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an operation to the Plan</span>

<span class="sd">        :param operation: Operation to add</span>
<span class="sd">        :type operation: Operation</span>
<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append_to_many</span><span class="p">(</span><span class="s1">&#39;operations&#39;</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plan.add_operations"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.add_operations">[docs]</a>    <span class="k">def</span> <span class="nf">add_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operations</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds multiple operations to the Plan</span>

<span class="sd">        :param operations: list of Operations</span>
<span class="sd">        :type operations: list</span>
<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="n">operations</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">wire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
        <span class="n">wire</span> <span class="o">=</span> <span class="n">Wire</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">src</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">dest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append_to_many</span><span class="p">(</span><span class="s2">&quot;wires&quot;</span><span class="p">,</span> <span class="n">wire</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_wires</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pairs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">src</span><span class="p">,</span> <span class="n">dest</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wire</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_wires</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_wires</span>

    <span class="c1"># This is not being deserialized properly</span>
    <span class="nd">@property</span>
    <span class="nd">@magiclist</span>
    <span class="k">def</span> <span class="nf">all_wires</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">wires</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">field_value</span> <span class="ow">in</span> <span class="n">operation</span><span class="o">.</span><span class="n">field_values</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">field_value</span><span class="o">.</span><span class="n">outgoing_wires</span><span class="p">:</span>
                        <span class="n">wires</span> <span class="o">+=</span> <span class="n">field_value</span><span class="o">.</span><span class="n">outgoing_wires</span>
                    <span class="k">if</span> <span class="n">field_value</span><span class="o">.</span><span class="n">incoming_wires</span><span class="p">:</span>
                        <span class="n">wires</span> <span class="o">+=</span> <span class="n">field_value</span><span class="o">.</span><span class="n">incoming_wires</span>
        <span class="k">return</span> <span class="n">wires</span>

<div class="viewcode-block" id="Plan.create"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.create">[docs]</a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the Plan on the Aquarium server.</span>

<span class="sd">        :return: Submitted Plan (self)</span>
<span class="sd">        :rtype: Plan</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plan.submit"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.submit">[docs]</a>    <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">budget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Submits the Plan to the Aquarium server.</span>

<span class="sd">        :param user: User to submit the Plan</span>
<span class="sd">        :type user: User</span>
<span class="sd">        :param budget: Budget to use for the Plan</span>
<span class="sd">        :type budget: Budget</span>
<span class="sd">        :return: JSON</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">submit_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">budget</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="k">def</span> <span class="nf">all_data_associations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">das</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_associations</span>
        <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="n">das</span> <span class="o">+=</span> <span class="n">operation</span><span class="o">.</span><span class="n">data_associations</span>
            <span class="k">for</span> <span class="n">field_value</span> <span class="ow">in</span> <span class="n">operation</span><span class="o">.</span><span class="n">field_values</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">field_value</span><span class="o">.</span><span class="n">item</span><span class="p">:</span>
                    <span class="n">das</span> <span class="o">+=</span> <span class="n">field_value</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">data_associations</span>
        <span class="k">return</span> <span class="n">das</span>

<div class="viewcode-block" id="Plan.find"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.find">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">model_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Override find for plans, because generic method is too minimal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">interface</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interface</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;plans/</span><span class="si">{}</span><span class="s1">.json&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">model_id</span><span class="p">))</span></div>

<div class="viewcode-block" id="Plan.to_save_json"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.to_save_json">[docs]</a>    <span class="k">def</span> <span class="nf">to_save_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the json representation of the plan for saving and creating</span>
<span class="sd">        Plans on the Aquarium server.</span>

<span class="sd">        :return: JSON</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;operations&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;field_values&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="p">},</span>
            <span class="s1">&#39;wires&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;destination&quot;</span><span class="p">}</span>
        <span class="p">})</span>
        <span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">wire</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires</span><span class="p">:</span>
            <span class="n">wire</span><span class="o">.</span><span class="n">dump</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">json_data</span></div>

<div class="viewcode-block" id="Plan.estimate_cost"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.estimate_cost">[docs]</a>    <span class="k">def</span> <span class="nf">estimate_cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the cost of the plan on the Aquarium server.</span>
<span class="sd">        This is necessary before plan submission.</span>

<span class="sd">        :return: cost</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">estimate_plan_cost</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">field_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

<div class="viewcode-block" id="Plan.show"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print the plan nicely&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; id: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="n">operation</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="s2">&quot;  &quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">wire</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">wires</span><span class="p">:</span>
            <span class="n">wire</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="s2">&quot;  &quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plan.save"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates/patches the plan on the Aquarium server</span>

<span class="sd">        :return: updated Plan (self)</span>
<span class="sd">        :rtype: Plan</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">save_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plan.delete"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the plan on the Aquarium server</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">delete_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plan.replan"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.replan">[docs]</a>    <span class="k">def</span> <span class="nf">replan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies or replans the plan. Returns a plan copy&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">replan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plan.copy"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies or replans the plan&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">replan</span><span class="p">()</span></div>

    <span class="nd">@staticmethod</span>
    <span class="nd">@make_async</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_async_download_files</span><span class="p">(</span><span class="n">data_associations</span><span class="p">,</span> <span class="n">outdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">Plan</span><span class="o">.</span><span class="n">_download_files</span><span class="p">(</span><span class="n">data_associations</span><span class="p">,</span> <span class="n">outdir</span><span class="o">=</span><span class="n">outdir</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_download_files</span><span class="p">(</span><span class="n">data_associations</span><span class="p">,</span> <span class="n">outdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">da</span> <span class="ow">in</span> <span class="n">data_associations</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">da</span><span class="o">.</span><span class="n">upload</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">da</span><span class="o">.</span><span class="n">upload</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">outdir</span><span class="o">=</span><span class="n">outdir</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">)</span>

<div class="viewcode-block" id="Plan.download_files"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Plan.download_files">[docs]</a>    <span class="k">def</span> <span class="nf">download_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Downloads all uploads associated with the plan. Downloads happen</span>
<span class="sd">        ansynchrounously.</span>

<span class="sd">        :param outdir: output directory for downloaded files</span>
<span class="sd">        :param overwrite: whether to overwrite files if they exist</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Plan</span><span class="o">.</span><span class="n">_async_download_files</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_associations</span><span class="p">,</span> <span class="n">outdir</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PlanAssociation"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.PlanAssociation">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">PlanAssociation</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A PlanAssociation model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">plan</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Plan&quot;</span><span class="p">),</span>
        <span class="n">operation</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Operation&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="Sample"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Sample">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Sample</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Sample model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="c1"># sample relationships</span>
        <span class="n">sample_type</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;SampleType&quot;</span><span class="p">),</span>
        <span class="n">items</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Item&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;sample_id&quot;</span><span class="p">),</span>
        <span class="n">field_values</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;FieldValue&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;parent_id&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample_type_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_type_id</span> <span class="o">=</span> <span class="n">sample_type_id</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the identifier used by Aquarium in autocompletes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">field_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">field_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_value</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">field_value</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">fv</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">fv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_fv_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expected_keys</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">expected_keys</span><span class="p">}</span>
        <span class="n">fvs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_values</span>
        <span class="k">if</span> <span class="n">fvs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">fv</span> <span class="ow">in</span> <span class="n">fvs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fv</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="n">fv</span><span class="o">.</span><span class="n">sample</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">fv</span><span class="o">.</span><span class="n">sample</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">fv</span><span class="o">.</span><span class="n">value</span>
                    <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="n">fv</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># set value</span>
                        <span class="n">d</span><span class="p">[</span><span class="n">fv</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">fv</span><span class="o">.</span><span class="n">name</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                        <span class="c1"># append to list</span>
                        <span class="n">d</span><span class="p">[</span><span class="n">fv</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># make values an array</span>
                        <span class="n">d</span><span class="p">[</span><span class="n">fv</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="n">fv</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fv_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">ft</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">ft</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_type</span><span class="o">.</span><span class="n">field_types</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fv_dict</span><span class="p">(</span><span class="n">fv_keys</span><span class="p">)</span>

<div class="viewcode-block" id="Sample.save"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Sample.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the Sample to the Aquarium server. Requires</span>
<span class="sd">        this Sample to be connected to a session.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_samples</span><span class="p">([</span><span class="bp">self</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;samples&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="SampleType"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.SampleType">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">SampleType</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A SampleType model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">samples</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Sample&quot;</span><span class="p">,</span> <span class="s2">&quot;SampleType&quot;</span><span class="p">),</span>
        <span class="n">field_types</span><span class="o">=</span><span class="n">Many</span><span class="p">(</span><span class="s2">&quot;FieldType&quot;</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="p">{</span>
                             <span class="s2">&quot;parent_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                             <span class="s2">&quot;parent_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">})</span>
    <span class="p">)</span>

<div class="viewcode-block" id="SampleType.save"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.SampleType.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the Sample Type to the Aquarium server. Requires</span>
<span class="sd">        this Sample Type to be connected to a session.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_sample_type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="Upload"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Upload">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Upload</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An Upload model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">job</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Job&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># def _get_uploads_from_job_id(self, job_id):</span>

    <span class="k">def</span> <span class="nf">_get_uploads_from_job</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">http</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">_AqSession__aqhttp</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;krill/uploads?job=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">))[</span><span class="s1">&#39;uploads&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">temp_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">uploads</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_uploads_from_job</span><span class="p">()</span>
        <span class="n">_u_arr</span> <span class="o">=</span> <span class="p">[</span><span class="n">upload</span> <span class="k">for</span> <span class="n">upload</span> <span class="ow">in</span> <span class="n">uploads</span> <span class="k">if</span> <span class="n">upload</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">_u_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_download_image_from_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">outpath</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outpath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_file</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="n">out_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">raw</span>

<div class="viewcode-block" id="Upload.download"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Upload.download">[docs]</a>    <span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Downloads the uploaded file</span>

<span class="sd">        :param outdir: path of directory of output file (default is current directory)</span>
<span class="sd">        :param outfile: filename of output file (defaults to upload_filename)</span>
<span class="sd">        :param overwrite: whether to overwrite file if it already exists</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">outdir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">outdir</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload_file_name</span><span class="p">)</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="ow">or</span> <span class="n">overwrite</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_download_image_from_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_url</span><span class="p">(),</span> <span class="n">filepath</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_url</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">content</span></div>


<div class="viewcode-block" id="User"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.User">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A User model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">groups</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Group&quot;</span><span class="p">,</span> <span class="s2">&quot;User&quot;</span><span class="p">),</span>
        <span class="n">user_budget_associations</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;UserBudgetAssociation&quot;</span><span class="p">,</span> <span class="s2">&quot;User&quot;</span><span class="p">),</span>
        <span class="n">budgets</span><span class="o">=</span><span class="n">HasManyThrough</span><span class="p">(</span><span class="s2">&quot;Budget&quot;</span><span class="p">,</span> <span class="s2">&quot;UserBudgetAssociation&quot;</span><span class="p">),</span>
        <span class="n">additional</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;login&quot;</span><span class="p">),</span>
        <span class="n">ignore</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;password_digest&quot;</span><span class="p">,</span> <span class="s2">&quot;remember_token&quot;</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="UserBudgetAssociation"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.UserBudgetAssociation">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">UserBudgetAssociation</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An association model between a User and a Budget&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">budget</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;Budget&quot;</span><span class="p">),</span>
        <span class="n">user</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="Wire"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Wire">[docs]</a><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Wire</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Wire model&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="c1"># load_only=False, will force dumping of FieldValues here...</span>
        <span class="n">source</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;FieldValue&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;from_id&quot;</span><span class="p">,</span> <span class="n">dump_to</span><span class="o">=</span><span class="s2">&quot;from&quot;</span><span class="p">),</span>
        <span class="n">destination</span><span class="o">=</span><span class="n">HasOne</span><span class="p">(</span><span class="s2">&quot;FieldValue&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;to_id&quot;</span><span class="p">,</span> <span class="n">dump_to</span><span class="o">=</span><span class="s2">&quot;to&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">destination</span> <span class="o">=</span> <span class="n">destination</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_save_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;destination&#39;</span><span class="p">})</span>

<div class="viewcode-block" id="Wire.show"><a class="viewcode-back" href="../../developer/_autosummary/pydent.models.html#pydent.models.Wire.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Show the wire nicely&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">pre</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">operation</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span>
              <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span>
              <span class="s2">&quot; --&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination</span><span class="o">.</span><span class="n">operation</span><span class="o">.</span><span class="n">operation_type</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span>
              <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Trident 0.0.24 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, University of Washington.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>