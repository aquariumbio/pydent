<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pydent.planner.graph &#8212; pydent 1.0.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/style.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js "></script>

  </head><body>
    


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          Trident</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Trident <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../aqsession.html">Session (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.aqsession</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../aqsession.html#user-objects">User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.AqSession.html">pydent.aqsession.AqSession</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.Browser.html">pydent.aqsession.Browser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../aqsession.html#non-user-objects">Non-User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.SessionABC.html">pydent.aqsession.SessionABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.AqHTTP.html">pydent.aqsession.AqHTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aqsession.html#interfaces">Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../models.html">Models (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.models</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#model-classes">Model Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#operations">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#plans">Plans</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#inventory">Inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#data-and-io">Data and IO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#user">User</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#model-mixins">Model Mixins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.CreateMixin.html">pydent.models.crud_mixin.CreateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.DeleteMixin.html">pydent.models.crud_mixin.DeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.JSONDeleteMixin.html">pydent.models.crud_mixin.JSONDeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.JSONSaveMixin.html">pydent.models.crud_mixin.JSONSaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.SaveMixin.html">pydent.models.crud_mixin.SaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.UpdateMixin.html">pydent.models.crud_mixin.UpdateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.data_associations.DataAssociatorMixin.html">pydent.models.data_associations.DataAssociatorMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.field_value_mixins.FieldMixin.html">pydent.models.field_value_mixins.FieldMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.field_value_mixins.FieldTypeInterface.html">pydent.models.field_value_mixins.FieldTypeInterface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.field_value_mixins.FieldValueInterface.html">pydent.models.field_value_mixins.FieldValueInterface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#field-relationships">Field Relationships</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.BaseRelationship.html">pydent.relationships.BaseRelationship</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.BaseRelationshipAccessor.html">pydent.relationships.BaseRelationshipAccessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.Function.html">pydent.relationships.Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasMany.html">pydent.relationships.HasMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasManyGeneric.html">pydent.relationships.HasManyGeneric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasManyThrough.html">pydent.relationships.HasManyThrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasOne.html">pydent.relationships.HasOne</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasOneFromMany.html">pydent.relationships.HasOneFromMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.JSON.html">pydent.relationships.JSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.Many.html">pydent.relationships.Many</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.One.html">pydent.relationships.One</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.Raw.html">pydent.relationships.Raw</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.add_schema.html">pydent.marshaller.add_schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../planner.html">Planner (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.planner</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../planner.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.planner.Planner.html">pydent.planner.Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.planner.PlannerLayout.html">pydent.planner.PlannerLayout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../planner.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.planner.PlannerException.html">pydent.planner.PlannerException</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../exceptions.html">Exceptions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.exceptions</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../marshaller.html">Serialization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.marshaller</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.SchemaModel.html">pydent.marshaller.SchemaModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.ModelRegistry.html">pydent.marshaller.ModelRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.SchemaRegistry.html">pydent.marshaller.SchemaRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.descriptors.html">pydent.marshaller.descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.exceptions.html">pydent.marshaller.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.utils.html">pydent.marshaller.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../marshaller.html#fields">Fields</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Alias.html">pydent.marshaller.fields.Alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Callback.html">pydent.marshaller.fields.Callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Field.html">pydent.marshaller.fields.Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.FieldABC.html">pydent.marshaller.fields.FieldABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Nested.html">pydent.marshaller.fields.Nested</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Relationship.html">pydent.marshaller.fields.Relationship</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#logging-into-a-session">Logging into a session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#making-queries">Making queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#relationship-queries">Relationship Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#creating-inventory">Creating inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/installation.html">Installing Trident</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/installation.html#installation-for-developers">Installation for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/inventory.html">Inventory Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/inventory.html#creating-new-samples">Creating new samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/inventory.html#updating-sample-properties">Updating sample properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/inventory.html#creating-new-items">Creating new items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/inventory.html#creating-new-collections">Creating new collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/inventory.html#saving-inventory">Saving inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/planning.html">Experiment Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/querying.html">Making Queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#basic-browsing">Basic Browsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#browser-scope">Browser Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#relationship-browsing">Relationship Browsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../basics/querying.html#avoid-using-too-many-queries-n-1-problem">Avoid using too many queries (N+1 problem)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../basics/querying.html#the-browser-cache">The Browser Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#logging-requests">Logging Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#asynchrounous-requests">Asynchrounous Requests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_reference.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../aqsession.html">Session (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.aqsession</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../aqsession.html#user-objects">User Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aqsession.html#non-user-objects">Non-User Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html">Models (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.models</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#model-classes">Model Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#model-mixins">Model Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#field-relationships">Field Relationships</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../planner.html">Planner (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.planner</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../planner.html#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../planner.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../exceptions.html">Exceptions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.exceptions</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../marshaller.html">Serialization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.marshaller</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.SchemaModel.html">pydent.marshaller.SchemaModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.ModelRegistry.html">pydent.marshaller.ModelRegistry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.SchemaRegistry.html">pydent.marshaller.SchemaRegistry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.descriptors.html">pydent.marshaller.descriptors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.exceptions.html">pydent.marshaller.exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.utils.html">pydent.marshaller.utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../marshaller.html#fields">Fields</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced/topics.html">Advanced topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/caching.html">Structured queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/caching.html#speeding-up-queries">Speeding up queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../advanced/caching.html#temporary-sessions">Temporary Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../advanced/caching.html#optimized-queries">Optimized queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/planner_tutorial.html">Planner tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../aql/schemas.html">Aquarium Query Language Schema</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../aql/schemas.html#aquarium-query-language-aql-schema">Aquarium Query Language (AQL) Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aql/schemas.html#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/contributing.html#running-tests">Running Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#server-vs-local-tests">Server vs local tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/contributing.html#installing-dependencies">Installing dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#manual-release">Manual release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/versions.html">pydent change log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#id1">1.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a23">0.1.5a23</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a21">0.1.5a21</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a20">0.1.5a20</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a19">0.1.5a19</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a18">0.1.5a18</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a17">0.1.5a17</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a16">0.1.5a16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a15">0.1.5a15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a14">0.1.5a14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#section-1">0.1.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a13">0.1.5a13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a12">0.1.5a12</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a11">0.1.5a11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a10">0.1.5a10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a9">0.1.5a9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a8">0.1.5a8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a6">0.1.5a6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a5">0.1.5a5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a4">0.1.5a4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a3">0.1.5a3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a2">0.1.5a2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a1">0.1.5a1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a">0.1.5a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a-1">0.1.4a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a-2">0.1.3a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a-3">0.1.2a</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/versions.html#minor-changes">Minor changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <h1>Source code for pydent.planner.graph</h1><div class="highlight"><pre>
<span></span>&quot;&quot;&quot;PlannerLayout.&quot;&quot;&quot;
from collections import OrderedDict
from typing import Dict
from typing import Generator
from typing import Iterable
from typing import List
from typing import Optional
from typing import Tuple
from typing import Type
from typing import Union

import networkx as nx

from pydent.models import Operation
from pydent.models import Plan
from pydent.planner.utils import _id_getter
from pydent.planner.utils import get_subgraphs
from pydent.utils import make_async

# custom types
NodeType = Union[str, int]
PlannerGraphType = &quot;PlannerGraph&quot;
PointValue = float
PointType = Tuple[PointValue, PointValue]


class PlannerGraph:
    &quot;&quot;&quot;Representation of an Aquarium plan as a directed graph.

    Positions :class:`Operations &lt;pydent.models.Operation&gt;` for the
    Aquarium GUI
    &quot;&quot;&quot;

    def __init__(self, nxgraph: nx.DiGraph = None):
        &quot;&quot;&quot;Initializes a Plan graph.

        :param nxgraph:
        &quot;&quot;&quot;
        if nxgraph is None:
            nxgraph = nx.DiGraph()
        self.nxgraph = nxgraph
        self.annotations = []

    @classmethod
    def from_plan(cls, plan: Plan) -&gt; PlannerGraphType:
        &quot;&quot;&quot;Creates a graph from a :class:`pydent.models.Plan` instance.&quot;&quot;&quot;
        G = nx.DiGraph()
        planner_graph = cls(G)

        # store reference of operation
        fv_to_op_dict = {}
        if not plan.operations:
            return planner_graph
        for op in plan.operations:
            for fv in op.field_values:
                fv_to_op_dict[fv.rid] = op

        @make_async(10, progress_bar=False)
        def add_wires(wires):
            if not wires:
                return
            missing_operations = []
            for wire in wires:
                # TODO:
                try:
                    from_id = _id_getter(fv_to_op_dict[wire.source.rid])
                    to_id = _id_getter(fv_to_op_dict[wire.destination.rid])
                except KeyError as e:
                    pass
                    raise e
                if from_id is not None and to_id is not None:
                    if from_id not in G:
                        missing_operations.append(from_id)
                    if to_id not in G:
                        missing_operations.append(to_id)
                    if from_id in G and to_id in G:
                        G.add_edge(from_id, to_id, wire=wire)
            return wires

        @make_async(10, progress_bar=False)
        def add_ops(ops: Iterable[Operation]):
            if not ops:
                return
            for op in ops:
                planner_graph._add_operation(op)
            return ops

        add_ops(plan.operations)
        add_wires(plan.wires)

        # fix operation coordinates if None
        for op in planner_graph.operations:
            if op.x is None:
                op.x = 0
            if op.y is None:
                op.y = 0

        return planner_graph

    @property
    def nodes(self):
        return self.nxgraph.nodes

    @property
    def operations(self) -&gt; Generator[Operation, None, None]:
        for node in self.nxgraph.nodes:
            if &quot;operation&quot; in self.nxgraph.nodes[node]:
                yield self.nxgraph.nodes[node][&quot;operation&quot;]

    def iter_operations(
        self,
    ) -&gt; Generator[Tuple[Union[str, int], Operation], None, None]:
        for node in self.nxgraph.nodes:
            if &quot;operation&quot; in self.nxgraph.nodes[node]:
                yield (node, self.nxgraph.nodes[node][&quot;operation&quot;])

    def _add_operation(self, op: Operation):
        &quot;&quot;&quot;Adds an Operation to the Layout.

        :param op: operation
        :type op: pydent.models.Operation
        :return: None
        :rtype: None
        &quot;&quot;&quot;
        return self.nxgraph.add_node(_id_getter(op), operation=op)

    def subgraph(self, nodes: List[NodeType]) -&gt; Optional[Type[&quot;PlannerGraph&quot;]]:
        &quot;&quot;&quot;Returns a subgraph layout from a list of node_ids.&quot;&quot;&quot;
        return self.__class__(nxgraph=self.nxgraph.subgraph(nodes))

    def nodes_to_ops(self, nodes: List[NodeType]):
        &quot;&quot;&quot;Returns operations from a list of node_ids.&quot;&quot;&quot;
        return [self.nxgraph.nodes[n][&quot;operation&quot;] for n in nodes]

    def ops_to_nodes(self, ops: List[Operation]):
        &quot;&quot;&quot;Returns node_ids for each operation.&quot;&quot;&quot;
        return [_id_getter(op) for op in ops]

    def ops_to_subgraph(self, ops: List[Operation]) -&gt; PlannerGraphType:
        &quot;&quot;&quot;Returns a sub-layout containing only the operations.&quot;&quot;&quot;
        return self.subgraph(self.ops_to_nodes(ops))

    def predecessors(self, node: NodeType):
        &quot;&quot;&quot;Return predecessor nodes.

        :param node: node id
        :type node: basestring
        :return: list of node ids
        :rtype: list
        &quot;&quot;&quot;
        return self.nxgraph.predecessors(node)

    def successors(self, node: NodeType) -&gt; Generator[NodeType, None, None]:
        &quot;&quot;&quot;Return successors nodes.

        :param node: node id
        :type node: basestring
        :return: list of node ids
        :rtype: list
        &quot;&quot;&quot;
        return self.nxgraph.successors(node)

    def predecessor_subgraph(self, subgraph: PlannerGraphType) -&gt; PlannerGraphType:
        n_bunch = self.collect_predecessors(subgraph.roots())
        return self.subgraph(n_bunch)

    def successor_subgraph(self, layout):
        n_bunch = self.collect_successors(layout.leaves())
        return self.subgraph(n_bunch)

    def collect_predecessors(self, nodes: List[NodeType]) -&gt; List[NodeType]:
        &quot;&quot;&quot;Return all predecessors from a list of nodes.

        :param nodes: list of node ids
        :type nodes: list
        :return: list of node ids
        :rtype: list
        &quot;&quot;&quot;
        predecessors = []
        for node in nodes:
            predecessors += self.predecessors(node)
        return list(set(predecessors))

    def collect_successors(self, nodes: List[NodeType]) -&gt; List[NodeType]:
        &quot;&quot;&quot;Return all successors from a list of nodes.

        :param nodes: list of node ids
        :type nodes: list
        :return: list of node ids
        :rtype: list
        &quot;&quot;&quot;
        successors = []
        for node in nodes:
            successors += self.successors(node)
        return list(set(successors))

    def ops_to_predecessors(self, ops: List[Operation]) -&gt; List[Operation]:
        &quot;&quot;&quot;Return all predecessor operations from a list of operations.

        :param ops: list of :class:`pydent.models.Operation`
        :type ops: list
        :return: list of node ids
        :rtype: list
        &quot;&quot;&quot;
        nodes = self.collect_predecessors(self.ops_to_nodes(ops))
        return self.nodes_to_ops(nodes)

    def ops_to_successors(self, ops: List[Operation]) -&gt; List[Operation]:
        &quot;&quot;&quot;Return all successor operations from a list of operations.

        :param ops: list of :class:`pydent.models.Operation`
        :type ops: list
        :return: list of node ids
        :rtype: list
        &quot;&quot;&quot;
        nodes = self.collect_successors(self.ops_to_nodes(ops))
        return self.nodes_to_ops(nodes)

    def leaves(self):
        &quot;&quot;&quot;Returns the leaves of this graph.&quot;&quot;&quot;
        leaves = []
        for n in self.nodes:
            if len(list(self.successors(n))) == 0:
                leaves.append(n)
        return leaves

    def roots(self):
        &quot;&quot;&quot;Returns the roots of this graph.&quot;&quot;&quot;
        roots = []
        for n in self.nodes:
            if len(list(self.predecessors(n))) == 0:
                roots.append(n)
        return roots

    def ops_to_leaves(self):
        return self.nodes_to_ops(self.leaves())

    def ops_to_roots(self):
        return self.nodes_to_ops(self.roots())

    def __len__(self):
        return len(self.nxgraph)


<div class="viewcode-block" id="PlannerLayout"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout">[docs]</a>class PlannerLayout(PlannerGraph):
    &quot;&quot;&quot;Layout module for :class:`Planner &lt;pydent.planner.Planner&gt;`.

    Positions :class:`Operations &lt;pydent.models.Operation&gt;` for the
    Aquarium GUI
    &quot;&quot;&quot;

    TOP_RIGHT = (100, 100)
    BOX_DELTA_X = 170
    BOX_DELTA_Y = 70
    BOX_WIDTH = 150
    BOX_HEIGHT = 70
    STATUS_COLORS = {
        &quot;waiting&quot;: &quot;orange&quot;,
        &quot;error&quot;: &quot;red&quot;,
        &quot;pending&quot;: &quot;yellow&quot;,
        &quot;running&quot;: &quot;green&quot;,
        &quot;delayed&quot;: &quot;magenta&quot;,
        &quot;done&quot;: &quot;black&quot;,
        &quot;planning&quot;: &quot;grey&quot;,
    }

<div class="viewcode-block" id="PlannerLayout.get_independent_graphs"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.get_independent_graphs">[docs]</a>    def get_independent_graphs(self):
        &quot;&quot;&quot;Finds all independent subgraphs.

        :return: list of PlannerLayout
        :rtype: list
        &quot;&quot;&quot;
        subgraphs = get_subgraphs(self.nxgraph)
        sublayouts = [self.__class__(nxgraph=g) for g in subgraphs]
        return sublayouts</div>

    def _topological_sort(self):
        subgraphs = self.get_independent_graphs()
        for subgraph in subgraphs:
            subgraph._topological_sort_helper()
        self.arrange_layouts(subgraphs)

    def topo_sort_in_place(self):
        cx, cy = self.midpoint()
        self._topological_sort()
        cx2, cy2 = self.midpoint()
        self.translate(cx - cx2, cy - cy2)

<div class="viewcode-block" id="PlannerLayout.topo_sort"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.topo_sort">[docs]</a>    def topo_sort(self):
        &quot;&quot;&quot;Does a topological sort of the operations in this layout.

        Discovers individual subgraphs and topologically sorts each subgraph,
        and then aligns subgraphs horizontally.

        :return: None
        :rtype: None
        &quot;&quot;&quot;
        self._topological_sort()
        self.move(*self.TOP_RIGHT)</div>

    def prettify(self):
        return self.topo_sort()

    @classmethod
    def arrange_layouts(cls, layouts):
        x = 0
        y = 0
        for layout in layouts:
            layout.move(x, y)
            x += layout.width + cls.BOX_DELTA_X
            y = layout.y

<div class="viewcode-block" id="PlannerLayout.to_grid"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.to_grid">[docs]</a>    def to_grid(
        self, columns: int, axis: int = 1, border_x: int = None, border_y: int = None
    ):
        &quot;&quot;&quot;Arrange layouts in a grid format.

        :param columns: maximum number of columns (or rows when axis=0)
        :type columns: int
        :param axis: which axis to limit. Default: 1 (columns) or 0 (rows)
        :type axis: int
        :param border_x: (optional) separation between each cell in the grid
        :type border_x: int
        :param border_y: (optional) separation between each cell in the grid
        :type border_y: int
        :return: layout
        :rtype: layout
        &quot;&quot;&quot;
        layouts = self.get_independent_graphs()
        if len(layouts) == 1:
            self.move(100, 100)
            return self

        # make grid assignments
        assignments = []
        c = 0
        r = 0
        for layout in layouts:
            assignments.append((r, c, layout))
            c += 1
            if c &gt;= columns:
                r += 1
                c = 0

        # find cell height and width
        if border_x is None:
            border_x = self.BOX_DELTA_X * 2
        if border_y is None:
            border_y = self.BOX_DELTA_Y * 2
        grid_cell_height = 0
        grid_cell_width = 0
        for layout in layouts:
            if layout.height &gt; grid_cell_height:
                grid_cell_height = layout.height
            if layout.width &gt; grid_cell_width:
                grid_cell_width = layout.width
        grid_cell_height += border_y
        grid_cell_width += border_x

        for r, c, layout in assignments:
            if axis == 0:
                r, c = c, r
            layout.center(c * grid_cell_width, r * grid_cell_height)
        self.move(100, 100)
        return self</div>

<div class="viewcode-block" id="PlannerLayout.align_x_midpoints_to"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.align_x_midpoints_to">[docs]</a>    def align_x_midpoints_to(self, other_layout):
        &quot;&quot;&quot;Align the midpoint x-coordinate of this layout with that of another.

        :param other_layout: the other canvas layout
        :type other_layout: PlannerLayout
        :return: None
        :rtype: None
        &quot;&quot;&quot;
        if len(other_layout.nxgraph) == 0:
            return
        other_x, _ = other_layout.midpoint()
        x, _ = self.midpoint()
        deltax = other_x - x
        self.translate(deltax, 0)</div>

<div class="viewcode-block" id="PlannerLayout.align_y_midpoints_to"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.align_y_midpoints_to">[docs]</a>    def align_y_midpoints_to(self, other_layout):
        &quot;&quot;&quot;Align this midpoint y-coordinates of this layout with another
        layout.

        :param other_layout: the other canvas layout
        :type other_layout: PlannerLayout
        :return: None
        :rtype: None
        &quot;&quot;&quot;
        if len(other_layout.nxgraph) == 0:
            return
        _, other_y = other_layout.midpoint()
        self.y = other_y</div>

<div class="viewcode-block" id="PlannerLayout.align_x_of_ops"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.align_x_of_ops">[docs]</a>    def align_x_of_ops(self, ops1: List[Operation], ops2: List[Operation]):
        &quot;&quot;&quot;Aligns a set of Operations with another set of Operations within
        this PlannerLayout.

        :param ops1: list of :class:`pydent.models.Operation`
        :type ops1: list
        :param ops2: list of :class:`pydent.models.Operation`
        :type ops2: list
        :return: None
        :rtype: None
        &quot;&quot;&quot;
        layout1 = self.ops_to_subgraph(ops1)
        layout2 = self.ops_to_subgraph(ops2)
        return layout1.align_x_midpoints_to(layout2)</div>

    @property
    def xy(self) -&gt; PointType:
        return self.bounds()[0]

    @property
    def x(self) -&gt; PointValue:
        return self.xy[0]

    @property
    def y(self) -&gt; PointValue:
        return self.xy[1]

    @x.setter
    def x(self, new_x: PointValue):
        deltax = new_x - self.x
        self.translate(deltax, 0)

    @y.setter
    def y(self, new_y: PointValue):
        delta_y = new_y - self.y
        self.translate(0, delta_y)

<div class="viewcode-block" id="PlannerLayout.bounds"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.bounds">[docs]</a>    def bounds(self) -&gt; Tuple[PointType, PointType]:
        &quot;&quot;&quot;Returns the bounding box of the layout as the upper-left and lower-
        right coordinates.

        :return: x,y coordinate
        :rtype: tuple
        &quot;&quot;&quot;
        x_arr = [op.x for op in self.operations]
        y_arr = [op.y for op in self.operations]
        return (min(x_arr), min(y_arr)), (max(x_arr), max(y_arr))</div>

<div class="viewcode-block" id="PlannerLayout.midpoint"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.midpoint">[docs]</a>    def midpoint(self) -&gt; PointType:
        &quot;&quot;&quot;Returns the midpoint x,y coordinates of the layout.

        :return: x,y coordinate
        :rtype: tuple
        &quot;&quot;&quot;
        ul, lr = self.bounds()
        x, y = (lr[0] - ul[0]) / 2 + ul[0], (lr[1] - ul[1]) / 2 + ul[1]
        return x, y</div>

<div class="viewcode-block" id="PlannerLayout.translate"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.translate">[docs]</a>    def translate(
        self, delta_x: PointValue, delta_y: PointValue
    ) -&gt; Generator[Operation, None, None]:
        &quot;&quot;&quot;Translates the layout by the x,y coordinates.

        :param delta_x: delta x
        :type delta_x: int
        :param delta_y: delta y
        :type delta_y: int
        :return: None
        :rtype: None
        &quot;&quot;&quot;
        for op in self.operations:
            op.x += delta_x
            op.y += delta_y
        return self.operations</div>

    def move(self, x: PointValue, y: PointValue):
        self.x = x
        self.y = y

    def center(self, x: PointValue, y: PointValue):
        self.move(x - self.width / 2, y - self.height / 2)

    @property
    def width(self):
        return self.bounds()[1][0] - self.bounds()[0][0]

    @property
    def height(self) -&gt; PointValue:
        return self.bounds()[1][1] - self.bounds()[0][1]

    def pos(self) -&gt; Dict[NodeType, PointType]:
        pos = {}
        for n, op in self.iter_operations():
            pos[n] = (op.x, -op.y)
        return pos

    def _status_colors(self) -&gt; List[str]:
        node_color = [
            self.STATUS_COLORS.get(op.status, &quot;rosybrown&quot;) for op in self.operations
        ]
        return node_color

    # TODO: minimize crossings
<div class="viewcode-block" id="PlannerLayout._topological_sort_helper"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout._topological_sort_helper">[docs]</a>    def _topological_sort_helper(self):
        &quot;&quot;&quot;Attempt a rudimentary topological sort on the plan.&quot;&quot;&quot;

        _x, _y = self.TOP_RIGHT

        y = _y
        delta_x = self.BOX_DELTA_X
        delta_y = -self.BOX_DELTA_Y

        max_depth = {}
        roots = self.roots()
        for root in roots:
            depths = nx.single_source_shortest_path_length(self.nxgraph, root)
            for n, d in depths.items():
                max_depth[n] = max(max_depth.get(n, d), d)

        # push roots &#39;up&#39; so they are not stuck on layer one
        for root in roots:
            successors = list(self.successors(root))
            if len(successors) &gt; 0:
                min_depth = min([max_depth[s] for s in successors])
                max_depth[root] = min_depth - 1

        by_depth = OrderedDict()

        for node, depth in max_depth.items():
            by_depth.setdefault(depth, [])
            by_depth[depth].append(node)
        for depth in sorted(by_depth):
            op_ids = by_depth[depth]

            # sort by predecessor_layout
            predecessor_avg_x = []
            x = 0
            for op_id in op_ids:
                predecessors = list(self.predecessors(op_id))
                if len(predecessors) &gt; 0:
                    x, _ = self.subgraph(predecessors).midpoint()
                    predecessor_avg_x.append((x, op_id))
                else:
                    predecessor_avg_x.append((x + 1, op_id))
            sorted_op_ids = [
                op_id for _, op_id in sorted(predecessor_avg_x, key=lambda x: x[0])
            ]

            x = _x
            # sorted_op_ids = sorted(op_ids)
            ops = self.nodes_to_ops(sorted_op_ids)
            for op in ops:
                op.x = x
                op.y = y
                x += delta_x
            layer = self.subgraph(op_ids)
            predecessor_layout = self.predecessor_subgraph(layer)
            layer.align_x_midpoints_to(predecessor_layout)
            y += delta_y

        # readjust
        self.move(_x, _y)</div>

<div class="viewcode-block" id="PlannerLayout.align_ops_with_successors"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.align_ops_with_successors">[docs]</a>    def align_ops_with_successors(self, ops: List[Operation]):
        &quot;&quot;&quot;Aligns the Operations to their successors by midpoints.

        Used in topological sorting of plans.

        :param ops: list of :class:`pydent.models.Operation`
        :type ops: list
        :return: None
        :rtype: None
        &quot;&quot;&quot;
        successors = self.ops_to_successors(ops)
        self.align_x_of_ops(ops, successors)</div>

<div class="viewcode-block" id="PlannerLayout.align_ops_with_predecessors"><a class="viewcode-back" href="../../../generated/pydent.planner.PlannerLayout.html#pydent.planner.PlannerLayout.align_ops_with_predecessors">[docs]</a>    def align_ops_with_predecessors(self, ops: List[Operation]):
        &quot;&quot;&quot;Aligns the Operations to their predecessors by midpoints.

        Used in topological sorting of plans.

        :param ops: list of :class:`pydent.models.Operation`
        :type ops: list
        :return: None
        :rtype: None
        &quot;&quot;&quot;
        predecessors = self.ops_to_predecessors(ops)
        self.align_x_of_ops(ops, predecessors)</div>

    def draw(self):
        return nx.draw(self.nxgraph, pos=self.pos(), node_color=self._status_colors())</div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2020, University of Washington.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>