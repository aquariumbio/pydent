
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Developer Notes &#8212; Trident 1.0.0a1 documentation</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tests" href="tests.html" />
    <link rel="prev" title="Experiment Planning" href="planning.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tests.html" title="Tests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="planning.html" title="Experiment Planning"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Trident 1.0.0a1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="http://klavinslab.org/trident" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<div>
    <div>
        <h1 align="center"><a href="index.html">Trident</a>
        </h1>
    </div>
</div>

<p align="center" class="sidebar-subtitle">Trident version: <a href="https://pypi.org/project/pydent/">1.0.0a1</a></p>
<div>

</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Trident Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Intro to Programmatic Science</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="browsing.html">Model browsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="planning.html">Experiment Planning</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interfaces">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="#establishing-an-interface">Establishing an Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-models">Working with Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#model-fields">Model Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#editing-or-creating-models">Editing or Creating Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#relationships">Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="#serialization-deserialization">Serialization/Deserialization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Version History</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>Developer Notes</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="developer-notes">
<h1>Developer Notes<a class="headerlink" href="#developer-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="interfaces">
<h2>Interfaces<a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h2>
<p>There are two main pydent interfaces:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pydent.interfaces.ModelInterface</span></code> - used for finding models via
<code class="docutils literal notranslate"><span class="pre">find</span></code>, <code class="docutils literal notranslate"><span class="pre">find_by_name</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, or <code class="docutils literal notranslate"><span class="pre">where</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pydent.interfaces.UtilityInterface</span></code> - used for other requests such
as submitting plans, estimating plan costs, etc.</li>
</ul>
<p>All requests (POST, GET, PUT) happen through an <code class="docutils literal notranslate"><span class="pre">pydent.aqhttp.AqHTTP</span></code>
instance, which stores a login, the aquarium url, and login data. But,
rather than have direct access to <code class="docutils literal notranslate"><span class="pre">AqHTTP</span></code> and to avoid potentially
harmful requests to Aquarium, the <code class="docutils literal notranslate"><span class="pre">pydent.interfaces</span></code> request
interfaces are used to specify how these requests are made.</p>
</div>
<div class="section" id="establishing-an-interface">
<h2>Establishing an Interface<a class="headerlink" href="#establishing-an-interface" title="Permalink to this headline">¶</a></h2>
<p>Interfaces are created using a <code class="docutils literal notranslate"><span class="pre">pydent.aqsession.AqSession</span></code> instance.
<code class="docutils literal notranslate"><span class="pre">AqSession</span></code> instances are created using a user’s login information and
stores a particular <code class="docutils literal notranslate"><span class="pre">AqHTTP</span></code> instance.</p>
<p>For example, to establish a User Model interface and find a <code class="docutils literal notranslate"><span class="pre">User</span></code>
with <code class="docutils literal notranslate"><span class="pre">id</span> <span class="pre">==</span> <span class="pre">1</span></code>:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yoursession</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">yoursession</span><span class="o">.</span><span class="n">model_interface</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>You can get a list of available models by <code class="docutils literal notranslate"><span class="pre">yoursession.models</span></code></p>
<p>For example, to save a plan using the utility interface:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yoursession</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">save_plan</span><span class="p">(</span><span class="n">myplan</span><span class="p">)</span>
</pre></div>
</div>
<p>Some model definitions already contain wrappers for using some
interface, for example, <code class="docutils literal notranslate"><span class="pre">Plan</span></code> contains a wrapper for saving itself:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myplane</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-models">
<h2>Working with Models<a class="headerlink" href="#working-with-models" title="Permalink to this headline">¶</a></h2>
<p>Most models can be initialized as follows:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="p">()</span>

<span class="c1"># or</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">login</span><span class="o">=</span><span class="s1">&#39;mylogin&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;myname&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Models can be pre-loaded with attributes using the <code class="docutils literal notranslate"><span class="pre">load</span></code> class method</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">load</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;GI Joe&quot;</span><span class="p">,</span> <span class="s2">&quot;login&quot;</span><span class="p">:</span> <span class="s1">&#39;gijoe&#39;</span><span class="p">})</span>

<span class="c1"># attributes are loaded from the dictionary</span>
<span class="k">assert</span> <span class="n">u</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;GI Joe&quot;</span>
<span class="k">assert</span> <span class="n">u</span><span class="o">.</span><span class="n">login</span> <span class="o">==</span> <span class="s2">&quot;gijoe&quot;</span>
</pre></div>
</div>
<p>Models instantiate with the <code class="docutils literal notranslate"><span class="pre">load</span></code> method have their attribute
automatically ‘tracked’ by the schema. For example,</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">load</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;GI Joe&quot;</span><span class="p">,</span> <span class="s2">&quot;login&quot;</span><span class="p">:</span> <span class="s1">&#39;gijoe&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dump</span><span class="p">())</span>

<span class="c1">#&gt;&gt;&gt; {&quot;name&quot;: &quot;GI Joe&quot;, &quot;login&quot;: &#39;gijoe&#39;}</span>
</pre></div>
</div>
<p>To see more information about serialization/deserialization, see
Serialization/Deserialization below</p>
</div>
<div class="section" id="model-fields">
<h2>Model Fields<a class="headerlink" href="#model-fields" title="Permalink to this headline">¶</a></h2>
<p>Models inherit the <code class="docutils literal notranslate"><span class="pre">ModelBase</span></code> base class and are pre-loaded with a
serialization/deserialization schema (via the <code class="docutils literal notranslate"><span class="pre">&#64;add_schema</span></code>
decorator). The attached schema controls how attributes are serialized
and deserialized.</p>
<p>Serialization/deserialization is controlled by the models schema. A
model schema is automatically attached to models via the <code class="docutils literal notranslate"><span class="pre">&#64;add_schema</span></code>
decorator</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Sample</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>In order for Trident to know what fields to serialize/deserialize,
fields need to be defined for the model. There are a number of ways to
define fields for a model:</p>
<ul class="simple">
<li><em>Use the ``load`` class method</em></li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">load</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;GIJoe&#39;</span><span class="p">})</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><em>Define it in the class definition using the ``fields`` attribute</em></li>
</ol>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">Sample</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="n">fields</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">Str</span><span class="p">())</span>
</pre></div>
</div>
<ul class="simple">
<li><em>Establish in the ``__init__`` using ``super().__init__(**kwargs)``
style</em></li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Sample</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>  <span class="c1"># this creates a field called name</span>
</pre></div>
</div>
<ul class="simple">
<li><em>Implicitly track all ``init`` attributes using
``super().__init__(**vars(self))``</em></li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Sample</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="editing-or-creating-models">
<h2>Editing or Creating Models<a class="headerlink" href="#editing-or-creating-models" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Models must have the <code class="docutils literal notranslate"><span class="pre">&#64;add_schema</span></code> class decorator</li>
<li>Models inherit the <code class="docutils literal notranslate"><span class="pre">ModelBase</span></code> baseclass</li>
<li>If defining a custom <code class="docutils literal notranslate"><span class="pre">__init__</span></code></li>
<li>do not add positional arguments to <code class="docutils literal notranslate"><span class="pre">__init__</span></code>. The Marshaller does
not expect any positional arguments when deserializing data.
Dictionary arguments are ok</li>
<li>be sure to call <code class="docutils literal notranslate"><span class="pre">super().__init__</span></code></li>
<li>if you would like to include attributes in the serialization fields
use <code class="docutils literal notranslate"><span class="pre">super().__init__(fieldname=whatever,...)</span></code> (A short cut for
tracking all attributes for serialization is to use
<code class="docutils literal notranslate"><span class="pre">super().__init__(**vars(self))</span></code>)</li>
<li>Fields (including relationships) are defined in the model’s
<code class="docutils literal notranslate"><span class="pre">fields</span></code> attribute, which expects a dictionary of field_names with
Field models<ul>
<li><code class="docutils literal notranslate"><span class="pre">pydent.marshaller.fields</span></code> is a module that contains a list of
fields including <code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Int</span></code>, <code class="docutils literal notranslate"><span class="pre">Boolean</span></code>, etc. Establishing
a field this way will ensure that the attribute is properly
validated. You’ll notice that as of Dec 2017, Aquarium models do
not use this explicitly. If the need for validation arises, we can
explicitly define these fields</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="relationships">
<h2>Relationships<a class="headerlink" href="#relationships" title="Permalink to this headline">¶</a></h2>
<p>Relationships are special model fields that establish One-to-One,
One-to-Many, and Many-to-Many relationships between models.The
relationships use the attached model session to retrieve the models
through Aquarium. How these work isn’t exactly straightforward and
requires a little bit of explanation.</p>
<p>There are HasOne, HasMany, HasManyGeneric, and HasManyThrough
relationships which can be defined in the model definition in the
<code class="docutils literal notranslate"><span class="pre">fields</span></code> attribute. For example:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@add_schema</span>
<span class="k">class</span> <span class="nc">SamlpeType</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="n">fields</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">samples</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Sample&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;sample_type_id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Trident will always attempt to <em>fullfill</em> relationships for attributes
if possible</p>
<p>For example:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create empty Sample</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">Sample</span><span class="p">()</span>

<span class="c1"># s has no sample_type_id</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;sample_type_id&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;sample_type&#39;</span><span class="p">)</span>

<span class="c1"># add sampel_type_id</span>
<span class="n">s</span><span class="o">.</span><span class="n">sample_type_id</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># sample_type can now be found</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">sample_type</span><span class="p">,</span> <span class="n">SampleType</span><span class="p">)</span>
</pre></div>
</div>
<p>If for whatever reason the <em>fullfillment</em> fails, Trident will return
None</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">Sample</span><span class="o">.</span><span class="n">load</span><span class="p">({</span><span class="s1">&#39;sample_type_id&#39;</span><span class="p">:</span> <span class="mi">100000000000</span><span class="p">})</span>
<span class="k">assert</span> <span class="n">s</span><span class="o">.</span><span class="n">sample_type</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
<div class="section" id="relationship-fullfillment">
<h3>Relationship fullfillment<a class="headerlink" href="#relationship-fullfillment" title="Permalink to this headline">¶</a></h3>
<p>The relationship fullfillment occurs through a ‘callback’ and ‘params’
attributes defined in the relationships <code class="docutils literal notranslate"><span class="pre">__init__</span></code> definition. When
fullfilling a relationship, the model will use its ‘callback’ method and
pass in the ‘params’ value found in the relationship. The ‘params’ may
include callable (i.e. lambdas), in which case the model fullfilling the
relationship will pass in itself to retrieve the parameters.</p>
<p>As an example, the SampleType relationship in the Sample definition:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SampleType</span><span class="p">(</span><span class="n">ModelBase</span><span class="p">):</span>
    <span class="n">fields</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">sample_type</span><span class="o">=</span><span class="n">HasMany</span><span class="p">(</span><span class="s2">&quot;Sample&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s2">&quot;sample_type_id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The HasMany relationship defaults to the ‘where_callback’ method. In
the HasMany <code class="docutils literal notranslate"><span class="pre">__init__</span></code> definition, params are established such that</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;sample_type_id&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">id</span><span class="p">}</span>
</pre></div>
</div>
<p>If a <code class="docutils literal notranslate"><span class="pre">Sample</span></code> with <code class="docutils literal notranslate"><span class="pre">id=4</span></code> attempts to fullfill a sample_type
relationship, it finds the relationship params
<code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">{'sample_type_id':</span> <span class="pre">x.id}</span></code>, passes in itself such that
<code class="docutils literal notranslate"><span class="pre">params={'sample_type_id':</span> <span class="pre">4}</span></code>. Those params are passed to the
callback along with the model name</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span>SampleType.where_callback(&#39;Sample&#39;, {&#39;sample_type_id&#39;: 4})`
</pre></div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">where_callback</span></code> . uses a session instance to find all
<code class="docutils literal notranslate"><span class="pre">Sample</span></code> objects where <code class="docutils literal notranslate"><span class="pre">{'sample_type_id':</span> <span class="pre">4}</span></code>.</p>
<p>You can also define custom callbacks for any relations. An example of
this is the <code class="docutils literal notranslate"><span class="pre">FieldType</span></code> model with the <code class="docutils literal notranslate"><span class="pre">operation_type</span></code> and
<code class="docutils literal notranslate"><span class="pre">sample_type</span></code> fields.</p>
</div>
</div>
<div class="section" id="serialization-deserialization">
<h2>Serialization/Deserialization<a class="headerlink" href="#serialization-deserialization" title="Permalink to this headline">¶</a></h2>
<div class="section" id="serialization">
<h3>Serialization<a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">load</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">load</span> <span class="pre">only</span></code></li>
</ul>
</div>
<div class="section" id="deserialization">
<h3>Deserialization<a class="headerlink" href="#deserialization" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">dump</span> <span class="pre">only</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">dump</span> <span class="pre">relations</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">dump</span> <span class="pre">all_relations</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">dump</span> <span class="pre">only</span> <span class="pre">dictionary</span></code></li>
</ul>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="planning.html" title="previous chapter (use the left arrow)">Experiment Planning</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="tests.html" title="next chapter (use the right arrow)">Tests</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tests.html" title="Tests"
             >next</a> |</li>
        <li class="right" >
          <a href="planning.html" title="Experiment Planning"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Trident 1.0.0a1 documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2017, University of Washington. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>