
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Tests &#8212; Trident 0.0.2 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Contributing" href="contributing.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="contributing.html" title="Contributing"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Trident 0.0.2 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="sidebar-subtitle">
    <a href="../index.html">
        <h1>Trident (V0.0.2)</h1>
    </a>
</p>

<p>
    Trident is a python scripting API wrapper for Aquarium. With Trident,
    you can create python scripts and apps that mine data, create samples,
    submit laboratory protocols, and more. You are looking at documentation
    for version 0.0.2.
</p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tests</a><ul>
<li><a class="reference internal" href="#test-coverage">Test Coverage</a></li>
<li><a class="reference internal" href="#testing-with-live-and-fake-connections">Testing with live and fake connections</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="contributing.html"
                        title="previous chapter">Contributing</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/developer/tests.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tests">
<h1>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h1>
<p>Tests are written to run with pytest.</p>
<p>To run tests, first install trident’s dependencies:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>To run tests, run:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">tests</span>
</pre></div>
</div>
<div class="section" id="test-coverage">
<h2>Test Coverage<a class="headerlink" href="#test-coverage" title="Permalink to this headline">¶</a></h2>
<p>Covering all of the models and endpoints for Trident is very difficult.
Tests coverage is not 100%.</p>
<p>For the most part, the <cite>Marshaller</cite>, <cite>utilities</cite>, <cite>aqhttp</cite>, <cite>aqsession</cite>, and
<cite>baseclass</cite> have near 100% coverage.</p>
<p>For testing of specific Aquarium models, tests are found in
‘tests/test_models/models.’ Many of these model tests use ‘monkeypatch’
to <em>intercept</em> requests and return expected information.
Writing these tests take a long time and so not all model tests are comprehensive.</p>
<p>Note JV 12/13/17: There are likely several better options
for running http request tests:
* HTTPretty <a class="reference external" href="https://github.com/gabrielfalcao/HTTPretty">https://github.com/gabrielfalcao/HTTPretty</a> - convient methods to
intercept requests, similar to Ruby’s FakeWeb
* VCRpy <a class="reference external" href="https://github.com/kevin1024/vcrpy">https://github.com/kevin1024/vcrpy</a> - which has the capacity to <em>record</em>
requests and intercept http requests to the recorded version of the requests.</p>
</div>
<div class="section" id="testing-with-live-and-fake-connections">
<h2>Testing with live and fake connections<a class="headerlink" href="#testing-with-live-and-fake-connections" title="Permalink to this headline">¶</a></h2>
<p>In ‘tests/conftest.py’ two fixtures are defined <cite>fake_session</cite> and
<cite>session.</cite> <cite>fake_session</cite> contains a fake AqSession in which the
login information has been faked. <cite>session</cite> contains a potentially
live connection to Aquarium using login information located in
‘tests/secrets/config.json.secret’</p>
<p>Though we should not run tests against a production or nursery server,
to run live tests with an Aquarium server, replace the
<cite>tests/secrets/config.json.secret.template</cite> and a new
<cite>tests/secrets/config.json.secret</cite> containing your login information</p>
<div class="highlight-JSON"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;login&quot;</span><span class="p">:</span> <span class="s2">&quot;yourlogin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aquarium_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://aquarium.org&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="contributing.html" title="Contributing"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Trident 0.0.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, University of Washington.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>