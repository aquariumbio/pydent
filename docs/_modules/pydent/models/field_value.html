<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pydent.models.field_value &#8212; pydent 0.1.5a7 documentation</title>
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/style.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js "></script>

  </head><body>
    


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          Trident</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1.5a7</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Trident <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../aqsession.html">Session (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.aqsession</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../aqsession.html#user-objects">User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.AqSession.html">pydent.aqsession.AqSession</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.Browser.html">pydent.aqsession.Browser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../aqsession.html#non-user-objects">Non-User Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.SessionABC.html">pydent.aqsession.SessionABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.aqsession.AqHTTP.html">pydent.aqsession.AqHTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../aqsession.html#interfaces">Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../models.html">Models (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.models</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#model-classes">Model Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#operations">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#plans">Plans</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#inventory">Inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#data-and-io">Data and IO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#user">User</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#model-mixins">Model Mixins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.CreateMixin.html">pydent.models.crud_mixin.CreateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.DeleteMixin.html">pydent.models.crud_mixin.DeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.JSONDeleteMixin.html">pydent.models.crud_mixin.JSONDeleteMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.JSONSaveMixin.html">pydent.models.crud_mixin.JSONSaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.SaveMixin.html">pydent.models.crud_mixin.SaveMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.crud_mixin.UpdateMixin.html">pydent.models.crud_mixin.UpdateMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.data_associations.DataAssociatorMixin.html">pydent.models.data_associations.DataAssociatorMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.field_value_mixins.FieldMixin.html">pydent.models.field_value_mixins.FieldMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.field_value_mixins.FieldTypeInterface.html">pydent.models.field_value_mixins.FieldTypeInterface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.models.field_value_mixins.FieldValueInterface.html">pydent.models.field_value_mixins.FieldValueInterface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#field-relationships">Field Relationships</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.BaseRelationship.html">pydent.relationships.BaseRelationship</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.BaseRelationshipAccessor.html">pydent.relationships.BaseRelationshipAccessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.Function.html">pydent.relationships.Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasMany.html">pydent.relationships.HasMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasManyGeneric.html">pydent.relationships.HasManyGeneric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasManyThrough.html">pydent.relationships.HasManyThrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasMixin.html">pydent.relationships.HasMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasOne.html">pydent.relationships.HasOne</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.HasOneFromMany.html">pydent.relationships.HasOneFromMany</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.JSON.html">pydent.relationships.JSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.Many.html">pydent.relationships.Many</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.One.html">pydent.relationships.One</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.relationships.Raw.html">pydent.relationships.Raw</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../models.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../models.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.add_schema.html">pydent.marshaller.add_schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../planner.html">Planner (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.planner</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../planner.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.planner.Planner.html">pydent.planner.Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.planner.PlannerLayout.html">pydent.planner.PlannerLayout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../planner.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.planner.PlannerException.html">pydent.planner.PlannerException</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../exceptions.html">Exceptions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.exceptions</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../marshaller.html">Serialization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pydent.marshaller</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.SchemaModel.html">pydent.marshaller.SchemaModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.ModelRegistry.html">pydent.marshaller.ModelRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.SchemaRegistry.html">pydent.marshaller.SchemaRegistry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.descriptors.html">pydent.marshaller.descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.exceptions.html">pydent.marshaller.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../generated/pydent.marshaller.utils.html">pydent.marshaller.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../marshaller.html#fields">Fields</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Alias.html">pydent.marshaller.fields.Alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Callback.html">pydent.marshaller.fields.Callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Field.html">pydent.marshaller.fields.Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.FieldABC.html">pydent.marshaller.fields.FieldABC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Nested.html">pydent.marshaller.fields.Nested</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../generated/pydent.marshaller.fields.Relationship.html">pydent.marshaller.fields.Relationship</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#logging-into-a-session">Logging into a session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#making-queries">Making queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#relationship-queries">Relationship Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#creating-inventory">Creating inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/installation.html">Installing Trident</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/installation.html#installation-for-developers">Installation for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/planning.html">Experiment Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/querying.html">Making Queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#basic-browsing">Basic Browsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#browser-scope">Browser Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#relationship-browsing">Relationship Browsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../basics/querying.html#avoid-using-too-many-queries-n-1-problem">Avoid using too many queries (N+1 problem)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../basics/querying.html#the-browser-cache">The Browser Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#logging-requests">Logging Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#asynchrounous-requests">Asynchrounous Requests</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced/topics.html">Advanced topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/caching.html">Speeding up queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../advanced/caching.html#temporary-sessions">Temporary Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../advanced/caching.html#optimized-queries">Optimized queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/planner_tutorial.html">Planner tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/contributing.html#running-tests">Running Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#server-vs-local-tests">Server vs local tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/contributing.html#installing-dependencies">Installing dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#manual-release">Manual release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/versions.html">pydent change log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a6">0.1.5a6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a5">0.1.5a5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a4">0.1.5a4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a3">0.1.5a3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a2">0.1.5a2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a1">0.1.5a1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a">0.1.5a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#id1">0.1.4a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#id2">0.1.3a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#id3">0.1.2a</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/versions.html#major-changes">Major changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/versions.html#minor-changes">Minor changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/installation.html">Installing Trident</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/installation.html#installation-for-developers">Installation for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#logging-into-a-session">Logging into a session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#making-queries">Making queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#relationship-queries">Relationship Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/getting_started.html#creating-inventory">Creating inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/querying.html">Making Queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#basic-browsing">Basic Browsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#browser-scope">Browser Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#relationship-browsing">Relationship Browsing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../basics/querying.html#avoid-using-too-many-queries-n-1-problem">Avoid using too many queries (N+1 problem)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../basics/querying.html#the-browser-cache">The Browser Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#logging-requests">Logging Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/querying.html#asynchrounous-requests">Asynchrounous Requests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../basics/planning.html">Experiment Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/contributing.html#running-tests">Running Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#server-vs-local-tests">Server vs local tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/contributing.html#installing-dependencies">Installing dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/contributing.html#manual-release">Manual release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced/topics.html">Advanced topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/caching.html">Speeding up queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../advanced/caching.html#temporary-sessions">Temporary Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../advanced/caching.html#optimized-queries">Optimized queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/planner_tutorial.html">Planner tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/versions.html">pydent change log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a6">0.1.5a6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a5">0.1.5a5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a4">0.1.5a4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a3">0.1.5a3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a2">0.1.5a2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a1">0.1.5a1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#a">0.1.5a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#id1">0.1.4a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#id2">0.1.3a</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer/versions.html#id3">0.1.2a</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/versions.html#major-changes">Major changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/versions.html#minor-changes">Minor changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <h1>Source code for pydent.models.field_value</h1><div class="highlight"><pre>
<span></span>&quot;&quot;&quot;
Models related to field values and sample properties.
&quot;&quot;&quot;

import json

from pydent.base import ModelBase
from pydent.exceptions import AquariumModelError
from pydent.marshaller import add_schema
from pydent.models.crud_mixin import JSONSaveMixin, JSONDeleteMixin
from pydent.models.field_value_mixins import FieldMixin
from pydent.models.inventory import Item, Collection, ObjectType
from pydent.models.sample import Sample
from pydent.relationships import HasOne, Function, Raw, fields, HasMany
from pydent.utils import filter_list


<div class="viewcode-block" id="AllowableFieldType"><a class="viewcode-back" href="../../../models.html#pydent.models.AllowableFieldType">[docs]</a>@add_schema
class AllowableFieldType(ModelBase):
    &quot;&quot;&quot;A AllowableFieldType model&quot;&quot;&quot;

    fields = dict(
        field_type=HasOne(&quot;FieldType&quot;),
        object_type=HasOne(&quot;ObjectType&quot;),
        sample_type=HasOne(&quot;SampleType&quot;),
    )

<div class="viewcode-block" id="AllowableFieldType.__init__"><a class="viewcode-back" href="../../../generated/pydent.models.AllowableFieldType.html#pydent.models.AllowableFieldType.__init__">[docs]</a>    def __init__(self, field_type=None, object_type=None, sample_type=None):
        super().__init__(
            field_type_id=None,
            sample_type_id=None,
            object_type_id=None,
            field_type=field_type,
            object_type=object_type,
            sample_type=sample_type,
        )</div>

    def __str__(self):
        return self._to_str(&quot;sample_type&quot;, &quot;object_type&quot;)</div>


<div class="viewcode-block" id="FieldType"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldType">[docs]</a>@add_schema
class FieldType(FieldMixin, ModelBase):
    &quot;&quot;&quot;A FieldType model&quot;&quot;&quot;

    fields = dict(
        allowable_field_types=HasMany(&quot;AllowableFieldType&quot;, &quot;FieldType&quot;),
        operation_type=HasOne(
            &quot;OperationType&quot;, callback=&quot;find_field_parent&quot;, ref=&quot;parent_id&quot;
        ),
        sample_type=HasOne(&quot;SampleType&quot;, callback=&quot;find_field_parent&quot;, ref=&quot;parent_id&quot;),
        field_values=HasMany(&quot;FieldValue&quot;, &quot;FieldType&quot;),
    )

<div class="viewcode-block" id="FieldType.__init__"><a class="viewcode-back" href="../../../generated/pydent.models.FieldType.html#pydent.models.FieldType.__init__">[docs]</a>    def __init__(
        self,
        name=None,
        ftype=None,
        array=None,
        choices=None,
        operation_type=None,
        preferred_field_type_id=None,
        preferred_operation_type_id=None,
        required=None,
        routing=None,
        role=None,
        parent_class=None,
        parent_id=None,
        sample_type=None,
        aft_stype_and_objtype=(),
        allowable_field_types=None,
    ):
        if operation_type and sample_type:
            raise Exception(
                &quot;Cannot instantiate a FieldType for both a OperationType and SampleType.&quot;
            )
        if operation_type:
            parent_class = &quot;OperationType&quot;
        if sample_type:
            parent_class = &quot;SampleType&quot;
        super().__init__(
            name=name,
            ftype=ftype,
            array=array,
            choices=choices,
            role=role,
            preferred_field_type_id=preferred_field_type_id,
            preferred_operation_type_id=preferred_operation_type_id,
            required=required,
            routing=routing,
            parent_class=parent_class,
            parent_id=parent_id,
            sample_type=sample_type,
            operation_type=operation_type,
            allowable_field_types=allowable_field_types,
        )
        self.part = None
        if allowable_field_types is None:
            if aft_stype_and_objtype is not None:
                for smple_type, obj_type in aft_stype_and_objtype:
                    self.create_allowable_field_type(smple_type, obj_type)</div>

    def get_choices(self):
        if self.choices == &quot;&quot;:
            return None
        if self.choices is not None:
            return self.choices.split(&quot;,&quot;)

    def is_parameter(self):
        return self.ftype != &quot;sample&quot;

    def get_allowable_field_types(self, sample_type_id=None, object_type_id=None):
        afts = self.allowable_field_types
        if afts is None or afts == []:
            self.allowable_field_types = None
            afts = self.allowable_field_types
        return filter_list(
            afts, sample_type_id=sample_type_id, object_type_id=object_type_id
        )

    def create_allowable_field_type(self, sample_type=None, object_type=None):
        afts = []
        if self.allowable_field_types:
            afts = self.allowable_field_types
        field_type = self.session.AllowableFieldType.new(
            field_type=self, sample_type=sample_type, object_type=object_type
        )
        afts.append(field_type)
        self.allowable_field_types = afts
        return field_type

<div class="viewcode-block" id="FieldType.initialize_field_value"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldType.initialize_field_value">[docs]</a>    def initialize_field_value(self, field_value=None, parent=None):
        &quot;&quot;&quot;
        Updates or initializes a new :class:`FieldValue` from this FieldType

        :param field_value: optional FieldValue to update with this FieldType
        :type field_value: FieldValue
        :return: updated FieldValue
        :rtype: FieldValue
        &quot;&quot;&quot;

        if not field_value:
            field_value = self.session.FieldValue.new(
                name=self.name, role=self.role, field_type=self
            )
        if self.allowable_field_types:
            field_value.allowable_field_type_id = self.allowable_field_types[0].id
            field_value.allowable_field_type = self.allowable_field_types[0]
        if parent:
            field_value.set_parent(parent)
        return field_value</div></div>


<div class="viewcode-block" id="FieldValue"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldValue">[docs]</a>@add_schema
class FieldValue(FieldMixin, JSONSaveMixin, JSONDeleteMixin, ModelBase):
    &quot;&quot;&quot;
    A FieldValue model. One of the more complex models.

    Change Log:
    * 2019_06_03 FieldValues no longer have &#39;wires_as_source&#39; or &#39;wires_as_dest&#39; fields. Wires may only be accessed
    via plans only or via the FieldValue instance method &#39;get_wires,&#39; which accesses the FieldValues operation
    and its Plan to obtain wires.
    &quot;&quot;&quot;

    fields = dict(
        # FieldValue relationships
        field_type=HasOne(&quot;FieldType&quot;),
        allowable_field_type=HasOne(&quot;AllowableFieldType&quot;),
        array=fields.Field(),
        # array=Function(lambda fv: fv.array, callback_args=(fields.Callback.SELF,)),
        item=HasOne(&quot;Item&quot;, ref=&quot;child_item_id&quot;),
        sample=HasOne(&quot;Sample&quot;, ref=&quot;child_sample_id&quot;),
        object_type_id=Raw(),
        object_type=HasOne(&quot;ObjectType&quot;),
        operation=HasOne(&quot;Operation&quot;, callback=&quot;find_field_parent&quot;, ref=&quot;parent_id&quot;),
        parent_sample=HasOne(&quot;Sample&quot;, callback=&quot;find_field_parent&quot;, ref=&quot;parent_id&quot;),
        sid=Function(&quot;get_sid&quot;),
        child_sample_name=Function(
            lambda fv: fv.sid, callback_args=(fields.Callback.SELF,)
        ),
        wires_as_source=HasMany(&quot;Wire&quot;, ref=&quot;from_id&quot;),
        wires_as_dest=HasMany(&quot;Wire&quot;, ref=&quot;to_id&quot;),
        # allowable_child_types=Function(&#39;get_allowable_child_types&#39;),
    )

<div class="viewcode-block" id="FieldValue.__init__"><a class="viewcode-back" href="../../../generated/pydent.models.FieldValue.html#pydent.models.FieldValue.__init__">[docs]</a>    def __init__(
        self,
        name=None,
        role=None,
        parent_class=None,
        parent_id=None,
        field_type=None,
        sample=None,
        value=None,
        item=None,
        container=None,
    ):
        &quot;&quot;&quot;

        :param value:
        :type value:
        :param sample:
        :type sample:
        :param container:
        :type container:
        :param item:
        :type item:
        &quot;&quot;&quot;
        super().__init__(
            name=name,
            role=role,
            parent_class=parent_class,
            parent_id=parent_id,
            field_type_id=None,
            field_type=field_type,
            child_sample_id=None,
            sample=sample,
            value=value,
            child_item_id=None,
            item=item,
            object_type=container,
            allowable_field_type_id=None,
            allowable_field_type=None,
            column=None,
            row=None,
        )

        if field_type is not None:
            self.set_field_type(field_type)

        if any([value, sample, item, container]):
            self._set_helper(
                value=value, sample=sample, item=item, object_type=container
            )

        if self.parent_class == &quot;Operation&quot; and not self.role:
            raise AquariumModelError(
                &quot;FieldValue {} needs a role to be a field value for an operation&quot;.format(
                    self
                )
            )</div>

<div class="viewcode-block" id="FieldValue.get_sid"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldValue.get_sid">[docs]</a>    def get_sid(self):
        &quot;&quot;&quot;The FieldValues sample identifier.&quot;&quot;&quot;
        if self.sample is not None:
            return self.sample.identifier</div>

    def get_wires(self):
        if not self.role or self.parent_class != &quot;Operation&quot;:
            return None
        elif self.operation and self.operation.plan:
            wires = self.operation.plan.wires
            if self.role == &quot;input&quot;:
                return [w for w in wires if w.does_wire_to(self)]
            elif self.role == &quot;output&quot;:
                return [w for w in wires if w.does_wire_from(self)]
        return []

    def incoming_wires(self):
        if self.role == &quot;input&quot;:
            return self.get_wires()
        return []

    def outgoing_wires(self):
        if self.role == &quot;output&quot;:
            return self.get_wires()
        return []

    @property
    def successors(self):
        if self.outgoing_wires:
            return [x.destination for x in self.outgoing_wires]
        return []

    @property
    def predecessors(self):
        if self.incoming_wires:
            return [x.source for x in self.incoming_wires]
        return []

    def show(self, pre=&quot;&quot;):
        if self.sample:
            if self.child_item_id:
                item = &quot; item: {}&quot;.format(self.child_item_id) + &quot; in {}&quot;.format(
                    self.item.object_type.name
                )
            else:
                item = &quot;&quot;
            print(
                &quot;{}{}.{}:{}{}&quot;.format(pre, self.role, self.name, self.sample.name, item)
            )
        elif self.value:
            print(&quot;{}{}.{}:{}&quot;.format(pre, self.role, self.name, self.value))

<div class="viewcode-block" id="FieldValue.reset"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldValue.reset">[docs]</a>    def reset(self):
        &quot;&quot;&quot;Resets the inputs of the field_value&quot;&quot;&quot;
        self.value = None
        self.allowable_field_type_id = None
        self.allowable_field_type = None
        self.child_item_id = None
        self.item = None
        self.child_sample_id = None
        self.sample = None
        self.row = None
        self.column = None</div>

    def _validate_types(self, name, x, expected_types):
        if x is not None and not any([issubclass(type(x), e) for e in expected_types]):
            raise AquariumModelError(
                &quot;Cannot set FieldValue.{} with a {}. Expected types {}&quot;.format(
                    name, type(x), expected_types
                )
            )

    def _validate_value(self, value):
        if value is not None:
            choices = self.field_type.get_choices()
            if choices is not None:
                if value not in choices and str(value) not in choices:
                    raise AquariumModelError(
                        &quot;Value &#39;{}&#39; not in list of field &quot;
                        &quot;type choices &#39;{}&#39;&quot;.format(value, choices)
                    )
        try:
            json.dumps(value)
        except TypeError as e:
            raise AquariumModelError(
                &quot;Cannot set value &#39;{}&#39;. &quot;
                &quot;Value is not json serializable.&quot;.format(value)
            ) from e

    def _validate_item_and_container(self, item, container):
        self._validate_types(&quot;item&quot;, item, [Item, Collection])
        self._validate_types(&quot;container&quot;, container, [ObjectType])
        if item and container and item.object_type_id != container.id:
            raise AquariumModelError(
                &quot;Item {} is not in container {}&quot;.format(item.id, str(container))
            )

    def _validate_sample(self, sample):
        self._validate_types(&quot;sample&quot;, sample, [Sample])
        if sample is not None and not issubclass(type(sample), Sample):
            raise AquariumModelError(
                &quot;Cannot set sample with a type &#39;{}&#39;&quot;.format(type(sample))
            )

    def _validate_sample_and_item(self, sample, item):
        if sample and hasattr(sample, &quot;id&quot;) and item:
            if not item.sample_id == sample.id:
                raise AquariumModelError(
                    &quot;Cannot set FieldValue {}. Item {} is not a member of sample {}&quot;.format(
                        self, item, sample
                    )
                )

    def _validate_row_and_column(self, row: int, col: int):
        if row and col and (not isinstance(row, int) or not isinstance(col, int)):
            raise AquariumModelError(&quot;Row and column must be integers.&quot;)
        if row is not None:
            if not self.field_type.is_part():
                raise AquariumModelError(
                    &quot;Cannot set row of a non-part for {} {}&quot;.format(
                        self.role, self.name
                    )
                )
            self.row = row
        if col is not None:
            if not self.field_type.is_part():
                raise AquariumModelError(
                    &quot;Cannot set column of a non-part for {} {}&quot;.format(
                        self.role, self.name
                    )
                )
            self.column = col

    def _validate(self, value, sample, item, object_type, row, column):
        self._validate_row_and_column(row, column)
        self._validate_value(value)
        self._validate_sample(sample)
        self._validate_item_and_container(item, object_type)
        # if not self.field_type.part:
        #     self._validate_sample_and_item(sample, item)

    def _set_helper(
        self,
        value=None,
        sample=None,
        item=None,
        object_type=None,
        row=None,
        column=None,
    ):
        self._validate(value, sample, item, object_type, row, column)
        if row is not None:
            self.row = row
        if column is not None:
            self.column = column

        if value is not None:
            self.value = value

        if item is not None:
            self.item = item
            if hasattr(item, &quot;id&quot;):
                self.child_item_id = item.id
            if not sample:
                sample = item.sample
        if sample is not None:
            self.sample = sample
            if hasattr(sample, &quot;id&quot;):
                self.child_sample_id = sample.id
        if object_type is not None:
            self.object_type = object_type

    def valid_afts(self):
        afts = self.field_type.allowable_field_types
        if self.sample is not None:
            afts = filter_list(afts, sample_type_id=self.sample.sample_type_id)
        if self.object_type is not None:
            afts = filter_list(afts, object_type_id=self.object_type.id)
        if self.item is not None and self.item.object_type_id is not None:
            afts = filter_list(afts, object_type_id=self.item.object_type_id)
        return afts

    def _raise_aft_error(self):
        aft_list = []
        for aft in self.field_type.allowable_field_types:
            st = &quot;none&quot;
            ot = &quot;none&quot;
            if aft.object_type is not None:
                ot = aft.object_type.name
            if aft.sample_type is not None:
                st = aft.sample_type.name
            aft_list.append(&quot;{}:{}&quot;.format(st, ot))
        sid = &quot;none&quot;
        if self.sample is not None:
            sid = self.sample.sample_type.name
        oid = &quot;none&quot;
        if self.object_type is not None:
            oid = self.object_type.name
        msg = &quot;No allowable field types found for {}:{}:{} using {}:{}.&quot;
        msg += &quot; Available afts: {}&quot;
        raise AquariumModelError(
            msg.format(self.operation.operation_type.name, self.role, self.name, sid, oid, &quot;, &quot;.join(aft_list))
        )

    def set_aft(self):
        afts = self.valid_afts()
        if len(afts) &gt;= 1:
            self.set_allowable_field_type(afts[0])
        else:
            self._raise_aft_error()

    def set_value(
        self,
        value=None,
        sample=None,
        item=None,
        object_type=None,
        row=None,
        column=None,
        container=None,
    ):
        # to maintain old API
        # if container:
        #     raise DeprecationWarning(&quot;Typed parameter &#39;container&#39; is now depreciated. Please use &#39;object_type&#39;&quot;)
        if object_type is None and container:
            object_type = container
        self._validate(value, sample, item, container, row, column)
        self._set_helper(
            value=value,
            sample=sample,
            item=item,
            object_type=object_type,
            row=row,
            column=column,
        )

        &quot;&quot;&quot;Sets the value of a &quot;&quot;&quot;
        if any([sample, object_type, item]):
            self.set_aft()
        return self

    def get_parent_key(self):
        if self.parent_class == &quot;Operation&quot;:
            return &quot;operation&quot;
        elif self.parent_class == &quot;Sample&quot;:
            return &quot;parent_sample&quot;
        else:
            raise AquariumModelError(
                &quot;Parent class &#39;{}&#39; not recognized as a FieldValue parent.&quot;.format(
                    self.parent_class
                )
            )

    def get_parent(self):
        key = self.get_parent_key()
        return getattr(self, key)

    def set_parent(self, model):
        self.parent_id = model.id
        self.parent_class = model.__class__.__name__
        setattr(self, self.get_parent_key(), model)
        return self

    def set_operation(self, operation):
        self.parent_class = &quot;Operation&quot;
        if hasattr(operation, &quot;id&quot;):
            self.parent_id = operation.id
        self.operation = operation

    def set_sample(self, sample):
        self.parent_class = &quot;Sample&quot;
        if hasattr(sample, &quot;id&quot;):
            self.parent_id = sample.id
        self.sample = sample

<div class="viewcode-block" id="FieldValue.set_field_type"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldValue.set_field_type">[docs]</a>    def set_field_type(self, field_type):
        &quot;&quot;&quot;
        Sets properties from a field_type
        &quot;&quot;&quot;

        self.field_type = field_type
        self.field_type_id = field_type.id

        if field_type.name:
            self.name = field_type.name
        if field_type.parent_class:
            if field_type.parent_class == &quot;OperationType&quot;:
                self.parent_class = &quot;Operation&quot;
            elif field_type.parent_class == &quot;SampleType&quot;:
                self.parent_class = &quot;Sample&quot;
            else:
                raise AquariumModelError(
                    &quot;FieldType parent_class &#39;{}&#39; not recognized&quot;.format(
                        field_type.parent_class
                    )
                )
        if field_type.role:
            self.role = field_type.role</div>

    def set_allowable_field_type(self, allowable_field_type):
        self.allowable_field_type = allowable_field_type
        self.allowable_field_type_id = allowable_field_type.id

<div class="viewcode-block" id="FieldValue.choose_item"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldValue.choose_item">[docs]</a>    def choose_item(self, first=True):
        &quot;&quot;&quot;Set the item associated with the field value&quot;&quot;&quot;
        index = 0
        if not first:
            index = -1
        items = self.compatible_items()
        if items is not None and len(items) &gt; 0:
            item = items[index]
            self.set_value(item=item)
            return item
        return None</div>

<div class="viewcode-block" id="FieldValue.compatible_items"><a class="viewcode-back" href="../../../models.html#pydent.models.FieldValue.compatible_items">[docs]</a>    def compatible_items(self):
        &quot;&quot;&quot;Find items compatible with the field value&quot;&quot;&quot;
        return self.session.utils.compatible_items(
            self.sample.id, self.allowable_field_type.object_type_id
        )</div>

    def __str__(self):
        return self._to_str(&quot;id&quot;, &quot;name&quot;, &quot;role&quot;)</div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2019, University of Washington.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>